{\rtf1\ansi\ansicpg1252\cocoartf1138\cocoasubrtf230
{\fonttbl\f0\fswiss\fcharset0 Optima-Regular;\f1\fnil\fcharset0 HelveticaNeue;\f2\fswiss\fcharset0 Helvetica;
\f3\fmodern\fcharset0 CourierNewPSMT;\f4\fmodern\fcharset0 CourierNewPS-BoldMT;\f5\fmodern\fcharset0 CourierNewPS-ItalicMT;
}
{\colortbl;\red255\green255\blue255;\red43\green105\blue145;\red0\green0\blue153;\red0\green0\blue0;
\red17\green43\blue255;\red255\green25\blue22;\red0\green0\blue112;}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid1\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid4}
{\list\listtemplateid5\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid5}
{\list\listtemplateid6\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid6}
{\list\listtemplateid7\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid7}
{\list\listtemplateid8\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid8}
{\list\listtemplateid9\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid9}
{\list\listtemplateid10\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid10}
{\list\listtemplateid11\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid11}
{\list\listtemplateid12\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid12}
{\list\listtemplateid13\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid13}
{\list\listtemplateid14\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid14}
{\list\listtemplateid15\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid15}
{\list\listtemplateid16\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid16}
{\list\listtemplateid17\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid17}
{\list\listtemplateid18\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid18}
{\list\listtemplateid19\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid19}
{\list\listtemplateid20\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid20}
{\list\listtemplateid21\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid21}
{\list\listtemplateid22\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid22}
{\list\listtemplateid23\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid23}
{\list\listtemplateid24\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid24}
{\list\listtemplateid25\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid2401\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid25}
{\list\listtemplateid26\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid26}
{\list\listtemplateid27\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid2601\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid27}
{\list\listtemplateid28\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid28}
{\list\listtemplateid29\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid29}
{\list\listtemplateid30\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid30}
{\list\listtemplateid31\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid31}
{\list\listtemplateid32\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid32}
{\list\listtemplateid33\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid33}
{\list\listtemplateid34\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid34}
{\list\listtemplateid35\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid35}
{\list\listtemplateid36\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid36}
{\list\listtemplateid37\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid37}
{\list\listtemplateid38\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid3701\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid38}
{\list\listtemplateid39\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid3801\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid39}
{\list\listtemplateid40\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid40}
{\list\listtemplateid41\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid41}
{\list\listtemplateid42\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid42}
{\list\listtemplateid43\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid43}
{\list\listtemplateid44\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid44}
{\list\listtemplateid45\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid45}
{\list\listtemplateid46\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid46}
{\list\listtemplateid47\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid4601\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid47}
{\list\listtemplateid48\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid48}
{\list\listtemplateid49\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid4801\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid49}
{\list\listtemplateid50\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid50}
{\list\listtemplateid51\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid51}
{\list\listtemplateid52\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid52}
{\list\listtemplateid53\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid53}
{\list\listtemplateid54\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid54}
{\list\listtemplateid55\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid55}
{\list\listtemplateid56\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid56}
{\list\listtemplateid57\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid57}
{\list\listtemplateid58\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid58}
{\list\listtemplateid59\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid59}
{\list\listtemplateid60\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid60}
{\list\listtemplateid61\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid61}
{\list\listtemplateid62\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid62}
{\list\listtemplateid63\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid63}
{\list\listtemplateid64\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid64}
{\list\listtemplateid65\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid65}
{\list\listtemplateid66\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid66}
{\list\listtemplateid67\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid67}
{\list\listtemplateid68\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid6701\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid68}
{\list\listtemplateid69\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid69}
{\list\listtemplateid70\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid70}
{\list\listtemplateid71\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid71}
{\list\listtemplateid72\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid72}
{\list\listtemplateid73\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid73}
{\list\listtemplateid74\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid74}
{\list\listtemplateid75\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid75}
{\list\listtemplateid76\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid7501\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid76}
{\list\listtemplateid77\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7602\'02\'01.;}{\levelnumbers\'01;}\fi-360\li1440\lin1440 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid7603\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li2160\lin2160 }{\listname ;}\listid77}
{\list\listtemplateid78\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid78}
{\list\listtemplateid79\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid79}
{\list\listtemplateid80\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid80}
{\list\listtemplateid81\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid81}
{\list\listtemplateid82\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid82}
{\list\listtemplateid83\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid83}
{\list\listtemplateid84\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid84}
{\list\listtemplateid85\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid85}
{\list\listtemplateid86\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid86}
{\list\listtemplateid87\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid87}
{\list\listtemplateid88\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid88}
{\list\listtemplateid89\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid89}
{\list\listtemplateid90\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid90}
{\list\listtemplateid91\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid91}
{\list\listtemplateid92\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid92}
{\list\listtemplateid93\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid93}
{\list\listtemplateid94\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid94}
{\list\listtemplateid95\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid9401\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid95}
{\list\listtemplateid96\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid96}
{\list\listtemplateid97\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid97}
{\list\listtemplateid98\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid98}
{\list\listtemplateid99\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid99}
{\list\listtemplateid100\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid100}
{\list\listtemplateid101\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid101}
{\list\listtemplateid102\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid102}
{\list\listtemplateid103\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid103}
{\list\listtemplateid104\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid104}
{\list\listtemplateid105\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid105}
{\list\listtemplateid106\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid106}
{\list\listtemplateid107\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid107}
{\list\listtemplateid108\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid108}
{\list\listtemplateid109\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid10801\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid109}
{\list\listtemplateid110\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid110}
{\list\listtemplateid111\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid111}
{\list\listtemplateid112\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid112}
{\list\listtemplateid113\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid113}
{\list\listtemplateid114\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid114}
{\list\listtemplateid115\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid115}
{\list\listtemplateid116\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid116}
{\list\listtemplateid117\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid117}
{\list\listtemplateid118\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid118}
{\list\listtemplateid119\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid119}
{\list\listtemplateid120\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid120}
{\list\listtemplateid121\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid121}
{\list\listtemplateid122\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid122}
{\list\listtemplateid123\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid123}
{\list\listtemplateid124\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid124}
{\list\listtemplateid125\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid125}
{\list\listtemplateid126\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid126}
{\list\listtemplateid127\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid127}
{\list\listtemplateid128\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid128}
{\list\listtemplateid129\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid129}
{\list\listtemplateid130\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid130}
{\list\listtemplateid131\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid131}
{\list\listtemplateid132\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid132}
{\list\listtemplateid133\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid133}
{\list\listtemplateid134\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid134}
{\list\listtemplateid135\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid135}
{\list\listtemplateid136\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid136}
{\list\listtemplateid137\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid137}
{\list\listtemplateid138\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid138}
{\list\listtemplateid139\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid139}
{\list\listtemplateid140\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid140}
{\list\listtemplateid141\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid141}
{\list\listtemplateid142\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid142}
{\list\listtemplateid143\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid143}
{\list\listtemplateid144\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid144}
{\list\listtemplateid145\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid145}
{\list\listtemplateid146\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid146}
{\list\listtemplateid147\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid147}
{\list\listtemplateid148\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid148}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}{\listoverride\listid5\listoverridecount0\ls5}{\listoverride\listid6\listoverridecount0\ls6}{\listoverride\listid7\listoverridecount0\ls7}{\listoverride\listid8\listoverridecount0\ls8}{\listoverride\listid9\listoverridecount0\ls9}{\listoverride\listid10\listoverridecount0\ls10}{\listoverride\listid11\listoverridecount0\ls11}{\listoverride\listid12\listoverridecount0\ls12}{\listoverride\listid13\listoverridecount0\ls13}{\listoverride\listid14\listoverridecount0\ls14}{\listoverride\listid15\listoverridecount0\ls15}{\listoverride\listid16\listoverridecount0\ls16}{\listoverride\listid17\listoverridecount0\ls17}{\listoverride\listid18\listoverridecount0\ls18}{\listoverride\listid19\listoverridecount0\ls19}{\listoverride\listid20\listoverridecount0\ls20}{\listoverride\listid21\listoverridecount0\ls21}{\listoverride\listid22\listoverridecount0\ls22}{\listoverride\listid23\listoverridecount0\ls23}{\listoverride\listid24\listoverridecount0\ls24}{\listoverride\listid25\listoverridecount0\ls25}{\listoverride\listid26\listoverridecount0\ls26}{\listoverride\listid27\listoverridecount0\ls27}{\listoverride\listid28\listoverridecount0\ls28}{\listoverride\listid29\listoverridecount0\ls29}{\listoverride\listid30\listoverridecount0\ls30}{\listoverride\listid31\listoverridecount0\ls31}{\listoverride\listid32\listoverridecount0\ls32}{\listoverride\listid33\listoverridecount0\ls33}{\listoverride\listid34\listoverridecount0\ls34}{\listoverride\listid35\listoverridecount0\ls35}{\listoverride\listid36\listoverridecount0\ls36}{\listoverride\listid37\listoverridecount0\ls37}{\listoverride\listid38\listoverridecount0\ls38}{\listoverride\listid39\listoverridecount0\ls39}{\listoverride\listid40\listoverridecount0\ls40}{\listoverride\listid41\listoverridecount0\ls41}{\listoverride\listid42\listoverridecount0\ls42}{\listoverride\listid43\listoverridecount0\ls43}{\listoverride\listid44\listoverridecount0\ls44}{\listoverride\listid45\listoverridecount0\ls45}{\listoverride\listid46\listoverridecount0\ls46}{\listoverride\listid47\listoverridecount0\ls47}{\listoverride\listid48\listoverridecount0\ls48}{\listoverride\listid49\listoverridecount0\ls49}{\listoverride\listid50\listoverridecount0\ls50}{\listoverride\listid51\listoverridecount0\ls51}{\listoverride\listid52\listoverridecount0\ls52}{\listoverride\listid53\listoverridecount0\ls53}{\listoverride\listid54\listoverridecount0\ls54}{\listoverride\listid55\listoverridecount0\ls55}{\listoverride\listid56\listoverridecount0\ls56}{\listoverride\listid57\listoverridecount0\ls57}{\listoverride\listid58\listoverridecount0\ls58}{\listoverride\listid59\listoverridecount0\ls59}{\listoverride\listid60\listoverridecount0\ls60}{\listoverride\listid61\listoverridecount0\ls61}{\listoverride\listid62\listoverridecount0\ls62}{\listoverride\listid63\listoverridecount0\ls63}{\listoverride\listid64\listoverridecount0\ls64}{\listoverride\listid65\listoverridecount0\ls65}{\listoverride\listid66\listoverridecount0\ls66}{\listoverride\listid67\listoverridecount0\ls67}{\listoverride\listid68\listoverridecount0\ls68}{\listoverride\listid69\listoverridecount0\ls69}{\listoverride\listid70\listoverridecount0\ls70}{\listoverride\listid71\listoverridecount0\ls71}{\listoverride\listid72\listoverridecount0\ls72}{\listoverride\listid73\listoverridecount0\ls73}{\listoverride\listid74\listoverridecount0\ls74}{\listoverride\listid75\listoverridecount0\ls75}{\listoverride\listid76\listoverridecount0\ls76}{\listoverride\listid77\listoverridecount0\ls77}{\listoverride\listid78\listoverridecount0\ls78}{\listoverride\listid79\listoverridecount0\ls79}{\listoverride\listid80\listoverridecount0\ls80}{\listoverride\listid81\listoverridecount0\ls81}{\listoverride\listid82\listoverridecount0\ls82}{\listoverride\listid83\listoverridecount0\ls83}{\listoverride\listid84\listoverridecount0\ls84}{\listoverride\listid85\listoverridecount0\ls85}{\listoverride\listid86\listoverridecount0\ls86}{\listoverride\listid87\listoverridecount0\ls87}{\listoverride\listid88\listoverridecount0\ls88}{\listoverride\listid89\listoverridecount0\ls89}{\listoverride\listid90\listoverridecount0\ls90}{\listoverride\listid91\listoverridecount0\ls91}{\listoverride\listid92\listoverridecount0\ls92}{\listoverride\listid93\listoverridecount0\ls93}{\listoverride\listid94\listoverridecount0\ls94}{\listoverride\listid95\listoverridecount0\ls95}{\listoverride\listid96\listoverridecount0\ls96}{\listoverride\listid97\listoverridecount0\ls97}{\listoverride\listid98\listoverridecount0\ls98}{\listoverride\listid99\listoverridecount0\ls99}{\listoverride\listid100\listoverridecount0\ls100}{\listoverride\listid101\listoverridecount0\ls101}{\listoverride\listid102\listoverridecount0\ls102}{\listoverride\listid103\listoverridecount0\ls103}{\listoverride\listid104\listoverridecount0\ls104}{\listoverride\listid105\listoverridecount0\ls105}{\listoverride\listid106\listoverridecount0\ls106}{\listoverride\listid107\listoverridecount0\ls107}{\listoverride\listid108\listoverridecount0\ls108}{\listoverride\listid109\listoverridecount0\ls109}{\listoverride\listid110\listoverridecount0\ls110}{\listoverride\listid111\listoverridecount0\ls111}{\listoverride\listid112\listoverridecount0\ls112}{\listoverride\listid113\listoverridecount0\ls113}{\listoverride\listid114\listoverridecount0\ls114}{\listoverride\listid115\listoverridecount0\ls115}{\listoverride\listid116\listoverridecount0\ls116}{\listoverride\listid117\listoverridecount0\ls117}{\listoverride\listid118\listoverridecount0\ls118}{\listoverride\listid119\listoverridecount0\ls119}{\listoverride\listid120\listoverridecount0\ls120}{\listoverride\listid121\listoverridecount0\ls121}{\listoverride\listid122\listoverridecount0\ls122}{\listoverride\listid123\listoverridecount0\ls123}{\listoverride\listid124\listoverridecount0\ls124}{\listoverride\listid125\listoverridecount0\ls125}{\listoverride\listid126\listoverridecount0\ls126}{\listoverride\listid127\listoverridecount0\ls127}{\listoverride\listid128\listoverridecount0\ls128}{\listoverride\listid129\listoverridecount0\ls129}{\listoverride\listid130\listoverridecount0\ls130}{\listoverride\listid131\listoverridecount0\ls131}{\listoverride\listid132\listoverridecount0\ls132}{\listoverride\listid133\listoverridecount0\ls133}{\listoverride\listid134\listoverridecount0\ls134}{\listoverride\listid135\listoverridecount0\ls135}{\listoverride\listid136\listoverridecount0\ls136}{\listoverride\listid137\listoverridecount0\ls137}{\listoverride\listid138\listoverridecount0\ls138}{\listoverride\listid139\listoverridecount0\ls139}{\listoverride\listid140\listoverridecount0\ls140}{\listoverride\listid141\listoverridecount0\ls141}{\listoverride\listid142\listoverridecount0\ls142}{\listoverride\listid143\listoverridecount0\ls143}{\listoverride\listid144\listoverridecount0\ls144}{\listoverride\listid145\listoverridecount0\ls145}{\listoverride\listid146\listoverridecount0\ls146}{\listoverride\listid147\listoverridecount0\ls147}{\listoverride\listid148\listoverridecount0\ls148}}
\margl1440\margr1440\margb1800\margt1800
\deftab720
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sa1360\pardirnatural

\f0\b\fs64 \cf0 \kerning1\expnd7\expndtw38
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
UVM Training Guide\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa120\pardirnatural

\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Table of Contents\
\pard\tqr\tx9360\pardeftab720\li180\sa120\pardirnatural

\f1\i\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \outl0\strokewidth0 \strokec2 Revision History	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 6
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural
\cf2 \expnd0\expndtw0\kerning0
\strokec2 Introduction	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 7
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 About This Tutorial	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 7
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
About utut	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 7
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\sa120\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Prerequisites	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 9
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
The ALUTB Testbench	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 10
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural
\cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 1: Your First Test	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 12
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Using the UVM Template Generator	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 12
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
flist Files	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 14
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Extended from the Base Test	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 14
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Changing the Clock Frequency	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 15
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Overriding Constraints	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 15
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 17
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 2: Class Factories	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 18
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Extending the Driver	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 18
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Using The Factory	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 19
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 22
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\sa120\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 The ALU Protocol	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 23
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural
\cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 3: Creating a Transaction	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 25
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Creating a vcomponent	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 25
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
A Sequence Item is a Transaction	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 26
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Typedefs Rule	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 27
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Sequence Item U-Turns	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 28
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Adding Constraints	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 28
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Printing Your Classes	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 29
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Packing and Unpacking	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 31
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Printing, Comparing, Packing...Recording?	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 35
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Adding Coverpoints	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 36
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 36
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 4: Creating an Interface	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 37
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The ALU Interface Explained	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 40
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Connecting the Interface to the DUT	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 40
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Storing the Interface in the Database	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 41
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 43
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 5: Creating an Agent	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 44
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Creating Multiple Files	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 44
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Objects vs. Components	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 44
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
All About Configurations	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 49
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
All About The Class Factory	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 51
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Factory Overrides on Non-Components	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 52
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
How To See Everything	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 53
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 53
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 6: TLM Ports, Imps, and Exports	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 54
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 TLM Ports	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 54
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
TLM Implementations (Imps)	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 55
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Connecting	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 55
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
TLM Exports	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 56
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
TLM Summary	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 56
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Imp Declarations	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 57
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Compared to TestBuilder	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 58
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Many-to-One and One-to-Many	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 59
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Broadcasting to a Listener	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 60
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 62
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 7: Beginning Sequences	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 64
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A Simple Generator	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 64
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
`uvm_do Macros	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 66
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Getting a Response	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 67
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Response Queue Handler	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 69
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Complex Routines	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 71
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Sequencing other Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 77
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Sequence Hierarchy	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 80
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
The Sequencer	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 81
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Locking and Grabbing	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 83
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Prediction Encapsulation	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 84
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 86
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 8: Drivers and Monitors	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 87
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Fetching the Interface	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 87
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Getting the Next Item	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 89
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Driving a Transaction	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 90
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Monitoring Activity	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 92
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 96
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 9: Writing a Predictor	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 97
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Monitor Prediction	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 97
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Scoreboards	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 97
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
PW Scoreboard	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 98
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Comparators	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 98
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Prediction Encapsulation	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 99
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Roll-Your-Own	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 99
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Reference Modeling	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 101
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 106
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 10: Configuration Registers	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 107
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Register Organization	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 107
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
References for Everyone!	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 108
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Configuring Your Block	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 109
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
The kval Test	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 109
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
How It All Works	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 111
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Fixing Our Predictor	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 113
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Register Callbacks	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 114
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Built-In Register Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 115
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 116
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 11: Writing Tests	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 117
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 CFG Classes	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 117
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Test Overrides	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 120
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 123
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 12: Advanced Sequences I	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 125
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Default Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 125
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Library Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 126
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Library Sequence Configuration	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 127
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Persistent Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 129
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Sequencer References	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 130
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Handling Cyclical Dependencies	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 132
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Sequence Configurations	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 137
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 138
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 13: A New Testbench	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 139
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The ALU Framer	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 139
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Creating the FRM Testbench	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 139
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
UVM New Testbench (untb)	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 140
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 14: Advanced Sequences II	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 144
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Virtual Sequences and Sequencers	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 144
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Virtual Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 146
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Adapter Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 150
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Adding Time Delays	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 152
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 154
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix A: Phases and Heartbeats	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 155
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Watchdog Timer	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 155
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Phase Objections	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 155
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Deadlock Checking	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 158
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix B: Common Recipes	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 160
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Implementing a Watchdog	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 160
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Forking Multiple Instances of a Method	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 160
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Phase-Boundary Crossing Tasks	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 161
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Handling a Reset	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 161
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\sa180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix C: Environment Chaining	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 163
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\i0\fs36 \cf2 \expnd0\expndtw0\kerning0
\up0 \outl0\strokewidth0 \strokec2 Revision History\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth942\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clcbpat2 \clwWidth1502\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth1593\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clcbpat2 \clwWidth4900\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Version
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Author
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Date
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Notes
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth942\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1502\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1593\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth4900\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0.1
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Brian Hunter
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Oct. 5, 2011
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Initial release to SPOC working group.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth942\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1502\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1593\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth4900\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0.2
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Brian Hunter
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Oct. 27, 2011
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Second release to SPOC working group.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth942\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1502\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1593\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth4900\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0.3
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Brian Hunter
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Dec. 1, 2011
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 All major content complete.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Introduction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Welcome to Cavium\'92s UVM Tutorial.  In these lessons, you will learn the key concepts of UVM and how to use it with SystemVerilog for verification within Cavium\'92s environment.\
To get to this document, you should have already run the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_tutorial.py
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  script.  The script should also have unpacked a usable directory that exists on an svn branch that you will own.  You may check your modified files in or out without affecting anybody else\'92s work.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 About This Tutorial\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This tutorial walks you through the process of adding to an existing testbench.  It takes a dive-right-in approach.  Each lesson introduces one or more concepts and presents problems that you are expected to attempt to solve.  
\i \expnd0\expndtw0\kerning0
Some of these problems are intentionally difficult.
\i0 \expnd0\expndtw0\kerning0
  The objective of the problems is to challenge you to find the correct answers through trial-and-error, in order to better familiarize yourself with what works, what doesn\'92t, and where to find the answers.\
If you need help solving the problems, your best courses of action are to:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa40\pardirnatural\qj
\ls1\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}read through the existing UVM code that comprises the testbench;\
{\listtext	\'95	}refer to the UVM reference manual and user\'92s guide, the SystemVerilog Language Reference Manual, or;\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa240\pardirnatural\qj
\ls1\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}visit {\field{\*\fldinst{HYPERLINK "http://www.uvmworld.org"}}{\fldrslt \cf3 \expnd0\expndtw0\kerning0
\ul \ulc3 \strokec3 http://www.uvmworld.org}}.  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
If you are unable to solve a problem, a solution is presented on the following page.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 About utut\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\b0\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 utut
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is a script that is located in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 $CAD_DIR/common/bin
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Use this script to deploy a working area of the UVM tutorial codebase, and various other operations.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Create\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 To create a working area branch of the UVM tutorial codebase in which you can modify files and check in without affecting anyone else\'92s branch, run the following command.  Give it the name of the directory you would like to create:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 >
\f3\b0 \kerning1\expnd-2\expndtw-8
 utut create mydir\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Code\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Many code snippets presented in this tutorial are preceded by a small number.  Using the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utut
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  script as follows will print out the code that you can then cut-and-paste into your own files.  This example prints out code snippet #17:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 mydir/verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utut code 17\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs24 \cf4 \expnd0\expndtw0\kerning0
\strokec4 Lesson\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Each lesson throughout this tutorial has a checkpoint file available.  You can run the following command to update your working copy to be identical to the solutions.  This will, however, delete any modifications that currently exist in your working directory.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 mydir/verif>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utut lesson 3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs24 \cf4 \expnd0\expndtw0\kerning0
\strokec4 Cleanup\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Whenever you want to remove any working branches that you have created with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utut
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , you can run the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cleanup
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  command.  This command will allow you to remove one or all of the working branches associated with the user.  It will not delete any working directories on your system.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 mydir>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utut cleanup\
++ Looking for branches for user username\
++ Found these branches:\
\
  0: uvmtut_username_mytut/\
  1: uvmtut_username_mytut2/\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f5\i \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 Select branches to be deleted [0-1 or all]:
\f3\i0 \kerning1\expnd-2\expndtw-8
  0\
Removing these branches:\
['uvmtut_username_mytut/']\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 ++ Running 'rs4 rm -m RemoveBranchesFor:username svn+ssh://masvn/svn/o68/branches/uvmtut_username_mytut/' in directory mydir\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Prerequisites\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Before beginning the UVM Tutorial, you should already be quite familiar with SystemVerilog\'92s verification components, including but not limited to these chapters of specification:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa40\pardirnatural\qj
\ls2\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Classes and Inheritance\
{\listtext	\'95	}Constrained Random Value Generation\
{\listtext	\'95	}Processes \
{\listtext	\'95	}Functional Coverage Collection\
{\listtext	\'95	}Data Types and Aggregate Data Types\
{\listtext	\'95	}Interfaces, Modports, and Clocking Blocks\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa240\pardirnatural\qj
\ls2\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Interprocess Synchronization and Communication\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
Also, you should have the 
\b \expnd0\expndtw0\kerning0
SystemVerilog 1800-2009
\b0 \expnd0\expndtw0\kerning0
 specification handy for your reference.\
While this is a tutorial on Cavium\'92s usage of UVM, it assumes at least a nascent knowledge of UVM.  Therefore, it is helpful for you to read through the 
\b \expnd0\expndtw0\kerning0
UVM User\'92s Guide 1.1
\b0 \expnd0\expndtw0\kerning0
 and familiarize yourself with the concepts it lays out.\
It is also helpful to keep the 
\b \expnd0\expndtw0\kerning0
UVM 1.1 Class Reference 
\b0 \expnd0\expndtw0\kerning0
handy.\
You should definitely familiarize yourself with our company\'92s 
\b \expnd0\expndtw0\kerning0
SV Guidelines
\b0 \expnd0\expndtw0\kerning0
 on our internal wiki.  This document describes coding guidelines, naming conventions, testbench organization, and generally preferred best practices.  It also points you to the 
\b \expnd0\expndtw0\kerning0
NaturalDocs website
\b0 \expnd0\expndtw0\kerning0
, which describes how code should be documented to work with this documentation generator.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qj
\expnd0\expndtw0\kerning0
All of these aforementioned documents are linked {\field{\*\fldinst{HYPERLINK "http://iceman.caveonetworks.com/wiki/index.php/SV_&_UVM_Resources"}}{\fldrslt 
\i \cf3 \expnd0\expndtw0\kerning0
\ul \ulc3 \strokec3 here}}.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 The ALUTB Testbench\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The ALU testbench (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) is a pure UVM testbench created for the purposes of this tutorial.  The Device Under Test (DUT) is a block called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rtl/alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).  This block is not a real RTL block in the chip.  It has CSRs on the NCB interface, and has a simple interface to perform math computation requests.  In this tutorial, you will be responsible for creating UVM testbench code to test this device (and find bugs!).\
The top-level hierarchy of the current ALUTB testbench approximates this diagram:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic pastedGraphic.pdf \width5320 \height4320
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 We\'92ll discuss these particulars in more detail later.  But first note that the top-level of the environment hierarchy is the test itself.  This is a radical departure from TestBuilder.  Also notice that each testbench instantiates a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 global_env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is a container for functionality that is needed by every UVM testbench.\
Feel free to read some of the SystemVerilog code that is already present in this testbench, and familiarize yourself with its layout and style.  The code is located in these directories:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa40\pardirnatural\qj
\ls3\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - Contains this testbench and all of its tests.\
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - Contains the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  vcomponent (verification code that can be reused in a higher level testbench).\
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/ncb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - Contains the NCB vcomponent.\
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/global
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - Contains the global vcomponent and things that live in the global environment.\
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/cn
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - Contains miscellaneous Cavium-specific utility functions, macros, message customizations, and components.\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa240\pardirnatural\qj
\ls3\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/uvm/1_1
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - Contains the UVM 1.1 library itself.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
If you enter the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory and run the following, you should get a test to run and PASS.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 cnmake sim SIMU=VCS\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If your simulation fails, proceed no further and seek some help.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 1: Your First Test\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this lesson, you will learn to use the UVM Template Generator to write a test in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  testbench.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Using the UVM Template Generator\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The first objective is to write a test that speeds up the clock frequency.\
The template generator automates the creation of UVM files and classes.  You should use it  all the time because it saves you a considerable amount of typing.  It also creates files and classes with a consistent look and feel, which encourages readability.\
The first thing to do is go into the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb/tests
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory and create a new test.  The script is called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and it takes as its argument the name of a template.  You also give it the name of the file/class to create:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/alutb/tests>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg test -n fast_clk\
++ Creating fast_clk.sv\

\f4\b \kerning1\expnd-2\expndtw-8
fast_clk test: Enter substitution for <description>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 
\f5\i \kerning1\expnd-2\expndtw-8
A test that makes the clock go super fast!
\f3\i0 \kerning1\expnd-2\expndtw-8
\
//-*- mode: Verilog; verilog-indent-level: 3; indent-tabs-mode: nil; tab-width: 1 -*-\
\
// **********************************************************************\
// * CAVIUM CONFIDENTIAL                                                 \
// *                                                                     \
// *                         PROPRIETARY NOTE                            \
// *                                                                     \
// * This software contains information confidential and proprietary to  \
// * Cavium, Inc. It shall not be reproduced in whole or in part, or     \
// * transferred to other documents, or disclosed to third parties, or   \
// * used for any purpose other than that for which it was obtained,     \
// * without the prior written consent of Cavium, Inc.                   \
// * (c) 2011, Cavium, Inc.  All rights reserved.                      \
// * (utg v0.5.1)\
// ***********************************************************************\
// File:   fast_clk.sv\
// Author: username\
/* About:  A test that makes the clock go super fast!\
 *************************************************************************/\
\
`ifndef __FAST_CLK_SV__\
   `define __FAST_CLK_SV__\
\
   `include "base_test.sv"\
// (`includes go here)\
\
// class: fast_clk_test_c\
// (Describe me)\
class fast_clk_test_c extends base_test_c;\
   `uvm_component_utils_begin(fast_clk_test_c)\
   `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="test",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
   endfunction : build_phase\
\
   ////////////////////////////////////////////\
   // func: connect_phase\
   virtual function void connect_phase(uvm_phase phase);\
      super.connect_phase(phase);\
   endfunction : connect_phase\
\
   ////////////////////////////////////////////\
   // func: end_of_elaboration_phase\
   virtual function void end_of_elaboration_phase(uvm_phase phase);\
      super.end_of_elaboration_phase(phase);\
   endfunction : end_of_elaboration_phase\
\
   ////////////////////////////////////////////\
   // func: run_phase\
   virtual task run_phase(uvm_phase phase);\
      super.run_phase(phase);\
   endtask : run_phase\
\
endclass : fast_clk_test_c\
   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `endif // __FAST_CLK_SV__\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Because we did not add 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 -f
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to the command-line, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  just printed its output to the screen.  \
As you can see, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  chose to name the class 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , even though we asked it to be named 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  This is because according to our coding guidelines, tests must have the word 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 test
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  as a suffix, and all classes must end in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Some of our internal tools expect these conventions to be followed, and it\'92s much easier to tell what kind of class it is, isn\'92t it?  It also created lots of (nearly) empty tasks and functions for you, to save you some typing.  If you don\'92t need these, you can leave them there for future expansion, or you can delete them if you like smaller files.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  also asked you to fill in a description.  The templates have tagged identifiers in them, and if 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  doesn\'92t know what to put in there, it will ask you.  In order to skip these requests and just have 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  leave the tags in the document, add 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 -q
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to the command-line. Note that some tags are not within comments, and will break the compile if they remain.\
You can cut and paste this into a file, or you can use this technique to make sure that 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will do what you want it to do.  Instead, lets just have 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  pipe this directly into the file called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and we\'92ll have it leave the tags in the resultant file:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/alutb/tests>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg test -n fast_clk -f -q\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 ++ Creating fast_clk.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
Now, you have a file called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the tests directory and it\'92s time to actually do something with it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 flist Files\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 But before we go much further, there\'92s one bit of housecleaning we need to do.  The cnmake script relies upon files called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 flists
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to help it know what SystemVerilog files to compile and what order to compile them in.  Edit the file 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb/alutb.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and add your new test file to it, so that it looks like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls4\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/alutb.flist\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 +incdir+../../verif/alutb\
+incdir+../../verif/common\
+incdir+../../verif/uvm_common\
+incdir+../../verif/hdl\
+incdir+../../verif/alutb/tests\
../../verif/alutb/alutb_tb_top.sv\
../../verif/alutb/alu_wrapper.sv\
../../verif/alutb/tests/basic.sv\
../../verif/alutb/tests/base_test.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 ../../verif/alutb/tests/fast_clk.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve marked the change you need to make in 
\b \expnd0\expndtw0\kerning0
bold
\b0 \expnd0\expndtw0\kerning0
.  Each directory has an flist file in it, but as you\'92ll see later you won\'92t need to do this all the time.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f1\b \cf6 \expnd0\expndtw0\kerning0
\up0 \strokec6 TODO: Automate this?!?
\f0\b0 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Extended from the Base Test\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now, take a look at your new test, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Pretty, isn\'92t it?  You\'92ll notice that it extends from the class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  In fact, all tests descend from this test, but it\'92s not a test at all.  Well, it is, but it\'92s not one that does any testing.\
Actually, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will be the tippy-top of the component hierarchy in every simulation you run.  It\'92s the one that instantiates all of the same components that (most) tests will share, so they don\'92t have to do the same thing over and over.\
Go ahead and take a gander at 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  It looks a lot like 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , except it has 
\i \expnd0\expndtw0\kerning0
stuff 
\i0 \expnd0\expndtw0\kerning0
in it.  As the coding guidelines say, it has all of its fields at the top, and all of its methods at the bottom.  The phase methods are declared in the order that they will run.  Each section has a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 Group:
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  comment, each field has a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 var:
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  comment, and each method has a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 func:
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  comment.  These are parsed by the documentation generator to make all that pretty documentation.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Changing the Clock Frequency\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You\'92re probably eager to actually write some code, so let\'92s get to it.  In 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , look for the instantiation of the clock driver, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_clk_drv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.  This driver is a component, and so can be configured directly through the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_config
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  functions.  As you can see in the line just before it is instantiated, the base test has configured the period of the clock driver to be 2,000ps.  Let\'92s get it going faster in our new test.\
Back in our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk_test_c 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 class, modify its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function to look like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls5\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/fast_clk.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       set_config_int("tb_clk_drv", "period", 1800);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This will re-configure the clock driver\'92s period to be 1800ps.  A detailed explanation of how this works will be given in Lesson 5.  For now, know that it\'92s important that these configuration calls happen during a component\'92s build phase, and that they happen after you call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
Now go ahead and simulate, and you should see a period of 1.8ns.  Here\'92s the command-line, which you\'92ll execute from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 cnmake sim TEST=fast_clk SIMU=VCS\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 See cnmake\'92s help function for more information on how to use that tool.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Overriding Constraints\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 That\'92s great, you say, but what if I want more randomness?  What if I want a clock period between 1.8ns and 2ns?\
Well, that\'92s what constraints are great for.  A component is a SystemVerilog class, and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 period
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field is a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rand int
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , so it can be randomized anytime after it is new\'92ed.  So, let\'92s change our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk_test_c::build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to this instead:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls6\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/fast_clk.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
      
\f4\b \kerning1\expnd-2\expndtw-8
tb_clk_drv.randomize() with \{\
         period inside \{[1800:1999]\};\
      \};\
      `cn_info($psprintf(\'93Selected a period of %dps\'94, tb_clk_drv.period))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
Note our first use of the Cavium-specific messaging macro `
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn_info
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  These work just like their corresponding macros in TestBuilder, but you need to call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 $psprintf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to get formatted printing.\
Go ahead and run that, but add 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 NOBLD=lib
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to your command-line.  This prevents cnmake from re-compiling the C code, which hasn\'92t changed at all:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa160\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 cnmake sim TEST=fast_clk SIMU=VCS NOBLD=lib\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0\b\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Question\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Didn\'92t work, did it?  Instead, you got a period of 2,000ps, which is what the base test specified.  \
Do you know why?  Do you know how to fix it?\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i \expnd0\expndtw0\kerning0
For the answer, see the next page
\i0 \expnd0\expndtw0\kerning0
.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Answer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here\'92s what happens:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls7\ilvl0{\listtext	1.	}The base test\'92s build phase stuffs a period of 2,000ps into the resource database.\
{\listtext	2.	}It then creates the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_clk_drv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  component.\
{\listtext	3.	}Then, we randomize the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_clk_drv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  component and get a nice random value.\
{\listtext	4.	}Later, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_clk_drv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  component\'92s build phase runs, fetches the value of 2,000ps, and assigns it to the period.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
So how do we fix it?  Simple.  We randomize it in a later phase.  Either the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 connect
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 end_of_elaboration
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_of_simulation
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phases will do, since they run after the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  \
You can move your randomize call from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 end_of_elaboration
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead.  Re-simulate and check your results.  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This was a dive-right-in lesson that familiarized you with the UVM template generator, flist files, writing a little bit of SystemVerilog, and running using cnmake.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 2: Class Factories\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this lesson, you will learn to create a derived driver class and use the factory to instantiate it instead of the base class.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Extending the Driver\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The goal of this lesson is to create a clock driver that has a 75/25 duty cycle.  The generic clock driver, located in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/cn/cn_clk_drv.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , has lots of optional but complex functionality such as jitter and drift that we will not need.  Instead, we want to create a simple clock driver that has a \'911\'92 for 75% of its period and a \'910\'92 for the remaining 25%.\
To start, head over to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory and create a generic component using utg:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg component -n clk_duty_cycle -f -q\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 ++ Creating clk_duty_cycle.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This doesn\'92t precisely do what you want.  When you open the file, you\'92ll see that there are still template variables all around because we specified 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to run quietly (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 -q
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).  It also didn\'92t know that we wanted to extend from an existing driver.  But, using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is still much faster than writing all of this boilerplate code.  And, since we\'92re creating this driver in the testbench itself, there is no package to reference.  So you also need to get rid of all 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 <pkg_name>
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  things.\
You\'92ll want to extend this not from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_component
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  but from the generic clock driver instead, which being in a separate package will need the scope operator (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn_pkg::
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 2-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Do your best to modify the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 clk_duty_cycle_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to drive a clock with a 75/25 duty cycle.  Consider the variables 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 period
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 init_delay
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 init_value
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 init_x
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  as defined in the base class in your algorithm.\
You won\'92t be able to simulate it just yet.\
(
\i \expnd0\expndtw0\kerning0
See answer on the following page
\i0 \expnd0\expndtw0\kerning0
).\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is one possible solution:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls8\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/clk_duty_cycle.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 // class: clk_duty_cycle_c\
// A clock with a duty cycle of 75/25.\
class clk_duty_cycle_c extends cn_pkg::clk_drv_c;\
   `uvm_component_utils(clk_duty_cycle_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="clk_duty_cycle",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: run_phase\
   virtual task run_phase(uvm_phase phase);\
      int uptime = 3*period_ps / 4;\
      int downtime = period_ps - uptime;\
\
      // set to initial value\
      clk_vi.clk = (init_x)? 'bx : init_value;\
      #(init_delay_ps * 1ps);\
      \
      forever begin\
         clk_vi.clk = 1;\
         #(uptime * 1ps);\
         clk_vi.clk = 0;\
         #(downtime * 1ps);\
      end\
   endtask : run_phase\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : clk_duty_cycle_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note that all of the empty methods have been deleted.  You could keep them there in case you need them later, with no effect on performance.  However, one method that you can never remove is the constructor function, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  This function must always be present in derived UVM classes.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Using The Factory\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The base test creates the testbench clock driver (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_clk_drv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) using the factory overridable create method:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       // Create the clock driver\
      set_config_string("tb_clk_drv", "intf_name", "tb_clk_vi");\
      set_config_int   ("tb_clk_drv", "period",    2000);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       tb_clk_drv = cn_pkg::clk_drv_c::type_id::create("tb_clk_drv", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This is essentially the same as calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but if there were earlier factory overrides, then they would be used.  It is usually best to never call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  on a UVM object, but to call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 create()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead, as it provides this flexibility for free.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 2-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Create a test called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 duty_cycle_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that overrides the generic clock driver with your new clock driver.  Run this test and see your new duty cycle.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
If you were successful, the signal 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top.tb_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  should now have the new duty cycle.  This is one possible solution:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls9\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/duty_cycle.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `ifndef __DUTY_CYCLE_SV__\
   `define __DUTY_CYCLE_SV__\
\
   `include "base_test.sv"\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `include "clk_duty_cycle.sv"\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
// class: duty_cycle_test_c\
// Run using the clk_duty_cycle_c instead of cn_pkg::clk_drv_c\
class duty_cycle_test_c extends base_test_c;\
   `uvm_component_utils(duty_cycle_test_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="duty_cycle_test",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   oovirtual function void build_phase(uvm_phase phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       set_type_override_by_type(cn_pkg::clk_drv_c::get_type(),\
                                clk_duty_cycle_c::get_type(), .replace(1));\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : build_phase\
\
endclass : duty_cycle_test_c\
   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `endif // __DUTY_CYCLE_SV__\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There are two keys here.  The first is that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 clk_duty_cycle.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file must be included by this file, because it is a dependency.  The second is that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_type_override_by_type
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function call must precede the call to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Do you know why?\
You could also use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_type_override_by_name
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead when you want to override a specifically named clock.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 2-3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
How could you run the earlier 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  test that you wrote with your new clock driver but 
\i \expnd0\expndtw0\kerning0
without
\i0 \expnd0\expndtw0\kerning0
 needing to modify any code at all?\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
UVM offers a set of options that allow you to perform a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_type_override
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  from the command-line.  Running your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  test with this command-line will do it:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls10\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 cnmake sim SIMU=VCS TEST=fast_clk \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5              SIMOPTS+=+uvm_set_type_override=clk_drv_c,clk_duty_cycle_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This lesson introduced what class factories are capable of and had you write a smattering of SystemVerilog.  Up next, you will start doing some real work on the ALU testbench.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 The ALU Protocol\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The ALU module operates as a simple arithmetic logic unit.  It has a 1-bit control signal, an 8-bit data input interface, and a 32-bit data output interface with a 1-bit output ready signal:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 1__#$!@%!#__pastedGraphic.pdf \width5080 \height2220
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Input data and control are sampled on the rising edge of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sclk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  The first cycle in an input transaction contains the 8-bit operation on 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_dat[7:0]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal is high.  
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is held low for the remainder of the transaction and may not go high again to signal a new transaction until after the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_ready
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  output signal has been sampled high.  The
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  alu_dat[7:0]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  lines contain the remaining operands based on the ten operation types as per this chart:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth914\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clcbpat2 \clwWidth647\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clcbpat2 \clwWidth849\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clcbpat2 \clwWidth745\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth846\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clcbpat2 \clwWidth784\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clcbpat2 \clwWidth2055\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clcbpat2 \clwWidth1697\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Operation
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Cycle 0
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Cycle 1
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Cycle 2
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Cycle 3
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Cycle 4
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Formula
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Notes
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 ADD_A_B
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (a+b) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SUB_A_B
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h1
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (a-b) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a > b
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SUB_B_A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h2
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (b-a) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b > a
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 MUL_A_B
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h3
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (a*b) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 DIV_A_B
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h4
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (a/b) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b != 0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 DIV_B_A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h5
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (b/a) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a != 0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 INC_A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h6
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (a+1) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 INC_B
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h7
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (b+1) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 CLR_RES
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h8
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Sets previous result to zero
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 ACCUM
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h9
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k*(a+result) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Uses previous result value
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
As you can see, some transactions take fewer cycles than others.  The result is valid on the assertion of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ready
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal, and the number of cycles that takes also depends on the operation chosen.\
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 k
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  values are the 8-bit values programmed into the CSR named 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ALU_CONST
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  The sum of all results since it was last read should be in the CSR 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ALU_RESULT[SOR]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is a read-clear CSR.\
Your job in future lessons will be to verify this simple sub-module using an agent that you create, collect functional coverage, and maybe even find a bug or two.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clmgf \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 ALU_CONST = 0x7E8
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth1016\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clcbpat2 \clwWidth873\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clcbpat2 \clwWidth619\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clcbpat2 \clwWidth557\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clcbpat2 \clwWidth5773\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Bit
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Field Name
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Type
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Reset
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Description
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1016\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clshdrawnil \clwWidth873\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clshdrawnil \clwWidth619\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clshdrawnil \clwWidth557\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clshdrawnil \clwWidth5773\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 <63:16>
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 NS
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 RAZ
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 NS
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Reserved
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1016\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clshdrawnil \clwWidth873\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clshdrawnil \clwWidth619\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clshdrawnil \clwWidth557\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clshdrawnil \clwWidth5773\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 <15:8>
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 K_VAL
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 R/W
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 1
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The constant value that is first multiplied to the results of all ALU computations before the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 C_VAL
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is added in.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1016\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clshdrawnil \clwWidth873\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clshdrawnil \clwWidth619\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clshdrawnil \clwWidth557\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clshdrawnil \clwWidth5773\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 <7:0>
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 C_VAL
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 R/W
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The constant value that is added to the results of all ALU computations.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clmgf \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 ALU_RESULT = 0x7F0
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth1016\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clcbpat2 \clwWidth873\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clcbpat2 \clwWidth619\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clcbpat2 \clwWidth557\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clcbpat2 \clwWidth5773\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Bit
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Field Name
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Type
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Reset
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Description
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1016\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clshdrawnil \clwWidth873\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clshdrawnil \clwWidth619\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clshdrawnil \clwWidth557\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clshdrawnil \clwWidth5773\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 <63:32>
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 NS
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 RAZ
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 NS
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Reserved
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1016\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clshdrawnil \clwWidth873\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clshdrawnil \clwWidth619\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clshdrawnil \clwWidth557\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clshdrawnil \clwWidth5773\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 <31:0>
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SOR
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 RC
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The sum of all results so far.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 3: Creating a Transaction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It is often considered good OOP practice to begin with figuring out what the data should look like.  We\'92ll create a transaction that can be generated randomly by a sequence, sent to the driver via a sequencer, and monitored by a monitor.  The predictor will also be able to receive these transaction classes as will a functional coverage monitor.  It would also be nice to be able to pack and unpack these transactions off the wire.\
We will put all of our ALU-related code in a separate vcomponent.  Normally--but not always--a vcomponent is composed of 
\i \expnd0\expndtw0\kerning0
all
\i0 \expnd0\expndtw0\kerning0
 reusable code related to a single testbench, or used in multiple testbenches (i.e. the NCB and RSL agents).  
\b \expnd0\expndtw0\kerning0
The 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  vcomponent is where this should live.  But for the purposes of this tutorial, we will create all ALU related code in a separate vcomponent.
\b0 \expnd0\expndtw0\kerning0
\
With these goals in mind, let\'92s get started.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Creating a vcomponent\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A vcomponent is meant to be a single reusable package that can be individually compiled with the help of other vcomponents.  For a detailed discussion on what a vcomponent is and what it isn\'92t, see the {\field{\*\fldinst{HYPERLINK "http://iceman.caveonetworks.com/wiki/index.php/Sv_guidelines%23Directory_Structure"}}{\fldrslt \cf3 \expnd0\expndtw0\kerning0
\ul \ulc3 \strokec3 SV Coding Guidelines}} on the wiki.\
To create a vcomponent, you can again use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/vcomponents>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg vcomponent -n alu\
++ Creating alu_pkg.sv\
++ Created vcomponent alu\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 ++ Exiting.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This creates the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  package file, and an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file for you.  Other vcomponents that this package relies upon will be placed ahead of this one in the build order.  Then, the files needed to create the ALU package will be 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `included
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  inside the package file.  You will not need to touch the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file at this time.\
To incorporate this new vcomponent into the ALUTB testbench, you need to modify the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb/Makefile
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and add the path to this vcomponent\'92s flist file to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 FLISTS
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable.  The order in which it is added is important based on this vcomponent\'92s dependencies on other vcomponents.  This vcomponent will depend upon 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 global
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  flists, so add it after those.  The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  testbench depends upon this vcomponent, so it needs to be added before that flist as well.\
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 FLIST
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable in the file 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb/Makefile
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  should now be set as follows:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls11\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/Makefile\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 FLISTS= verif/vcomponents/cn/cn.flist \\\
	verif/vcomponents/global/global.flist \\\
	verif/vcomponents/reg/reg.flist \\\
	verif/vcomponents/ncb/ncb.flist \\\
	verif/vcomponents/alutb/alutb.flist \\\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             verif/vcomponents/alu/alu.flist \\\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 	verif/alutb/alutb.flist \\\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 	verif/alutb/rtl.flist\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 A Sequence Item is a Transaction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The class 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  derives directly from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_transaction
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but has the additional property of being able to be driven by a sequence through a sequencer and on to a driver, which are components that we\'92ll discuss in the near future.  It is  a rule that we must derive our new class from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
Create the sequence item file by specifying the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  template.  Call it \'91
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 \'92, and have it saved to the file named 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls12\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/vcomponents/alu>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg item -n item --filename alu_item.sv -q\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 ++ Creating alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The first field in our transaction is the operation, which is a good place for an enumerated type.  Enumerated types need to be specified before the call to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field_enum
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , so put the following at the very top of the class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls13\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    //----------------------------------------------------------------------------------------\
   // Group: Types\
   typedef enum bit [7:0] \{ADD_A_B = 0,\
                           SUB_A_B = 1,\
                           SUB_B_A = 2,\
                           MUL_A_B = 3,\
                           DIV_A_B = 4,\
                           DIV_B_A = 5,\
                           INC_A   = 6,\
                           INC_B   = 7,\
                           CLR_RES = 8,\
                           ACCUM   = 9\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5                            \} operation_e;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Notice that we declared it with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 bit [7:0]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  syntax to tell SystemVerilog how wide it should be.  This will be useful when we pack and unpack this transaction.  Also notice that we provided the suffix of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _e
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to help identify it as an enumerated type, as required in the {\field{\*\fldinst{HYPERLINK "http://iceman.caveonetworks.com/wiki/index.php/Sv_guidelines%23Type_Suffixes"}}{\fldrslt \cf3 \expnd0\expndtw0\kerning0
\ul \ulc3 \strokec3 SV Coding Guidelines}}.\
Now, we add it to the list of fields with the
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  `uvm_field_enum
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls14\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	} verif/vcomponents/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_object_utils_begin(alu_pkg::item_c)\
      `uvm_field_enum(operation_e, operation, UVM_ALL_ON)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_object_utils_end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We chose to give it the flag 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_ALL_ON
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  because we want UVM to pack it, print it, and all the other fancy stuff that UVM provides for free.\
Now, we need to declare the operation as a member field of the class.  Put this in the Fields group:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls15\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    //----------------------------------------------------------------------------------------\
   // Group: Fields\
   // var: operation\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    rand operation_e operation;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We declared it as a random field because we\'92re going to want to produce lots of random transactions later on.\
Now, let\'92s do what we need to do for variables 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 a 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 b
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls16\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_object_utils_begin(alu_pkg::item_c)\
      `uvm_field_enum(operation_e, operation, UVM_ALL_ON)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_field_int (alpha,                  UVM_ALL_ON | UVM_NOPACK)\
      `uvm_field_int (beta,                   UVM_ALL_ON | UVM_NOPACK)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_object_utils_end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We chose to call them 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  because 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 a
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  b
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  are not very good variable names.  We also specified that they are not to be packed.  This, as you\'92ll see later, is important when we go to pack and unpack these transactions, because A and B do not appear in all operation types.\
Declare the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  fields as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rand bit [15:0]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Typedefs Rule\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 At some point in the life of this ALU, somebody\'92s going to want to make a bus wider.  Or narrower.  Or they\'92re going to add a square root operation.  Or they\'92re going to turn it into a router that sorts packets by size.  Whatever happens, it will almost certainly change somehow at some point.  And when it does, you\'92re going to have to change it in a 
\i \expnd0\expndtw0\kerning0
lot
\i0 \expnd0\expndtw0\kerning0
 of places.  Using constants would require you to only make the change in one place.  And, defining constants is much safer because it prevents typos from creating a nightmare debugging session.\
However, defining constants for bus widths using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `defines
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  are so pass\'e9.  Instead, we\'92re going to create a typedef for the result type.  All typedefs end with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _t
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls17\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_pkg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 typedef logic [31:0] result_t;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 That will also be much easier to type all over the place than this would:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 logic [`RESULT_WIDTH-1:0] result;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You can place your typedefs in the vcomponent\'92s package (above all of the included files that depend on it), or you can create an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_types.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `include
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  it in any file that needs it.  The choice is yours.  Either way, the type will be local to the vcomponent\'92s package, so there\'92s no concern for namespace pollution.\
Create typedefs for any type that will be commonly used within a package, including enumerated types.  The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 operation_e
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  enumerated type was placed in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class, but it could just as easily have been placed in the package.  You may also, for example, create types for the operands 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Sequence Item U-Turns\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92re also going to put the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field in the transaction, like so:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls18\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponent/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // var: result\
   // This is the result of the operation, filled in by the driver and sent back with the response\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    result_t result;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 W
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 2__#$!@%!#__pastedGraphic.pdf \width4020 \height2680
}}
\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 hen the transaction is sent to the driver by the sequencer, the driver will (eventually) send a response back.  Sometimes, a block gives no response (for one-way communications, for example).  In cases such as those, it is common for the driver to send the same request item back to the sequencer after the transaction has been completely driven.  \
In our case, there is a response.  But it\'92s just a 32-bit integer.  Both request and response types have to be derived from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , to ensure that they have all the functionality that the sequencer needs to track them.  So, our design will simply have the driver put the result back into the request transaction and send it back once it\'92s been received.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Adding Constraints\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You can\'92t divide by zero.  And the transaction rules don\'92t allow for negative numbers during subtractions, either.  Constraints are the way to do this.  Fortunately, SystemVerilog really shines in this department.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 3-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Exercise your SystemVerilog muscles to add constraints such that all randomized transactions follow the protocol.\
(
\i \expnd0\expndtw0\kerning0
Answer next page
\i0 \expnd0\expndtw0\kerning0
).\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
There are several ways you can approach this, but this is probably the clearest and most concise way:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls19\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // ensure that all operands have legal values\
   constraint protocol_cnstr \{\
      (operation == DIV_A_B) -> beta != 0;\
      (operation == DIV_B_A) -> alpha != 0;\
      (operation == SUB_A_B) -> alpha > beta;\
      (operation == SUB_B_A) -> beta > alpha;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note that all constraint blocks need a name, and they should end in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _cnstr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Also, you should put your constraints near the field declarations themselves, in the Fields group.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Printing Your Classes\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Printing your UVM classes to a logfile is something you\'92ll want to do all over the place.  All UVM classes have a method that returns the class as a string--
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sprint
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  This function takes an optional argument of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_printer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  which you can use to define what you want your string to look like.  This class is called a policy class, and they are sprinkled all over UVM.  You then pass this string to one of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  messaging macros, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_info
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ,
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  `cn_dbg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_warn
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_err
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_fatal
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Table Format\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Table format is the default, so you don\'92t need to provide a printer class to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sprint
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.  The following code snippet will produce the table format of a class:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          `cn_info($psprintf("Monitored:\\n%s", item.sprint()))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And the results are shown below:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 %I-(   alu_mon.sv:   140) [alutb_env.alu_agent.mon               ] \{ 38597ns\} Monitored: \
-----------------------------------------------------------------------------------------------------\
Name                               Type                               Size  Value                                      \
-----------------------------------------------------------------------------------------------------\
mon_item                          alu_pkg::item_c                   -     @6203                                      \
  operation                        operation_e                        8     DIV_A_B                                    \
  alpha                            integral                           16    'hc6eb                                     \
  beta                             integral                           16    'h8a74                                     \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 -----------------------------------------------------------------------------------------------------\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 By default, your printed class uses the table printer, which prints your class in a nice, easy-to-read format.  However, it is expensive in simulation time.  For the thrifty, consider using the tree format instead.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Tree Format\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 To print in the tree format, use the following instead.  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `cn_info($psprintf("Monitored:\\n%s", item.sprint(uvm_default_tree_printer)))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And it appears like this in the logfile:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 %I-(   alu_mon.sv:   142) [alutb_env.alu_agent.mon               ] \{ 38573ns\} Monitored:\
mon_item: (alu_pkg::item_c@6195) \{\
  operation: DIV_A_B \
  alpha: 'hcc3d \
  beta: 'h38de \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_default_*_printer 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 objects are globally scoped instances of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_printer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  policy classes that can be used when you don\'92t want to type too much.  Alternatively, you can create your own tree printer instance and use it over and over again:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 uvm_tree_printer tp = new();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `cn_info($psprintf("Monitored:\\n%s", item.
\fs18 \kerning1\expnd-2\expndtw-8
sprint
\fs16 \kerning1\expnd-2\expndtw-8
(tp)))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The benefit of this approach is that you can tweak a variety of printer knobs to get your class just as pretty as you like.  The variety of knobs available is impressive.  See the UVM reference manual\'92s description of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_printer_knobs
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class for details.\
The same approach can be used for the table and line printer classes, too.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Line Format\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The cheapest formatting is the line printer:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             `cn_info($psprintf("Monitored:\\n%s", item.sprint(uvm_default_line_printer)))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And its appearance is as shown here:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 %I-( alu_mon.sv:   142) [alutb_env.alu_agent.mon ] \{ 38597ns\} Monitored:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 mon_item: (alu_pkg::item_c@6203) \{ operation: DIV_A_B  alpha: 'hc6eb  beta: 'h8a74  \} \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs24 \cf4 \expnd0\expndtw0\kerning0
\strokec4 Convert2String\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It\'92s very handy to single-line print things--especially small transactions like these.  But UVM\'92s standard  
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_line_printer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  format is not terribly readable.  The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 convert2string()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function is defined by UVM as an empty function and is Cavium\'92s place to do this, and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 $psprintf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is the right tool for the job:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls20\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    ////////////////////////////////////////////   \
   // func: convert2string\
   // Single-line printing\
   virtual function string convert2string();\
      convert2string = $psprintf("%s A:%04X B:%04X", operation, alpha, beta);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : convert2string\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You can optionally make your function fancier by not printing out the A and B operands for operations that don\'92t use them, but this will suffice for now.  Now, your transaction will print out nice and neat and just the way you like it:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 %I-(   alu_drv.sv:   107) [alutb_env.alu_agent.drv  ] \{   890ns\} Monitored: DIV_A_B A:C6EB B:8A74\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Packing and Unpacking\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There are many routes that will get us to our end goal, but this is a great opportunity to learn about how to pack and unpack in UVM.  Later, the driver will be able to pack this transaction down to the bytes that it will put on the wire, and the monitor will be able to collect the bytes and unpack them.\
When you call the pack function on a transaction, it will automatically pack all of the fields that are marked by the flags in the macros as packable.  Because the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  fields will not always be used, though, we\'92ll need to 
\i \expnd0\expndtw0\kerning0
conditionally
\i0 \expnd0\expndtw0\kerning0
 pack them.  To add this functionality to a UVM object, you override the function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_pack
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls21\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    ////////////////////////////////////////////\
   // func: do_pack\
   virtual function void do_pack(uvm_packer packer);\
      super.do_pack(packer);\
\
      if(operation inside \{[ADD_A_B : INC_A], ACCUM\})\
         packer.pack_field_int(alpha, 16);\
      if(operation inside \{[ADD_A_B : DIV_B_A], INC_B\})\
         packer.pack_field_int(beta, 16);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : do_pack\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve chosen to use SystemVerilog\'92s handy 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 inside
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operator to conditionally pack these ints as 16-bit values.\
Like the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sprint
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pack
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 unpack 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 functions take an optional policy class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_packer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Here, we let the policy class do the work for us, in case the caller of pack or unpack chose to modify the default policy to handle things different.  \
The following example shows how the user can pack into a list of bytes in little-endian format instead of the default big-endian format:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 uvm_packer little_endian = new();\
byte unsigned stream[];\
\
little_endian.big_endian = 0;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa160\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 item.pack_bytes(stream, little_endian);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0\b\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Problem 3-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
With the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_pack
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  method as a boilerplate, write the corresponding 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_unpack
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  method.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The solution is fairly straightforward:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls22\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    ////////////////////////////////////////////\
   // func: do_unpack\
   virtual function void do_unpack(uvm_packer packer);\
      super.do_unpack(packer);\
\
      if(operation inside \{[ADD_A_B : INC_A], ACCUM\})\
         alpha = packer.unpack_field_int(16);\
      if(operation inside \{[ADD_A_B : DIV_B_A], INC_B\})\
         beta = packer.unpack_field_int(16);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : do_unpack\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 3-3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Let\'92s now fill in the test 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  such that during the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  it creates a stream of 50 random ALU transactions, prints them out, and packs them into a list of unsigned bytes.  Then, unpack this list of bytes into another transaction, and print it out.  Finally, compare the two transactions and print an error if they do not compare.\
Use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_info
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_err
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to print informational messages and error messages, respectively.  You can also use the function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn_pkg::print_ubyte_array()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to print out your byte array (or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 print_byte_array
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  if you used signed bytes), to aid in debugging your work.\
What happens?\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is one possible solution:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls23\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class basic_test_c extends base_test_c;\
   `uvm_component_utils(basic_test_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="test",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: run_phase\
   virtual task main_phase(uvm_phase phase);\
      byte unsigned stream[];\
      alu_pkg::item_c item;\
      alu_pkg::item_c unp_item = alu_pkg::item_c::type_id::create("unp_item");;\
      \
      phase.raise_objection(this);\
\
      repeat(50) begin\
         item = alu_pkg::item_c::type_id::create("item");\
         item.randomize();\
         `cn_info($psprintf("Created ALU transaction: %s", item.convert2string()))\
         item.pack_bytes(stream);\
         `cn_info($psprintf("Bytes: %s", cn_pkg::print_ubyte_array(stream)))\
         unp_item.unpack_bytes(stream);\
         `cn_info($psprintf("Unpacked: %s", unp_item.convert2string()))\
         if(item.compare(unp_item) == 0)\
            `cn_err($psprintf("Miscompare!"))\
      end\
      \
      phase.drop_objection(this);\
   endtask : main_phase\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : basic_test_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Your test will almost certainly fail for the increment operations.  But why?\
Well, we\'92re both randomizing and comparing the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  fields unconditionally, yet these fields will be neither packed nor unpacked, so will be different for the increment operations which do not use them all.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 3-4\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
This problem can be solved by overriding the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_compare()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  method, in the same manner as the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_pack()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_unpack()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  methods.  What else do you need to do?\
(
\i \expnd0\expndtw0\kerning0
See answer next page
\i0 \expnd0\expndtw0\kerning0
).\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
You\'92ll need to add the flag 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_NOCOMPARE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field macro calls.  If everything worked correctly, your test should PASS.  Notice that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_compare
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function must first 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 $cast
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  the object passed to it to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  type before you can look at its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  member fields.\
The complete class looks like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls24\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 // class: item_c\
// An ALU Transaction as a sequence item\
class item_c extends uvm_sequence_item;\
   //----------------------------------------------------------------------------------------\
   // Group: Types\
   typedef enum bit [7:0] \{\
                           ADD_A_B = 0,\
                           SUB_A_B = 1,\
                           SUB_B_A = 2,\
                           MUL_A_B = 3,\
                           DIV_A_B = 4,\
                           DIV_B_A = 5,\
                           INC_A   = 6,\
                           INC_B   = 7,\
                           CLR_RES = 8,\
                           ACCUM   = 9\
                           \} operation_e;\
   \
   `uvm_object_utils_begin(alu_pkg::item_c)\
      `uvm_field_enum(operation_e, operation, UVM_ALL_ON)\
      `uvm_field_int (alpha,                  UVM_ALL_ON | UVM_NOPACK | UVM_NOCOMPARE)\
      `uvm_field_int (beta,                   UVM_ALL_ON | UVM_NOPACK | UVM_NOCOMPARE)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: operation\
   rand operation_e operation;\
\
   // var: A variable\
   rand bit [15:0] alpha;\
\
   // var: B variable\
   rand bit [15:0] beta;\
\
   // ensure that all operands have legal values\
   constraint protocol_cnstr \{\
      (operation == DIV_A_B) -> beta != 0;\
      (operation == DIV_B_A) -> alpha != 0;\
      (operation == SUB_A_B) -> alpha > beta;\
      (operation == SUB_B_A) -> beta > alpha;\
   \}\
\
   // var: result\
   // This is the result of the operation, filled in by the driver and sent back with the response\
   result_t result;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="item");\
      super.new(name);\
   endfunction : new\
\
   //----------------------------------------------------------------------------------------\
   // func: convert2string\
   // Single-line printing\
   virtual function string convert2string();\
      convert2string = $psprintf("%s A:%04X B:%04X", operation, alpha, beta);\
   endfunction : convert2string\
\
   ////////////////////////////////////////////\
   // func: do_pack\
   virtual function void do_pack(uvm_packer packer);\
      super.do_pack(packer);\
\
      if(operation inside \{[ADD_A_B : INC_A], ACCUM\})\
         packer.pack_field_int(alpha, 16);\
      if(operation inside \{[ADD_A_B : DIV_B_A], INC_B\})\
         packer.pack_field_int(beta, 16);\
   endfunction : do_pack\
\
   ////////////////////////////////////////////\
   // func: do_unpack\
   virtual function void do_unpack(uvm_packer packer);\
      super.do_unpack(packer);\
\
      if(operation inside \{[ADD_A_B : INC_A], ACCUM\})\
         alpha = packer.unpack_field_int(16);\
      if(operation inside \{[ADD_A_B : DIV_B_A], INC_B\})\
         beta = packer.unpack_field_int(16);\
   endfunction : do_unpack\
\
   ////////////////////////////////////////////\
   // func: do_compare\
   virtual function bit do_compare(uvm_object rhs,\
                                   uvm_comparer comparer);\
      item_c _rhs;\
      $cast(_rhs, rhs);\
      do_compare = super.do_compare(rhs, comparer);\
      if(operation inside \{[ADD_A_B : INC_A], ACCUM\})\
         do_compare &= comparer.compare_field_int("alpha", alpha, _rhs.alpha, 16);\
      if(operation inside \{[ADD_A_B : DIV_B_A], INC_B\})\
         do_compare &= comparer.compare_field_int("beta", beta, _rhs.beta, 16);\
   endfunction : do_compare\
   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : item_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Printing, Comparing, Packing...Recording?\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You\'92ve already figured out how to customize a UVM object\'92s comparison mechanism by overriding the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_compare
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.  You\'92ll note that it, too, takes an optional policy class.  As you\'92ve seen, UVM uses these policy classes together with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_* 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 functions and the UVM field flags such as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_NOCOMPARE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to customize your classes to operate exactly the way you want them to.\
UVM also includes a recording mechanism, but what does it do?  The UVM reference says that it\'92s \'93vendor-specific.\'94  In fact, it can be used by the simulation tool, the waveform dumper, or any other third-party tool that might come along.  You could override it to write itself to a database for further analysis, for example.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Adding Coverpoints\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In a coverage driven verification environment, 
\i \expnd0\expndtw0\kerning0
now
\i0 \expnd0\expndtw0\kerning0
--when you\'92ve just created the transaction--is the time to create coverpoints.  Start collecting functional coverage early in the project, and collect it often.  Creating metrics to chart the progress of the verification environment as early as possible is very beneficial to long-term planning.  Plus, you may later be pleasantly surprised at what you\'92re already covering now that you won\'92t have to write a test for someday.\
Because this is a UVM tutorial, though, we will not be going over how to create covergroups and coverpoints.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this lesson, we created a transaction object that represents an ALU request, and we derived it from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , for reasons we\'92ll explore later.  We also briefly touched on how to customize the packing, printing, comparing, and recording of any UVM object.  The level of customization that UVM provides for this is deep, and you should refer to the UVM Reference Manual when you next want to pursue these topics.\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 4: Creating an Interface\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A few fun facts about interfaces that you may have missed during your SystemVerilog 101 training:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa40\pardirnatural\qj
\ls25\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Interfaces are 
\i \expnd0\expndtw0\kerning0
not
\i0 \expnd0\expndtw0\kerning0
 just a bundle of wires.  They are really more like classes or modules.  This is because they can contain their own tasks and functions, their own member fields, assertions, procedural blocks (initial and always statements), assignments, checkers, enumerated types...the list of things you can stuff into an interface is very long.  
\i \expnd0\expndtw0\kerning0
And
\i0 \expnd0\expndtw0\kerning0
 they can be passed between RTL modules as a synthesizable construct (that bundle of wires analogy).  Unlike classes, though, they are not dynamically created at runtime, but statically created as part of the RTL hierarchy just as modules, regs, and wires are.\
{\listtext	\'95	}Interfaces cannot be defined in a package.  As much as you\'92d like to define your ALU interface in your ALU package, the language won\'92t allow it.  Instead, the interface must be 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `included
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\i \expnd0\expndtw0\kerning0
known
\i0 \expnd0\expndtw0\kerning0
 to the compiler before it compiles any packages that depend on it because...\
{\listtext	\'95	}Testbench code (i.e. that which lives in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory) can access hard-coded paths such as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top.ncb_i.inb.src[7:0]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Packages--such as those which reside in vcomponent directories--cannot.  Doing so would break the reusability aspect of a vcomponent, because in the full-chip testbench, the path 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  does not exist.  Instead, 
\i \expnd0\expndtw0\kerning0
all
\i0 \expnd0\expndtw0\kerning0
 signals accessed by testbench code within a package must come via a 
\i \expnd0\expndtw0\kerning0
virtual
\i0 \expnd0\expndtw0\kerning0
 
\i \expnd0\expndtw0\kerning0
interface
\i0 \expnd0\expndtw0\kerning0
.\
{\listtext	\'95	}The UVM method of getting a class in a package to see a testbench interface is to put a reference to the interface in the UVM resource database.  This reference is placed in the RTL-side of the testbench and is then pulled out of the database by the UVM class\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phase.\
{\listtext	\'95	}An interface may have input (or output) signals, typically a clock and a reset signal.  These signals are not specific to the interface itself, because they may be shared with other devices (i.e. 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sclk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 srst_n
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).  If a signal is specific to the interface (i.e. 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pcie_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 srio_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , etc.) then it should be a member of that interface.  \
{\listtext	\'95	}Interfaces may contain other interfaces.  If a single interface has 4 separate \'91channels\'92, then it is often convenient to create a single channel interface, and repeat it 4 times in a container interface.  The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rsl_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  defined in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/rsl/rsl_intf.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is an example of such a hierarchy.\
{\listtext	\'95	}Clocking blocks offer you the ability in one place to specify the clock edge on which signals will be sampled or driven.  By using different clocking blocks for each component that will access a given signal, you can easily change these edges in one place.\
{\listtext	\'95	}Clocking blocks also solve race conditions between the RTL and the verification environment that were previously solved in SystemVerilog by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 program
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 /
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 endprogram
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  constructs.\
{\listtext	\'95	}Modports offer access protection against modules, drivers, and monitors from touching signals that they shouldn\'92t.  In a way, they act like protected access in C++. Given that an interface can have a task or function that accesses signals, it could be easy for a monitor that shouldn\'92t touch any signals to accidentally start affecting things.\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa160\pardirnatural\qj
\ls25\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}You don\'92t 
\i \expnd0\expndtw0\kerning0
need
\i0 \expnd0\expndtw0\kerning0
 to use clocking blocks and modports, as they add additional typing when accessing signals.  You\'92ll have to judge whether their benefits outweigh this additional overhead.  We\'92ll use both of them in our example just so you can see how they\'92re used.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 4-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Take a stab at creating an interface for the ALU signals.  Use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  template 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  The filename should be 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_intf.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and it should reside in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory.  The interface itself should be named 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Write a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reset()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function that sets the control and input data signals to zero.  A clock and an active-low reset signal should be inputs to the interface.\
You can use the files 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/rsl/rsl_intf.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/ncb/ncb_intf.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to help you.\
Extra credit: add assertions that ensure that there are no X\'92s when there shouldn\'92t be.  The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_err
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro cannot be used in an interface (it can only be used in verification environment code that derives from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_object 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 because these macros call the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_full_name 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 function).  You must use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 $cnErr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function instead.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa160\pardirnatural\qj
\expnd0\expndtw0\kerning0
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Admittedly this one was probably a lot to ask you for, and you don\'92t yet have a way to simulate it to see if you\'92re right.  But hopefully the effort was worthwhile:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls26\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_intf.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 // class: alu_intf\
interface alu_intf(input logic clk, \
                   input logic rst_n);\
\
   //----------------------------------------------------------------------------------------\
   // Group: Signals\
\
   // var: ctl\
   // Asserted only on the first cycle of a new transaction, while dat contains the operation\
   logic        ctl;\
\
   // var: dat\
   // The input data nibble that contains the operation and operands\
   logic [7:0]  dat;\
\
   // var: ready\
   // The output of the ALU that indicates when the result data is valid\
   logic        ready;\
\
   // var: result\
   // The 32-bit result data\
   logic [31:0] result;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Clocking blocks\
\
   // var: drv_cb\
   // A clocking block that represents how the environment's driver sees the interface\
   clocking drv_cb @(posedge clk);\
      output    ctl;\
      output    dat;\
      input     ready;\
      input     result;\
      input     rst_n;\
   endclocking : drv_cb\
\
   // var: mon_cb\
   // A clocking block that represents how the environment's monitor sees the interface\
   clocking mon_cb @(posedge clk);\
      input     ctl;\
      input     dat;\
      input     ready;\
      input     result;\
      input     rst_n;\
   endclocking : mon_cb\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Modports\
\
   modport drv_mp(clocking drv_cb,\
                  import reset);\
   modport mon_mp(clocking mon_cb);\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
\
   // func: reset\
   // Convenience function for the driver to reset its outputs\
   function void reset();\
      ctl = 0;\
      dat = 8'b0;\
   endfunction : reset\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Assertions\
\
   // Ensure that no signals are ever an X when they shouldn't be\
   always @(posedge clk) begin\
      if(rst_n) begin\
         assert(!$isunknown(ctl)) else $cnErr("Signal ctl is an X.");\
         assert(!$isunknown(dat)) else $cnErr("Signal dat is an X.");\
         assert(!$isunknown(ready)) else $cnErr("Signal ready is an X.");\
         if(ready) \
            assert(!$isunknown(result)) else $cnErr("Signal result is an X.");\
      end\
   end\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endinterface : alu_intf\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa40\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 The ALU Interface Explained\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa40\pardirnatural\qj
\ls27\ilvl0
\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 {\listtext	\'95	}Interface signals should be declared as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 logic
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , not 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 wire
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  The reason SystemVerilog needed to create the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 logic
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  type was for this very reason:  these signals could be driven either by a continuous assignment (like a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 wire
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) or with a procedural assignment (like a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), depending upon the implementation to which it is connected. Thus the need for this new data type.\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa180\pardirnatural\qj
\ls27\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}We created 2 different types of clocking blocks and 2 modports: one for a monitor that drives no signals, and one for an environment driver that drives the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 dat
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signals. Only the driver will be allowed to call the reset function to clear the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 dat
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signals.  If the RTL uses interfaces to wire itself up, more clocking blocks and modports might be added, too.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Connecting the Interface to the DUT\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now that you\'92ve defined the interface, you need to let the simulator see it.  This is accomplished by adding the file to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 vcomponents/alu/alu.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file.  It must be added before the ALU environment package, because the package depends on the interface, not the other way around:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls28\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu.flist\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 +incdir+../../verif/vcomponents/alu\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 ../../verif/vcomponents/alu/alu_intf.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 ../../verif/vcomponents/alu/alu_pkg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now, we will instantiate a single ALU interface in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  module after the NCB interface, and reset it at time zero so that we do not trip our assertions:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls29\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/alutb_tb_top.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // obj: alu_i\
   // The <alu_intf> instance\
   alu_intf alu_i(.clk(tb_clk), .rst_n(tb_rst_n));\
   initial\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       alu_i.reset();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You probably look at all the extra documentation comments as being unnecessary, and for such a simple testbench they probably are.  But when things get more complicated or are written by others, you will appreciate having pretty documentation to look at.  These comments help create that documentation.\
In this testbench, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  DUT is instantiated in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_wrapper
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  module.  Add this interface as an argument to that module as the other interfaces are:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls30\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/alu_wrapper.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 module alu_wrapper(input logic tb_clk,\
                   tb_rst_n,\
                   ncb_intf ncb_i,\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5                    
\f4\b \kerning1\expnd-2\expndtw-8
alu_intf alu_i
\f3\b0 \kerning1\expnd-2\expndtw-8
);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Strictly speaking, the wrapper module is not 
\i \expnd0\expndtw0\kerning0
necessary
\i0 \expnd0\expndtw0\kerning0
.  The purpose of this wrapper module is to consolidate the instantiation of the DUT and all of the wiring that is necessary such that the top-level testbench can be more easily read and understood.\
In the future, perhaps our RTL modules will just accept the SystemVerilog interfaces.  But this one doesn\'92t.  Instead, you need to wire up each signal to the interface directly.  Fortunately, emacs\'92 verilog-mode makes this easy with the AUTO_TEMPLATE.  You can wire up each signal one-by-one, or you can use the regular expression tricks that the NCB interface makes use of, like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls31\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/alu_wrapper.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5     .alu_\\(.*\\)         (alu_i.\\1[]),\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now, hitting 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 C-c C-a
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  wires everything up for you.  You will need to do the same in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  You are using emacs, aren\'92t you?\
Assuming you\'92ve done everything correctly, you may now run one of your tests as a sanity check.  Everything should still PASS because hooking the interface up to the DUT is (theoretically) innocuous.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Storing the Interface in the Database\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_run_test()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function must appear in all testbenches, because it will be called by the code that sits in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/hdl/tbv_common.v
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file to ensure that all interfaces are 
\i \expnd0\expndtw0\kerning0
set
\i0 \expnd0\expndtw0\kerning0
 in the resource database before any agents try to 
\i \expnd0\expndtw0\kerning0
get
\i0 \expnd0\expndtw0\kerning0
 them.  As you can see in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  testbench, several interfaces have already been set into the database.\
You\'92ll want to put an instance of the driver (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_mp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) and the monitor (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mon_mp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) modports into the resource database, so that the driver and monitor that will be written later can get them.  You will also want to virtualize these interfaces with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 virtual
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  keyword, because that is what the classes will use.\
The name for the interfaces here must match the name of the interfaces that the driver and monitor use to get them.  As you\'92ll see later, making that name a configuration field of those components will allow you to attach different instances of components to different interfaces, all on a configurable basis.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 4-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Put virtual driver and monitor modports into the resource database in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top.pre_run_test()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function, using the other examples as models.  Name the resource for both 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::alu_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and name the interfaces 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mon_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , respectively.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
This should do the trick:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 uvm_resource_db#(virtual alu_intf.drv_mp)::set(\'93alu_pkg::alu_intf\'94, "drv_vi", alu_i.drv_mp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 uvm_resource_db#(virtual alu_intf.mon_mp)::set(\'93alu_pkg::alu_intf\'94, "mon_vi", alu_i.mon_mp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 However, these handy macros simplify the process somewhat:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls32\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/alutb_tb_top.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `cn_set_intf(virtual alu_intf.drv_mp, "alu_pkg::alu_intf\'94, \'93drv_vi", alu_i.drv_mp)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `cn_set_intf(virtual alu_intf.mon_mp, \'93alu_pkg::alu_intf\'94, \'93mon_vi\'94, alu_i.mon_mp)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In SystemVerilog, testbench-related code is capable of reaching down into the hierarchy and peeking and poking at signals.  All reusable components, though, are kept in packages that have no notion of the hierarchy.  The bundle of signals that they can see and affect must be kept in an interface.  As we\'92ll see later, components in the environment can easily attach to a named interface via the resource database settings we just completed.\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 5: Creating an Agent\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this lesson, we\'92re going to create the ALU agent, driver, monitor, and sequencer.  We will learn about the purpose of each of these types of components, and we will discuss in detail how all that configuration 
\i \expnd0\expndtw0\kerning0
magic
\i0 \expnd0\expndtw0\kerning0
 actually works.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Creating Multiple Files\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Again, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  makes it a snap to create all of these files at one time:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/vcomponents/alu>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg agent drv mon sqr -n alu -f -q\
++ Creating alu_agent.sv\
++ Creating alu_drv.sv\
++ Creating alu_mon.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 ++ Creating alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You\'92ll want to add these files as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `includes
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to the package.  The order in which these files are included is inconsequential.  In fact, you can do it in alphabetical order or in chronological order.  What matters most is that each file\'92s dependencies are 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `included
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that you use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `include
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  guards, and that you manage any cyclical dependencies (which we\'92ll see later).  If you follow these rules of order, you should never have any build ordering issues.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Objects vs. Components\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Let\'92s review a few terms and what the purpose of each of these things is before going forward:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Objects\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 Everything is a 
\f3\fs22 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 uvm_object
\f0\fs24 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 , because it is the root class of all other UVM-based classes.  But when we specifically refer to something as an object, we usually mean it is something that is not also a component.  It is dynamic in nature, being created and destroyed on-the-fly (like a transaction or a packet).\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Component\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 A component derives from 
\f3\fs22 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 uvm_object
\f0\fs24 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 , but is quasi-static in nature.  While the simulator considers them to be dynamically created (as opposed to, say, modules, wires, and registers), they are created by UVM at time zero and live throughout the lifetime of the simulation.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Phases\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 Components have phases.  First, they run their 
\f3\fs22 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 new()
\f0\fs24 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7  function as soon as they are created, as all classes do.  Later, they run the 
\f3\fs22 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 build_phase
\f0\fs24 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 , the 
\f3\fs22 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 connect_phase
\f0\fs24 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 , the 
\f3\fs22 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 end_of_elaboration_phase
\f0\fs24 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 , and the 
\f3\fs22 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 start_of_simulation_phase
\f0\fs24 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 .  All of these phases happen in zero time at time zero.  Then, the 
\f3\fs22 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 run_phase
\f0\fs24 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7  happens, which has numerous task-based sub-phases, which consume time.  See more about phases in Appendix A.\
Objects that are 
\i \expnd0\expndtw0\kerning0
not
\i0 \expnd0\expndtw0\kerning0
 components do 
\i \expnd0\expndtw0\kerning0
not
\i0 \expnd0\expndtw0\kerning0
 have phases.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Driver\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 The driver is a component that receives transactions from the sequencer and wiggles the wires of an interface to stimulate the DUT, following the protocol of the interface it attaches to.  It also re-routes responses to transactions back to the sequencer.  Ideally, it\'92s purpose should be kept to that, and to that only.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Monitor\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 The monitor is a component that watches the interface it is attached to and reports what happens, checking the interface for protocol violations.  It collects activity on the interface in the form of transactions and pushes them out an analysis port.  It is agnostic in nature, in that it monitors both the driver and the DUT looking for errors and reporting activity.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Sequencer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 A sequencer is a component that arbitrates among multiple streams of stimulus (sequences), sends sequence items to a driver one at a time, and re-routes responses back to the original sequence.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Agent\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 An agent is merely a container class that holds the sequencer, driver, and monitor.  It\'92s primary purpose is to provide a single configurable, re-usable component that you can plop down into your testbench, without having to deal with multiple components.  It may hold other components as well, but serves no other specific purpose.  It usually features TLM ports and imps (see Lesson 6) that send and receive transactions to other agents or components.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 With those definitions in mind, let\'92s take a look at what 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  created for us.  The file 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/alu/alu_agent.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is already chock full of most of the stuff we need.  It has one configuration field, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 is_active
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which instantiates the driver and sequencer when set to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_ACTIVE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Otherwise, the agent is 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_PASSIVE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , in which case only the monitor is operating.  This is typical for block-level agents that monitor interfaces in the full-chip testbench, but never actually drive stimulus.  The build phase is where this all happens:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
      mon = mon_c::type_id::create("mon", this);\
      if(is_active) begin\
         drv = drv_c::type_id::create("drv", this);\
         sqr = sqr_c::type_id::create("sqr", this);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A monitor might perform all of the checking for the agent on-the-fly.  But agents 
\i \expnd0\expndtw0\kerning0
sometimes
\i0 \expnd0\expndtw0\kerning0
 do not contain scoreboards or more complex predictors, because they might inhibit their reusability.  A block-level agent might be reusable from one chip design to the next, but the prediction algorithm might change.  Instead, agents might push monitored traffic out of TLM ports and on to other listeners, be they scoreboards, functional coverage collectors, or other agents.  We\'92ll discuss prediction more in Lesson 9.\
Sequencers communicate stimulus sequence items and responses to the driver via the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 seq_item_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the driver and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 seq_item_export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the sequencer.  
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  has already made this connection for you:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void connect_phase(uvm_phase phase);\
      super.connect_phase(phase);\
      if(is_active)\
         drv.seq_item_port.connect(sqr.seq_item_export);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : connect_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ll talk about these ports and exports in the next lesson, but you should be aware that the ports, the driver, and the sequencer, are all parameterized classes.  They need to know what kinds of stimulus item (called the request) that the sequencer will be sending to the driver, and what kind of response item the driver will send back to the sequencer.  Sometimes, a driver won\'92t have a data item to send back, if for example the interface has one-way communication.  In such a case, the driver will often just send back the request itself once it has completed sending it.  Other times, the response will be embedded into the transaction.  You\'92ll recall that we added the result field to our transaction for just such a purpose.\
So, the driver and sequencer need to be parameterized with our transaction item (the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  you created in the last lesson), and a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result_t
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  type that represents the result.  Since we ran 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  above with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 -q
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  did not prompt us for the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reqType
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rspType
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  interactively, so we\'92ll have to fill those in ourselves.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 5-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Modify the driver and sequencer declarations to have the correct request and response pair.  After doing so, you should be able to compile successfully.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The request and response types are the same thing for both the driver and sequencer: 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  The base class 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_driver
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  sets the default response type to be the same as the request type (like a default argument):\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class uvm_driver #(\uc0\u8232    type REQ = uvm_sequence_item, \
   type RSP = REQ\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 ) extends uvm_component;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 So, you only need to provide the request type and the response type is automatically filled in:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls33\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class drv_c extends uvm_driver#(item_c);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls34\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class sqr_c extends uvm_sequencer#(item_c);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You also may have run into the fact that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  needs to be 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `included
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in both the sequencer and driver files.  This is because they now reference 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is now a dependency.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 5-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Instantiate the ALU agent in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg::env_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Compile and simulate to ensure you did it correctly.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Instantiating the ALU agent in the ALUTB environment first requires that you added the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file before the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file in your Makefile, because of the ALUTB\'92s dependency on the ALU package. \
Then, instantiate an ALU agent:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls35\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alutb/alutb_env.sv
\f3\b0\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\up0 \strokec5    // var: alu_agent\
   // The ALU agent\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    alu_pkg::agent_c alu_agent;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Then, add the following to its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls36\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alutb/alutb_env.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       // create the ALU agent\
      set_config_int("alu_agent", "is_active", is_active);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       alu_agent = alu_pkg::agent_c::type_id::create("alu_agent", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We have configured the ALU\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 is_active
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to match the one in the ALUTB environment.  It\'92s now time to learn about how configurations from the resource database trickle down to children components.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 All About Configurations\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In the following example, it\'92s important to distinguish between the parent-child relationship of objects within the component hierarchy (i.e., an agent is the parent of a driver) versus the parent-child relationship of class inheritance (i.e., 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  derives from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).  To help make this clear, we\'92ll refer to 
\i \expnd0\expndtw0\kerning0
descendants 
\i0 \expnd0\expndtw0\kerning0
and 
\i \expnd0\expndtw0\kerning0
ancestors
\i0 \expnd0\expndtw0\kerning0
 to discuss class inheritance, versus 
\i \expnd0\expndtw0\kerning0
parents
\i0 \expnd0\expndtw0\kerning0
 and 
\i \expnd0\expndtw0\kerning0
children
\i0 \expnd0\expndtw0\kerning0
 when discussing component hierarchy.\
When a UVM component calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , it calls its ancestor\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.  And that ancestor calls its ancestor\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function, and so on, until the ancestor is the base class 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_component
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  There, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function looks in the resource database for all of the fields defined by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros.  It uses the component\'92s full-name in the hierarchy and the field\'92s name and type to match against items in the database.  The field will be eventually set to the matching entry that was placed by the 
\i \expnd0\expndtw0\kerning0
highest
\i0 \expnd0\expndtw0\kerning0
 in the component hierarchy.\
The following example hierarchy shows the order in which the functions are executed.  At Step 1, only the test instance has been created and newed, and all other components do not exist yet.\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls37\ilvl0{\listtext	1.	}
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 3__#$!@%!#__pastedGraphic.pdf \width5940 \height4700
}}
\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0  When UVM enters the build phase, the test\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function runs and it calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	2.	}The test then puts a value in a resource table that lives in the test that will later match against the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 field
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the driver, and gives it a value of 7.\
{\listtext	3.	}The test then creates the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance, which gets newed.  All of its fields are set to default values and its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function runs.  Its parent is a reference to the test.  By creating the env component, UVM adds this instance to a list of components that still need to run their 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	4.	}Later, UVM runs the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 env\'92s
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function and it also calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	5.	}The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  creates the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance. \
{\listtext	6.	}Later still, the agent\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function runs and it, too, calls
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	7.	}The agent puts a value of 6 in its resource table that will match the driver\'92s field.\
{\listtext	8.	}The driver is created.\
{\listtext	9.	}Upon creation, the field is given the default value of 5, and the driver\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function is then run.\
{\listtext	10.	}Finally, the driver\'92s build phase runs and it, too, calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Again, this is the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_component::build_phase() 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 function, and this is where all the work happens.  It calls the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 apply_config_settings()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function, which is instructed by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field_int(field, UVM_ALL_ON)
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro to traverse upwards to find matching settings.  The first one it finds will be the value of 6 supplied by its own parent, the agent.  It then checks the agent\'92s parent, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , to see if it has a matching entry.  It doesn\'92t, so it keeps going up to the test component, where it finds yet another matching entry which changes the value of the field to 7.  Because the test has no parents, that will be the field\'92s final value.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
In addition to what was shown in this example is the power of using glob-style 
\f1\b \cf6 \expnd0\expndtw0\kerning0
\up0 \strokec6 or regular expressions (sure about this?) 
\f0\b0 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 for either the hierarchy or the field name.  Instead of specifying that the driver\'92s field gets a value of 7, the test could have specified that 
\i \expnd0\expndtw0\kerning0
any
\i0 \expnd0\expndtw0\kerning0
 components within the agent (including the monitor and sequencer) which also have a field named \'91
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 field
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 \'92 will also get the value of 7.\
This is accomplished instead with this call:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 set_config_int(\'93env.agent.*\'94, \'93field\'94, 7);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Or, it could say that any integers in the env with a field name starting with \'93fi\'94 will get a value of 7:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 set_config_int(\'93env.*\'94, \'93fi*\'94, 7);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 As you\'92ll see in Lesson 10, this is how the base test distributes the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instances to 
\i \expnd0\expndtw0\kerning0
all
\i0 \expnd0\expndtw0\kerning0
 components within the hierarchy that asks for them:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       // push the register block and the configurations to all blocks that ask for it\
      set_config_object("*", "reg_block", reg_block, .clone(0));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       set_config_object("*", "cfg",       cfg,       .clone(0));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Care must be exercised, though, if you start instantiating other people\'92s components and they also happen to use field names that have names like 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but do not correspond to your testbench\'92s notion of what these objects represent.  UVM offers some protection against this by also matching on a field\'92s type, but accidents are still possible.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 All About The Class Factory\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In Lesson 2, you used the class factory to replace the standard clock driver instance with one of your own.  The process is similar to the configuration example above.  To replace components, you call one of the four available functions (shown below) to submit a class override to the factory, and later when any sub-component tries to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 create()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  a class of the base type, the factory searches its database and replaces it with the descendant class you specified.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth3415\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth5674\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Component Factory Functions
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Purpose
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3415\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5674\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 set_type_override_by_type
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Replace all classes of the base type with the descendant type.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3415\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5674\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 set_inst_override_by_type
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Replace only classes whose name matches a wildcard pattern.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3415\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5674\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 set_type_override
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same function as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_type_override_by_type
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but use strings for the class names.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3415\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5674\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 set_inst_override
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same function as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_inst_override_by_type
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but use strings for the class names
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
To replace components, you would call these functions during the build phase of a parent component requesting the override.  One important difference between the configuration example, however, is that you may need to call the override function 
\i \expnd0\expndtw0\kerning0
before
\i0 \expnd0\expndtw0\kerning0
 calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  \
For example, if you wanted to override the default clock driver from your base test, it stands to reason that you must request the override before creating the clock driver:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 set_type_override_by_type(cn_pkg::clk_drv_c::get_type(), clk_duty_cycle_c::get_type(), .replace(1));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 tb_clk_drv = cn_pkg::clk_drv_c::type_id::create("tb_clk_drv", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 However, if you want to cause the override in a sub-class of base-test, such as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 duty_cycle_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , you must perform the override before 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , as we did in Lesson 2.  This is because calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test_c::build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which will create the clock driver.  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 set_type_override_by_type(cn_pkg::clk_drv_c::get_type(), clk_duty_cycle_c::get_type(), .replace(1));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 super.build_phase(phase);  // <-- calls base_test_c::build_phase and creates the clock driver.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you called it after 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , the clock driver would have already been created and your factory override request would be too late.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Factory Overrides on Non-Components\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Class factory overrides are not limited to just components, though.  They do not rely on phases to work properly.  You can create your class overrides on transactions, sequences, or any other UVM object.  You can even do them after time zero.  For example, you could enable sending corrupted CSR transactions after the configuration phase.\
So long as the factory override request is made before the create call, the override will hold.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 How To See Everything\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 At some point in your UVM career, you might want to do something with every single component.  Or, you might want to print out all of the drivers named \'93Fred\'94.  Whatever your strange inclinations, UVM offers a way to see everything in the component hierarchy.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is the globally visible instance of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_root
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  No, UVM does not adhere to our clever 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  naming conventions (let them wallow in their ignorance!).  But, because 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is globally visible, you can refer to it from anywhere in the codebase.  This is awfully nice, because it offers some nifty functions for perusing the hierarchy:\
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 find
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  method will return a handle to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_component
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  with the matching hierarchical name:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 function uvm_component find(string comp_match);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 find_all
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  method populates a list of components that match your query, and allows for 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 .
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ?
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  wildcards.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 function void find_all(string comp_match, \
                       ref uvm_component comps[$],\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5                        input uvm_component comp = null);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Finally, the function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 print_topology
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  can be used to print out the entire hierarchy to the logfile, starting from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  This is a handy thing to do at the start of simulation, after everything has been created.  Because it\'92s such a good idea, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 global_env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will do it for you, so long as your debug level is non-zero.  You can use the cnmake command-line option 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 TOPO
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to specify the depth of the tree to print, with the default being 4.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 % cnmake sim SIMU=VCS DBG=10 TOPO=8\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This is essentially the same as printing out all of the configuration classes in TestBuilder, except that you don\'92t have to write any 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cnPrint
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  functions.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this lesson, we learned all about components, their quasi-static nature, the component hierarchy, and how configurations trickle down from the top of the hierarchy.  We also learned what goes into an agent and the purpose of all the different types of components.  Finally, we discussed the class factory in more detail and a means to access or print all components.\
Next, it\'92s time to learn how components 
\i \expnd0\expndtw0\kerning0
talk
\i0 \expnd0\expndtw0\kerning0
 to one another, using Transaction Level Modeling.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 6: TLM Ports, Imps, and Exports\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 TLM 1.0 is the UVM equivalent of registered interfaces that were used in TestBuilder.  Compared to registered interfaces, it\'92s a more formalized method of passing pointers to classes to call their functions.  TLM ports simulate having hierarchical connections between components.\
Some of TLM\'92s important features are:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl264\slmult1\sa240\pardirnatural\qj
\ls38\ilvl0{\listtext	\'95	}A TLM port is always the 
\i \expnd0\expndtw0\kerning0
initiator
\i0 \expnd0\expndtw0\kerning0
 of the function call.\
{\listtext	\'95	}A TLM imp (implementation) is always the 
\i \expnd0\expndtw0\kerning0
target
\i0 \expnd0\expndtw0\kerning0
 of the function call.\
{\listtext	\'95	}A TLM export provides pass-through functionality, to traverse different levels of hierarchy.\
{\listtext	\'95	}TLM provides one-to-one, many-to-one, or one-to-many calls.\
{\listtext	\'95	}TLM initiators can perform a get or a put.  \
{\listtext	\'95	}Calls can be blocking (time-consuming tasks) or non-blocking (zero-time functions).\
{\listtext	\'95	}Analysis ports provide a one-to-many functionality.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 TLM Ports\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A TLM port is instantiated as a parameterized class.  Like all classes, they must be new\'92ed.  It\'92s unlikely that we\'92ll ever override these classes with the factory, but if you prefer the safety of calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ::create
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that\'92s ok, too.  Then, to put a transaction into the port, you call the port\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class producer_c extends uvm_component;\
   `uvm_component_utils(producer_c)\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    uvm_blocking_put_port #(item_c) put_port;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
   function new(string name, uvm_component parent);\
      super.new(name, this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       put_port = new(\'93put_port\'94, this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : new\
\
   task run();\
      item_c my_item;\
      forever begin\
         (#50ns) my_item = new(\'93my_item\'94);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          put_port.put(my_item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       end\
   endtask : run\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : producer_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM uses squares in component diagrams to represent ports:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 4__#$!@%!#__pastedGraphic.pdf \width3720 \height2120
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 TLM Implementations (Imps)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is the target of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  You must instantiate the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  just as you did the port, 
\i \expnd0\expndtw0\kerning0
and
\i0\b \expnd0\expndtw0\kerning0
 
\b0 \expnd0\expndtw0\kerning0
you must write the implementation function:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class consumer_c extends ovm_component;\
   `uvm_component_utils(consumer_c)\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5     uvm_blocking_put_imp #(item_c, consumer_c) put_imp;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
    function new(string name, uvm_component parent);\
       super.new(name, this);\
       put_imp = new(\'93put_imp\'94, this);\
    endfunction : new\
\
    task put(item_c _item);\
       // do something with _item\
    endtask : put\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : consumer_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The imp class is parameterized not only with the item type, but also with the class\'92s type, so that the imp knows which class contains the target implementation function.\
Imps are represented with circles:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 5__#$!@%!#__pastedGraphic.pdf \width5780 \height1920
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec2 Connecting\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Ports are connected to imps at a higher level of the hierarchy during the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 connect_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  The reason this happens during the connect phase instead of during the build phase is because the two components you\'92re trying to connect may not have yet run their build phases.  And if that\'92s the case, then they may not have created their ports or imps yet.  \
This is the whole reason for having these separate phases at time zero:  all components in the system are 
\i \expnd0\expndtw0\kerning0
guaranteed
\i0 \expnd0\expndtw0\kerning0
 to have run all prior phases.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class env_c extends uvm_env;\
   `uvm_component_utils(env_c)\
   producer_c producer;\
   consumer_c consumer;\
  \
   virtual function void build();\
      super.build();\
      producer = producer_c::type_id::create(\'93producer\'94, this);\
      consumer = producer_c::type_id::create(\'93consumer\'94, this);\
   endfunction : build\
\
   virtual function void connect();\
      super.connect();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       producer.put_port.connect(consumer.put_imp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : connect\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : env_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Connect calls are always called on the initiator\'92s port, with the receiving imp, port, or export as the argument.  This completes the diagram and allows the producer to call another class\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function with a single argument, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 6__#$!@%!#__pastedGraphic.pdf \width6820 \height2220
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec2 TLM Exports\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 TLM Exports promote an implementation to a higher level in the hierarchy.  From another  component\'92s point of view, they look exactly like an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but the real imp is buried someplace within the hierarchy.  With exports, the external component need not know anything about the lower-level hierarchy.\
In the example diagram below, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 comp2
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 subcomp2
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  both have exports that promote the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  which is buried within 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 leaf2
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  which makes the connection between 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 comp1
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 comp2
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  need not know the inner workings of either component.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 TLM Summary\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 To summarize:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa40\pardirnatural\qj
\ls39\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}TLM has unidirectional interfaces of many forms.  \
{\listtext	\'95	}Blocking ports allow time-consuming tasks to be called.  \
{\listtext	\'95	}Non-blocking ports make zero-time function calls.\
{\listtext	\'95	}The flow of information may be 
\i \expnd0\expndtw0\kerning0
from
\i0 \expnd0\expndtw0\kerning0
 the port (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), or 
\i \expnd0\expndtw0\kerning0
to
\i0 \expnd0\expndtw0\kerning0
 the port (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).  \
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa180\pardirnatural\qj
\ls39\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is 
\i \expnd0\expndtw0\kerning0
always
\i0 \expnd0\expndtw0\kerning0
 the initiator, and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is 
\i \expnd0\expndtw0\kerning0
always
\i0 \expnd0\expndtw0\kerning0
 the target.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 7__#$!@%!#__pastedGraphic.pdf \width9320 \height5260
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec2 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural
\cf2 \expnd0\expndtw0\kerning0
\strokec2 Imp Declarations\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You may have noticed something flawed about the consumer class example above.  The presence of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_blocking_put_imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  requires that a task called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , accepting an argument of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , be present within the class.  Astute observers would note that this precludes the class from having any other put imps.  Surely UVM doesn\'92t think we could live on one imp alone!\
Fortunately, they don\'92t.  And there is a way around this.  As usual, UVM chooses macros to solve the problem:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `uvm_put_imp_decl(_monitored)\
`uvm_put_imp_decl(_driven)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
class consumer_c extends uvm_component; \
   
\f4\b \kerning1\expnd-2\expndtw-8
uvm_put_imp_monitored
\f3\b0 \kerning1\expnd-2\expndtw-8
#(item_c) monitored_imp;\uc0\u8232    
\f4\b \kerning1\expnd-2\expndtw-8
uvm_put_imp_driven
\f3\b0 \kerning1\expnd-2\expndtw-8
#(item_c) driven_imp;\uc0\u8232 \
   function void 
\f4\b \kerning1\expnd-2\expndtw-8
put_monitored
\f3\b0 \kerning1\expnd-2\expndtw-8
 (item_c t); \
      // receives puts coming into monitored_imp\
   endfunction\
\uc0\u8232    function void 
\f4\b \kerning1\expnd-2\expndtw-8
put_driven
\f3\b0 \kerning1\expnd-2\expndtw-8
(item_c t);\
      // receives puts coming into driven_imp\
   endfunction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : consumer_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  `uvm_put_imp_decl(_something)
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro creates a new class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_put_imp_something
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that allows you to create a function called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put_something()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  This gives you the freedom to create all the imps you need.  Preceding the argument with an underscore (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) allows you to avoid having to create the poorly-named function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 putsomething()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . \
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_*_imp_decl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros actually do create a new class for you. You\'92re probably tempted to use the macro just above your class definition, as in this example.  However, there may be more than one class in your package that needs to implement a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  for your given transaction.  Using the macro twice, though, just won\'92t do, because the compiler gets understandably cranky when a class is defined more than once.  Coming up with a new name each time may not be suitable, either.  \
Rather than use the macros in only one class file and depend on the build order working out for you, it is advisable to instead place these declarations in the package file.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Compared to TestBuilder\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Compared to registered interfaces in C++/TestBuilder, TLM seems to fall short somewhat.  Recall that a registered interface permitted a pointer to a pure virtual interface class to be placed in another class.  This permitted the other class to call 
\i \expnd0\expndtw0\kerning0
any
\i0 \expnd0\expndtw0\kerning0
 functions that were part of the pure virtual interface class.  These functions could have as many parameters as you wished.\
On the other hand, multiple inheritance made it fairly straightforward to abuse the registered interface system and put too much functionality into the interface, such that the lines between the two classes could blur and create spaghetti code.  TLM, while less convenient, may result in a cleaner separation of architectures.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Many-to-One and One-to-Many\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Ports and imps implicitly support many-to-one.  That\'92s because multiple ports can be connected to a single imp.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 8__#$!@%!#__pastedGraphic.pdf \width3560 \height2600
}}
\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
When you hear 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 analysis_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , think
\i \expnd0\expndtw0\kerning0
 broadcast
\i0 \expnd0\expndtw0\kerning0
.  Analysis ports permit one-to-many communication and in diagrams are represented with a diamond.  These are often the ports and imps of choice for broadcasting information to an indeterminate number of listeners.\
We haven\'92t even set up our monitor yet, but we will want for it to broadcast all monitored transactions and result values that it sees to the rest of the world.  So, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mon_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class will need an analysis port, and the agent should also get one, too.  This allows listeners to connect directly to the agent\'92s analysis port without having to dig into the implementation to find out what component broadcasts stuff and what they\'92re called.  Providing a clean and consistent API from the agent helps to promote reuse.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 6-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Create separate 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 analysis_ports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the monitor and the agent to broadcast transactions and results to the rest of the world.  Connect them together.  You don\'92t have any code to test them yet, but make sure you can compile it.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
In the monitor, first declare the ports:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls40\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_mon.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // var: monitored_item_port\
   // All monitored transactions go out here\
   uvm_analysis_port #(item_c) monitored_item_port;\
\
   // var: monitored_result_port\
   // All monitored results go out here\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    uvm_analysis_port #(result_t) monitored_result_port;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Bonus points if you placed these in the TLM Ports group and used a name that ended in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , to comply with the coding standards.\
Then, in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls41\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_mon.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       monitored_item_port = new("monitored_item_port", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       monitored_result_port = new("monitored_result_port", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You can put the exact same lines in the agent, if you desire.  You also would need to remember to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `include
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file as it is now a dependency of these two files (just like with the driver and sequencer earlier).\
Finally, in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 connect_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the agent, you make the connection unconditionally (not dependent on 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 is_active
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), because the monitor will be present in all types of testbenches:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls42\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       // connect to the monitor's analysis ports\
      mon.monitored_item_port.connect(monitored_item_port);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       mon.monitored_result_port.connect(monitored_result_port);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Broadcasting to a Listener\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now let\'92s write something out of the analysis port and create something to listen for it.  Take your test code from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alu/tests/basic.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and move it to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the ALU monitor.  After creating a transaction, call the port\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function with the transaction as the argument.  This will send it out the analysis port.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls43\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_mon.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task main_phase(uvm_phase phase);\
      byte unsigned stream[];\
      alu_pkg::item_c item;\
      alu_pkg::item_c unp_item;\
      \
      phase.raise_objection(this);\
\
      repeat(50) begin\
         item = alu_pkg::item_c::type_id::create("item");\
         item.randomize();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          monitored_item_port.write(item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          `cn_info($psprintf("Created ALU transaction: %s", item.convert2string()))\
         item.pack_bytes(stream);\
         `cn_info($psprintf("Bytes: %s", cn_pkg::print_ubyte_array(stream)))\
         unp_item = alu_pkg::item_c::type_id::create("unp_item");;         \
         unp_item.unpack_bytes(stream);\
         `cn_info($psprintf("Unpacked: %s", unp_item.convert2string()))\
         if(item.compare(unp_item) == 0)\
            `cn_err($psprintf("Miscompare!"))\
      end\
      \
      phase.drop_objection(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : main_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In the ALUTB environment, where the ALU agent is instantiated, create a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_subscriber
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , naming it 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item_subscriber
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  A subscriber is a specialized UVM parameterizable component that comes pre-packaged with an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 analysis_imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that can accept whatever object it is parameterized for.  All you need to do is fill in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.\
Here is how you create the subscriber component with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls44\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/vcomponents/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg subscriber -n alu_item_subscriber -f\
++ Creating alutb_alu_item_subscriber.sv\

\f4\b \kerning1\expnd-2\expndtw-8
alu_item_subscriber subscriber: Enter substitution for <description>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 
\f5\i \kerning1\expnd-2\expndtw-8
Listens for all monitored ALU transactions.
\f3\i0 \kerning1\expnd-2\expndtw-8
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 alu_item_subscriber subscriber: Enter substitution for <subscription_type>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 
\f5\i \kerning1\expnd-2\expndtw-8
alu_pkg::item_c
\f4\i0\b \kerning1\expnd-2\expndtw-8
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Take special note that we used the scope operator to specify that the transaction is coming from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , because this component will be a member of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 6-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Modify the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item_subscriber
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to print out the transactions that are written to it.  Then, instantiate the component in the ALUTB environment and connect it to the ALU agent\'92s transaction analysis port.  Simulate and see that your subscriber is seeing all of the transactions.  The subscriber uses an export called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 analysis_export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that you will connect to.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Monitors don\'92t often generate transactions, but this is just a temporary self-test.  After removing some boilerplate code, the whole 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item_subscriber_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class would look like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls45\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_item_subscriber.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 // class: alu_item_subscriber_c\
// Print out all ALU transactions.\
class alu_item_subscriber_c extends uvm_subscriber#(alu_pkg::item_c);\
   `uvm_component_utils(alutb_pkg::alu_item_subscriber_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="alu_item_subscriber",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
    ////////////////////////////////////////////\
   // func: write\
   // Receives the alu_pkg::item_c\
   virtual function void write(alu_pkg::item_c t);\
      `cn_info($psprintf("Received this ALU transaction: %s", t.convert2string()))\
   endfunction : write\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : alu_item_subscriber_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And the ALUTB environment would need to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `include
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_alu_item_subscriber.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file, instantiate and create the class as before, and then connect it during the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 connect_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls46\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_env.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       alu_agent.monitored_item_port.connect(alu_item_subscriber.analysis_export);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If everything was done correctly, you should see your subscriber happily printing all the transactions it sees.\
Leave it in there for now, but 
\b \expnd0\expndtw0\kerning0
remove the generated transactions from the monitor
\b0 \expnd0\expndtw0\kerning0
, since up next we\'92re going to write the real stimulus sequences.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this lesson we learned all about how different UVM components 
\i \expnd0\expndtw0\kerning0
talk 
\i0 \expnd0\expndtw0\kerning0
to one another with ports, imps, and exports.  We learned how to instantiate these TLM objects and how to connect them up.  We also created a subscriber that can act as a benign listener.  \
There are two other interesting aspects of TLM that were not covered here:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl264\slmult1\sa240\pardirnatural\qj
\ls47\ilvl0{\listtext	\'95	}TLM can be used to bridge across different languages.  Thus, an analysis port can send out all monitored transactions to a UVM subscriber, to a TestBuilder TVM, or to a SystemC implementation...all without having to change the UVM source code.\
{\listtext	\'95	}TLM2 is new to UVM, but not new to the rest of the world.  TLM2 offers ports that are bidirectional--called sockets.  It also provides a way to generically model memory transactions using the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_tlm_generic_payload
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class.  While the rest of UVM does not use TLM2 (yet!), later revisions of UVM will likely be driving towards it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 7: Beginning Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sequences are intended to drive the stimulus items to the driver.  They are dynamic objects that are created and destroyed (as opposed to components, which are quasi-static).  They can act as generators to create new stimulus items.  They can create other sequences and form a protocol stack.  They can last only a short amount of time to perform a few operations.  Or, they can be procedural blocks like an interrupt handler that last the whole life of the simulation.\
The number and variety of use cases for sequences is fairly large, and their complexity may at first seem daunting to new users.  This lesson is only the first lesson on sequences, to keep the topic more digestible.  In Lessons 12 and 14, you will learn more details about sequences and sequencers.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 A Simple Generator\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Let\'92s create a simple sequence to generate some random transactions.  Be sure to first remove the generator code we placed in the monitor\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  \
Most sequences are short pieces of code.  And as we\'92ll see later you can create a special exerciser sequence that mixes and matches all (or some) of the sequences you write.  For this purpose, it is often handy to put all of these sequences in one file called a sequence library file.  Other sequences that you write may be larger and more specialized and may live in their own file.\
Create a sequence library with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Sequences expect to eventually propagate sequence items (like our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class) as requests to a driver, and to optionally receive sequence items as responses.  Since we unified our result data into the transaction class, it\'92s ok if they\'92re one and the same:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/vcomponents/alu>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg seq_lib -n alu -f\
++ Creating alu_seq_lib.sv\
alu seq_lib: Enter substitution for <description>: \
alu seq_lib: Enter substitution for <reqType>: item_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 alu seq_lib: Enter substitution for <rspType>: item_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Your sequence library now contains 2 pre-made classes for you.  The first is a generic sequence called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and the second is a sequence \'93library\'94 sequence called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lib_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  This special library sequence is an exerciser that randomly picks a sequence that is registered to it and drives it.  We won\'92t need that for now, so comment it out.\
A sequence is a class with a special time-consuming task called a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Technically, it has a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_body()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task as well as a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 post_body()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task, but right now we\'92ll just use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task to drive in a transaction:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls48\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      item_c item = item_c::type_id::create("item");\
      start_item(item);\
      item.randomize();\
      finish_item(item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Step-by-step, this is what this task does:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl264\slmult1\sa240\pardirnatural\qj
\ls49\ilvl0{\listtext	\'95	}Create a new transaction.\
{\listtext	\'95	}Call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  This does a few things, but primarily waits until the sequencer is ready to send it.\
{\listtext	\'95	}Now, randomize it.  By randomizing after we\'92ve waited for the sequencer to accept it, we\'92ve achieved 
\i \expnd0\expndtw0\kerning0
late binding
\i0 \expnd0\expndtw0\kerning0
.  This allows us to add additional constraints, for example, based on the current conditions.\
{\listtext	\'95	}Call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 finish_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  This pushes it to the sequencer that this sequence is operating on.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
To see that the sequence is being driven to the driver, change the run phase of your ALU driver to get the next item, print it out, and then tell the sequencer that it\'92s done:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls50\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    ////////////////////////////////////////////\
   // func: run_phase\
   virtual task run_phase(uvm_phase phase);\
      // constantly poll for new transactions, printing them out\
      forever begin\
         seq_item_port.get_next_item(req);\
         `cn_info($psprintf("Driving: %s", req.convert2string()))\
         seq_item_port.item_done(req);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : run_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now, only one last thing remains.  You have to create the sequence and 
\i \expnd0\expndtw0\kerning0
start
\i0 \expnd0\expndtw0\kerning0
 it on the sequencer.  There are multiple ways of doing this, but putting it in the basic test\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is the most straightforward for now:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls51\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    ////////////////////////////////////////////\
   // func: main_phase\
   virtual task main_phase(uvm_phase phase);\
      alu_pkg::alu_seq_c alu_seq = new("basic_seq");\
      alu_seq.randomize();\
\
      phase.raise_objection(this);\
      `cn_info("Starting alu_seq.")\
      alu_seq.start(alutb_env.alu_agent.sqr);\
      phase.drop_objection(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : main_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
Running the basic test should produce the desired results.  When a sequence\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task is called, it will bind itself to the sequencer specified in its argument, and then call its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_start
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_body
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 post_body
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and finally it\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 post_start
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  tasks.\
At this point, you\'92re probably a bit underwhelmed.  After all, that\'92s an awful lot of code to write just to send one measly transaction.  But things will get more interesting soon.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 `uvm_do Macros\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 For one thing, we can clean up our sequence a little bit.  UVM provides a set of macros to create, randomize, and perform a sequence or sequence item from another sequence.  These are the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros, and it\'92s 
\i \expnd0\expndtw0\kerning0
very important
\i0 \expnd0\expndtw0\kerning0
 to know what each of them does before using them.  But first, let\'92s shorten our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  body a bit:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls52\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task body();\
      item_c item;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_do(item)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Much shorter. 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  does pretty much everything we had before.  Sometimes, you want to randomize your sequence item with constraints.  In this case:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls53\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_do_with(item, \{ operation == MUL_A_B; alpha == 7; beta == 5; \})\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 `uvm_do_with
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  takes a constraint block and applies it during the randomization call.  Try running this code to ensure you get the correct results.\
Other times, you want to simply create the transaction, set it precisely, and then send it:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls54\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_create(item)\
      item.operation = item_c::MUL_A_B;\
      item.alpha = 7;\
      item.beta = 5;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_send(item)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This is less concise than the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_with
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  call, but it\'92s more efficient because the transaction doesn\'92t go through the randomization process.\
UVM has other macro facilities to send things with a higher priority, to send them on a different sequencer (for sequences attached to virtual sequencers, to be discussed later), for randomizing and sending, and for combinations of all the above.  
\b \expnd0\expndtw0\kerning0
These macros can only be called from a sequence, not from within the component hierarchy.
\b0 \expnd0\expndtw0\kerning0
\
Learn what macros are available from the table below and use the right one.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth3059\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth5435\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Macro
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Purpose
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_create
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ::create
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  on the given sequence, assigning it to this sequence\'92s sequencer.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Creates, starts, randomizes, and finishes the given sequence, on this sequence\'92s sequencer.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight300 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight300 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_pri
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but assigns a priority.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but randomizes with the given constraint block.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw40\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw40\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_pri_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but assigns a priority and randomizes with the given constraint block.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw40\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw40\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_create_on
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ::create
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  on the given sequence, assigning it to this given sequencer.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_on
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Creates, starts, randomizes, and finishes the given sequence, on the given sequencer.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight300 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight300 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_on_pri
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_on
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but assigns a priority.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_on_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_on
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but randomizes with the given constraint block.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw40\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw40\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_on_pri_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_on
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but assigns a priority and randomizes with the given constraint block.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw40\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw40\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_send
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Calls start and finish on a previously created sequence, without randomization.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight900 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight900 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_send_pri
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Calls start and finish on a previously created sequence, without randomization, but with the specified priority.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_rand_send
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Calls start, randomize, and finish on a previously created sequence.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_rand_send_pri
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_rand_send
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but with the specified priority.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_rand_send_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_rand_send
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but randomizes with the given constraint block.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3059\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5435\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_rand_send_pri_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_rand_send_with
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but with the specified priority.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Getting a Response\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Our driver doesn\'92t do much with it yet, but it will soon enough.  For the sake of our future examples, though, let\'92s talk about how the driver would send back a response.\
The response that the driver sends back to the sequencer will end up in the sequence that called it when the sequence calls its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_response
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls55\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task body();\
      item_c item;\
      `uvm_create(item)\
      item.operation = item_c::MUL_A_B;\
      item.alpha = 7;\
      item.beta = 5;\
      `uvm_send(item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       get_response(rsp);\
      `cn_info($psprintf(\'93Got response result: %08X\'94, rsp.result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 What is 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rsp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ?  Well, a sequence has two pre-defined variables in its base class--
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 req
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rsp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 --which are of the request and response types, respectively.  In our case, they\'92re both transactions of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Let\'92s modify the ALU driver\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to send back a real result whenever it sees a multiply operation:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls56\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       forever begin\
         seq_item_port.get_next_item(req);\
         `cn_info($psprintf("Driving: %s", req.convert2string()))\
         if(req.operation == item_c::MUL_A_B)\
            req.result = result_t\'92(req.alpha * req.beta);\
         seq_item_port.item_done(req);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Again, in our ALU example, our response is just the request with the result field filled in.  This is a common application, but other cases may be different.  A response might be a different packet or transaction.  But it must be of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and there\'92s no sense in creating a new one just to hold a 32-bit unsigned integer.\
With any luck, you should see your sequence returns the number 0x23:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 %I-(alu_seq_lib.sv: 51) [alutb_env.alu_agent.sqr.basic_seq] \{ 78ns\} Got response result: 00000023\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 7-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Spice things up a bit by adding a random count variable to your sequence.  Constrain it to between 1 and 100, and perform that many random transactions, getting each one\'92s response.  Also, rename your sequence to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , since 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  isn\'92t very descriptive.  In addition to renaming it in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , you\'92ll also need to randomize it before calling it\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.\
What happens if you don\'92t call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_response()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ?\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa160\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls57\ilvl0
\f4\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 // class: exer_seq_c\
// Runs <count> transactions\
class exer_seq_c extends uvm_sequence #(item_c, item_c);\
   `uvm_object_utils_begin(alu_pkg::exer_seq_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_field_int(count, UVM_ALL_ON | UVM_DEC)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // var: count\
   // The number of random transactions to perform\
   rand int count;\
   constraint reasonable_cnstr \{ count inside \{[1:100]\}; \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
\
   function new(string name="alu_seq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      item_c item;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       repeat(count) begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          `uvm_do(item)\
         get_response(rsp);\
         `cn_info($psprintf("Got response result: %08X", rsp.result))\
      end\
   endtask \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : exer_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you do not fetch the responses, the sequence fills up with responses and starts complaining about a response queue overflow.  You can manage the depth of your sequence\'92s response queue by calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_response_queue_depth
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_response_queue_depth
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or you can turn off the error reporting with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_response_queue_error_report_disabled
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Most often, though, it\'92s prudent to just get the responses.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Response Queue Handler\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sequences can also launch multiple requests at a time:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 fork\
   `uvm_do(item1)\
   `uvm_do(item2)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 join\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this case, the response for 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item2
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  could come before the response for 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item1
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Or, depending your architecture, responses can come out-of-order by their very nature.  As an alternative to calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_response(rsp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) for each request, you can set up a response handler.\
To do so, you create the function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 response_handler
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that will be called whenever a response comes in.  Because this is a virtual function from the base sequence class, which doesn\'92t know what type of response to expect, the function will receive a generic 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which you can then 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 $cast
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to your own response type.  To enable this function to be called, you call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 use_response_handler
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  with a value of 1.  You can enable or disable this setting on-the-fly, although this may not be a good idea.\
For example:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class my_seq_c extends uvm_sequence#(item_c);\
   `uvm_object_utils(my_seq_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: outstanding_requests\
   // An assoc. array of all pending requests\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    item_c outstanding_requests[int];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name=\'94my_seq\'94);\
      super.new(name);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       use_response_handler(1);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : new\
\
   ////////////////////////////////////////////\
   // func: response_handler\
   // Matches ID of each oustanding request\
  
\f4\b \kerning1\expnd-2\expndtw-8
 virtual function void response_handler(uvm_sequence_item response);\
      item_c resp, request;\
\
      // cast the response to our transaction type\
      $cast(resp, response);\

\f3\b0 \kerning1\expnd-2\expndtw-8
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       // look it up and compare\
      request = outstanding_requests[resp.id];\
      if(!request || !request.compare(resp))\
         `cn_err(\'93Response miscompare!\'94)\
      else\
         outstanding_requests.delete(resp.id];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : response_handler\
\
   ////////////////////////////////////////////\
   // func: body\
   // Launch 5 transactions\
   task body();\
      item_c item[5] = new[5];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       fork\
         foreach(item[x])\
            fork\
               automatic item_c this_item = item[x];\
               `uvm_do(this_item)\
               outstanding_requests[this_item.id] = this_item;\
            join_none\
      join\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : my_seq_c   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There are some interesting SystemVerilog constructs above that you may not have seen before:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    item_c outstanding_requests[int];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This declares an associative array (or hash, map, or dictionary, if you prefer) of transactions, keyed by an integer.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       use_response_handler(1);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This tells the sequence that its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 response_handler
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function should be called for each response that is received.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       // look it up and compare\
      request = outstanding_requests[resp.id];\
      if(!request || !request.compare(resp))\
         `cn_err(\'93Response miscompare!\'94)\
      else\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5          outstanding_requests.delete(resp.id);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sequence items come built-in with a unique 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 id
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field.  The first line above gets the request from the associative array, using the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 id
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  The second line uses the short-circuit condition of the OR operator. It first checks to see if it was found and if not it prints an error.  Otherwise, it checks to see if it mis-compares.  The last line deletes the outstanding request from the associative array.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       fork\
         foreach(item[x])\
            fork\
               automatic item_c this_item = item[x];\
               `uvm_do(this_item)\
               outstanding_requests[this_item.id] = this_item;\
            join_none\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       join\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This seemingly complicated bit of code sends 5 transactions in parallel, pushing each one to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 outstanding_requests
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  hash by its id.  Presumably, these IDs are unique.  The nested fork-join construct is explained in more detail in Appendix B.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Complex Routines\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 At this point, sequences must seem pretty boring.  But sequences get interesting when they do more than just one transaction.  Our little ALU isn\'92t capable of too many exotic functions, but there\'92s enough there that we can do something more complicated.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Factorials\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Let\'92s create a sequence that performs the operation:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 9__#$!@%!#__pastedGraphic.pdf \width2400 \height220
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The first thing to do is create a new sequence.  With 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 -c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will just give you the sequence without the file header and you can cut-and-paste it into your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_lib.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/vcomponents/alu>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg seq -n factorial -c\

\f4\b \kerning1\expnd-2\expndtw-8
factorial seq: Enter substitution for <reqType>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 
\f5\i \kerning1\expnd-2\expndtw-8
item_c
\f3\i0 \kerning1\expnd-2\expndtw-8
\

\f4\b \kerning1\expnd-2\expndtw-8
factorial seq: Enter substitution for <rspType>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 
\f5\i \kerning1\expnd-2\expndtw-8
item_c
\f3\i0 \kerning1\expnd-2\expndtw-8
\
class factorial_seq_c extends uvm_sequence #(item_c, item_c);\
   `uvm_object_utils_begin(alu_pkg::factorial_seq_c)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
\
   function new(string name="factorial_seq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : factorial_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Our factorial sequence should have one random field, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 operand
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is the number that we want to compute the factorial of.  Then, we\'92ll loop from 1 to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 operand
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , collecting the result response each time, and present the final answer.  We should also squirrel away the answer in the class as a member field, so that the basic test can then print the final result.\
Here is the final sequence:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls58\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class factorial_seq_c extends uvm_sequence #(item_c, item_c);\
   `uvm_object_utils_begin(alu_pkg::factorial_seq_c)\
      `uvm_field_int(operand, UVM_ALL_ON)\
      `uvm_field_int(result,  UVM_ALL_ON)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: operand\
   // The value to perform the factorial on\
   rand bit [15:0] operand;\
   constraint operand_cnstr \{ operand <= 9; \}\
   \
   // var: result\
   // The final result\
   bit [15:0] result = 1;\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="factorial_seq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   // Loop from 1..operand and multiply all the numbers together\
   virtual task body();\
      item_c item;\
      byte num;\
\
      for(num = 1; num <= operand; num++) begin\
         `uvm_do_with(item, \{ operation == MUL_A_B; alpha == num; beta == local::result; \})\
         get_response(rsp);\
         result = rsp.result;\
         `cn_info($psprintf("num=%0d, result=%0d", num, result))\
      end\
      `cn_info($psprintf("%0d! = %0d", operand, result))\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : factorial_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
If you\'92re a math whiz, you\'92ve already figured out that our ALU has a bit of a limitation.  Since it can only take 16-bit operands, our largest factorial operand is a meager 9.    And the result we keep must be constrained to those 16 bits.  Nonetheless, it\'92s a good example of how sequences can be used to convert multiple transactions into one larger transaction.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 7-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Modify your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to create and send in a factorial sequence with an operand of 9, and print the result.  What would happen if instead of the variable name 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 answer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , we chose the name 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead?  How would you solve this problem?\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The first part of this should have been straightforward:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls59\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    ////////////////////////////////////////////\
   // func: main_phase\
   virtual task main_phase(uvm_phase phase);\
      alu_pkg::factorial_seq_c factorial_seq = new("factorial_seq");\
      factorial_seq.operand = 9;\
      phase.raise_objection(this);\
      factorial_seq.start(alutb_env.alu_agent.sqr);\
      `cn_info($psprintf("The factorial of 9 is %d", factorial_seq.result))\
      phase.drop_objection(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : main_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The problem with naming the answer 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead is that it will conflict with the local name 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the transaction.  When the constraint is applied, it is local to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class, which already has a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field.  Thus, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta == result;
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  constraint refers to the transaction\'92s version of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Worse, because we left 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  uninitialized, VCS will complain that there are X\'92s or Z\'92s in a constraint value.\
You might be tempted to use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta == this.result;
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to distinguish the two, but since the constraint block is in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  scope, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 this
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  also refers to the transaction and not the sequence.\
Fortunately, the architects of SystemVerilog anticipated this problem and created the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 local::
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  scope operator.  This does exactly what you want:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls60\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa160\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          `uvm_do_with(item, \{ operation == MUL_A_B; alpha == num; beta == 
\f4\b \kerning1\expnd-2\expndtw-8
local::
\f3\b0 \kerning1\expnd-2\expndtw-8
result; \})\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0\b\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Problem 7-3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Write a sequence, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 summation_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that performs this operation, and prints the results:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 10__#$!@%!#__pastedGraphic.pdf \width3560 \height520
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 So things don\'92t get too crazy, constrain its 
\i \expnd0\expndtw0\kerning0
x
\i0 \expnd0\expndtw0\kerning0
 and 
\i \expnd0\expndtw0\kerning0
y
\i0 \expnd0\expndtw0\kerning0
 variables to be between 1 and 20.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
You could use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ADD_A_B
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operation, but this solution uses the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ACCUM
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operation. \
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls61\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 // class: summation_seq_c\
// Sends in ALU transactions that add up the values from op_x to op_y, storing the final answer in \
// result\
class summation_seq_c extends uvm_sequence #(item_c, item_c);\
   `uvm_object_utils_begin(alu_pkg::summation_seq_c)\
      `uvm_field_int(op_x, UVM_ALL_ON | UVM_DEC)\
      `uvm_field_int(op_y, UVM_ALL_ON | UVM_DEC)\
      `uvm_field_int(result, UVM_ALL_ON | UVM_DEC)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // vars: op_x, op_y\
   // Operands for this summation function\
   rand bit [15:0] op_x;\
   rand bit [15:0] op_y;\
\
   constraint operands_cnstr \{ op_x < op_y; \}\
   constraint reasonable_cnstr \{ \
      op_x inside \{[1:20]\}; \
      op_y inside \{[1:20]\}; \
   \}\
\
   // var: result\
   // The final result\
   result_t result = 0;\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="summation_seq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   // Loop from x..y, adding them up\
   virtual task body();\
      item_c item;\
      byte num;\
      `uvm_do_with(item, \{ operation == CLR_RES; \})\
      get_response(rsp);\
      for(num = op_x; num <= op_y; num++) begin\
         `uvm_do_with(item, \{ \
            operation == ACCUM; \
            alpha == num;\
         \})\
         get_response(rsp);\
      end\
      result = rsp.result;\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : summation_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You also would need to change your driver to provide a result when the operations are either 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ACCUM 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 or
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  CLR_RES
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls62\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task run_phase(uvm_phase phase);\
      result_t prev_result;\
      \
      // constantly poll for new transactions, printing them out\
      forever begin\
         seq_item_port.get_next_item(req);\
         `cn_info($psprintf("Driving: %s", req.convert2string()))\
         case(req.operation)\
           item_c::MUL_A_B: req.result = result_t'(req.alpha * req.beta);\
           item_c::ACCUM  : req.result = result_t'(prev_result + req.alpha);\
           item_c::CLR_RES: req.result = 0;\
         endcase\
         prev_result = req.result;\
         seq_item_port.item_done(req);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : run_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You may have missed that you\'92ll want to send in a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 CLR_RES
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  transaction first, to make sure the ALU does not already contain a result.  However, as you\'92ll see soon, when other sequences start interfering this will become a small problem.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 7-4\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Let\'92s write one more, just to make sure you\'92ve got the hang of it.  This sequence will create a random array of words and add them up.  We\'92ll call it 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  To create a randomly sized array, it\'92s always important to constrain the array\'92s size to a reasonable value, otherwise it will probably randomize itself to an extremely large number and crash the simulator.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls63\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // var: data\
   // An array of words to be summed\
   rand bit [15:0] data[];\
\
   // keep it to a reasonable size\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    constraint data_cnstr \{ data.size() inside \{[1:50]\}; \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now, when we randomize our sequence, it will create a randomly sized array of random 16-bit words.  To declare our data array as a UVM configuration field, we use the following macro:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls64\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_field_array_int(data, UVM_ALL_ON | UVM_DEC)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This line declares an array of 
\i \expnd0\expndtw0\kerning0
numbers
\i0 \expnd0\expndtw0\kerning0
.  UVM\'92s field macros just lump all numbers as ints, they do not distinguish between bytes, ints, or 42-bit values.  Declaring this field allows you to pack, unpack, and print it correctly (if you wanted to).  \
Write the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 sequence to send transactions into the ALU that will sum the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 data
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  array.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Just like in our last sequence, we\'92ll need to first clear the result state, and then push in each piece of data in turn.  Be sure to modify your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class to randomize your new sequence and send it.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls65\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task body();\
      item_c item;\
      result_t result;\
\
      `uvm_do_with(item, \{ operation == CLR_RES; \})\
      get_response(rsp);\
      foreach(data[x]) begin\
         `uvm_do_with(item, \{ operation == ACCUM; alpha == data[x]; \})\
         get_response(rsp);\
      end\
      result = rsp.result;\
      `cn_info($psprintf("Sum of this array = %0x", result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve also used SystemVerilog\'92s handy 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 foreach
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  construct.  This neatly replaces iterators from C++ and creates two implicit variables: 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 x
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 data[x]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  These implicit variables are local in scope only to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 foreach
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  block.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Sequencing other Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 So far, our little sequences have just been producing sequence items of our transaction type, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  But, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class is derived from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Therefore, sequences can also 
\i \expnd0\expndtw0\kerning0
do
\i0 \expnd0\expndtw0\kerning0
 other sequences.  This allows you to have layers of sequences.\
When you call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  (or any of its variants) on a sequence, things are just a little bit different.  First of all, you don\'92t need to (in fact, you shouldn\'92t) call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_response
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  That\'92s because the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros recognize that you are using a sequence and they call their 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  tasks, instead of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  When
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  completes, your sequence is already done, and whatever response data that\'92s stored in the sequence is available for your inspection.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 7-5\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
With everything you\'92ve learned so far, this next one should present some fresh challenges.  Use our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 factorial_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to provide a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_of_factorials_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that solves this equation:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 11__#$!@%!#__pastedGraphic.pdf \width3680 \height500
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is an implementation of the sum-of-factorials equation using the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  sequence.  Hopefully yours looks similar:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls66\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class sum_of_factorials_seq_c extends uvm_sequence #(item_c);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_object_utils_begin(alu_pkg::sum_of_factorials_seq_c)\
      `uvm_field_int(op_x, UVM_ALL_ON | UVM_DEC)\
      `uvm_field_int(op_y, UVM_ALL_ON | UVM_DEC)\
      `uvm_field_int(result, UVM_ALL_ON | UVM_DEC)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // vars: op_x, op_y\
   // Operands for this summation function\
   rand bit [15:0] op_x;\
   rand bit [15:0] op_y;\
\
   constraint operands_cnstr \{ \
      op_x < op_y;\
      op_x inside \{[1:9]\};\
      op_y inside \{[1:9]\};\
   \}\
   \
   // var: result\
   // The final result\
   result_t result;\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="sum_of_factorials_array_seq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      int num;\
      bit [15:0] data[];\
      factorial_seq_c fact_seq;\
      sum_array_seq_c sum_seq;\
      int  idx;\
      \
      // fill the data array with all the factorials\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       data = new[(op_y - op_x + 1)];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       idx = 0;\
      for(num = op_x; num <= op_y; num++) begin\
         `uvm_do_with(fact_seq, \{ operand == num; \})\
         data[idx] = fact_seq.result;\
         idx++;\
      end\
\
      // now sum the array\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_create(sum_seq)\
      sum_seq.data = data;\
      `uvm_send(sum_seq)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       result = sum_seq.result;\
      `cn_info($psprintf("The sum of factorials from %0d to %0d is %0d.",\
                         op_x, op_y, result))\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : sum_of_factorials_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A few important notes about this implementation:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       data = new[(op_y - op_x + 1)];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This is how you size a dynamic array--by newing it with the number of entries.  Using a queue would be a nice alternative, but the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  expects a dynamic array of unsigned bytes, so that\'92s what we\'92ll give it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_create(sum_seq)\
      sum_seq.data = data;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_send(sum_seq)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We do not want to create a random sequence with random data.  We want to use a very specific array, therefore we cannot use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Instead, we call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_create
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to perform both the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operation and to wait for the sequencer to accept it.  Then, we assign the data array to our local array.  Because it\'92s an array, this is merely copying a reference and so doesn\'92t have the overhead of copying each byte at a time.  Finally, we call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_send
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to send it to the sequencer.  When this call returns, the sequence has completed and we can fetch the answer.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Sequence Hierarchy\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Allowing sequences to \'91do\'92 other sequences is the basis of a sequence hierarchy.  More complex examples might involve  a complete protocol hierarchy.  A hefty example is an independent TCP or UDP session, living inside IPv4 packets, driven into a device using SRIO messages, all for the sake of performing a compression operation.\
What\'92s the point of all this?  The point is that the compression sequence does not need to know anything about the underlying sequences, which interface it went over, or how it was broken up into many packets over a long period of time.  It just deals with sending in a compression request, and when it\'92s done, it has the compression result.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 12__#$!@%!#__pastedGraphic.pdf \width9360 \height3120
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec2 The Sequencer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Take a look at your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_sqr.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  sequencer file.  Note that there\'92s really nothing in it.  It\'92s actually doing quite a bit, though.  Where sequencers really rock is when they\'92re handling multiple streams of stimulus at once.  So far, we\'92ve been sending it one sequence at a time.  Pretty boring.  Let\'92s instead use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fork..join
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to start multiple sequences at the same time.  Change your basic test\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to something more like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls67\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task main_phase(uvm_phase phase);\
      alu_pkg::sum_of_factorials_seq_c sof_seq = new("sof");\
      alu_pkg::sum_array_seq_c sum_array_seq = new("sum_array");\
      alu_pkg::exer_seq_c exer_seq = new("exer_seq");\
      \
      phase.raise_objection(this);\
      fork\
         begin\
            sof_seq.randomize();\
            `cn_info($psprintf("Starting:\\n%s", sof_seq.sprint()))\
            sof_seq.start(alutb_env.alu_agent.sqr);\
            `cn_info($psprintf("The sum-of-factorials from %0d to %0d is %d",\
                               sof_seq.op_x, sof_seq.op_y, sof_seq.result))\
         end\
\
         begin\
            sum_array_seq.randomize() with \{data.size() > 8; \};\
            `cn_info($psprintf("Starting:\\n%s", sum_array_seq.sprint()))\
            sum_array_seq.start(alutb_env.alu_agent.sqr);\
            `cn_info($psprintf("The sum is %0d", sum_array_seq.result))\
         end\
\
         begin\
            exer_seq.randomize();\
            exer_seq.start(alutb_env.alu_agent.sqr);\
            `cn_info($psprintf("exer sequence completed after %0d transactions.", exer_seq.count))\
         end\
\
         begin\
            alu_pkg::factorial_seq_c fact_seq = new("fact_seq");\
            fact_seq.randomize();\
            fact_seq.start(alutb_env.alu_agent.sqr);\
         end\
      join\
      \
      phase.drop_objection(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : main_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fork..join
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  concept is one you\'92ll soon use a lot of.  Here, we\'92ve spawned four separate threads that will start four separate randomized sequences on the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_env.alu_agent.sqr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  at the same time.  The sequencer now has four sequence threads arbitrating for its attention.  It has a built-in arbitrator that has several different modes of operation:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth2770\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth4483\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Arbitration Type
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Purpose
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2770\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4483\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_FIFO
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Requests are granted in FIFO order (default)
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2770\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4483\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_WEIGHTED
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Requests are granted randomly by weight
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2770\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4483\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_RANDOM
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Requests are granted randomly
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2770\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4483\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_STRICT_FIFO
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Requests at highest priority granted in fifo order
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2770\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4483\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_STRICT_RANDOM
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Requests at highest priority granted in randomly
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2770\clftsWidth3 \clheight1220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4483\clftsWidth3 \clheight1220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_USER
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Arbitration is delegated to the user-defined function, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 user_priority_arbitration
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . That function will specify the next sequence to grant.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
The sequencer chooses to arbitrate among the sequences when the currently chosen sequence either waits for a delay or sends an item.  When the sequence calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_item()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , it puts its hat in the ring to try to win the next arbitration, and the item\'92s priority and other factors will determine the winner.  The arbitration occurs when the driver calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_next_item()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .   If the sequence is chosen, then the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_item()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task finishes and the sequence\'92s thread takes over, performing randomization on the item, or whatever else you wish, and eventually sending it along to the driver.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
This interleaving of sequence items is the whole point of sequences and sequencers.
\b0 \expnd0\expndtw0\kerning0
  While they have other benefits, this is what turns generic operations into a tangled web of stimulus that is better at finding bugs than directed test cases are.  \
Below is a more complex example of how sequencers and their sequences can be viewed.  On the left is a hierarchy of independent sequences, each one minding its own business and doing its own thing.  They can each call lower-level sequences. In the middle, the sequencer performs the arbitration and interleaving.  On the rightmost edge is the random stream of transactions themselves.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 13__#$!@%!#__pastedGraphic.pdf \width9360 \height3400
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
And it does it all for free, which actually has two benefits:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl264\slmult1\sa240\pardirnatural\qj
\ls68\ilvl0
\b \expnd0\expndtw0\kerning0
{\listtext	\'95	}
\b0 \expnd0\expndtw0\kerning0
First, you don\'92t have to write this complex arbitrator yourself, for every testbench, and for every transaction type.\
\ls68\ilvl0
\b \expnd0\expndtw0\kerning0
{\listtext	\'95	}
\b0 \expnd0\expndtw0\kerning0
Second, these sequences essentially operate in a vacuum.  They effectively separate the generation of stimulus from the underlying implementation, allowing you to focus on one thing at a time.  Creating a sum-of-factorials sequence does not need to take into account how the factorial sequence was implemented.  As we\'92ll see later, this can lead down the path of 
\i \expnd0\expndtw0\kerning0
prediction encapsulation
\i0 \expnd0\expndtw0\kerning0
.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Locking and Grabbing\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you now run your test, you\'92ll find that all your sequences are quite jumbled together.  However, if you used your calculator to verify the output in the logfile, you\'92ll see this leads to a problem.  In order to sum an array of values using the clear and accumulate operations, these sequences need to be atomic.  Otherwise, the stored result value in the ALU will become mixed up with all the other calculations.\
However, a sequence can get exclusive access to its sequencer via 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lock
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 grab
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  When a sequence locks its sequencer, it first waits for it to win arbitration, and then it blocks other sequences until it calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 unlock
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 grab
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  does the same thing, but it prioritizes the lock so that it will win arbitration next so long as other sequences do not already have exclusivity on the sequencer.  You would use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 grab
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lock
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  for higher priority sequences--such as an interrupt handler.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 7-6\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Change the two sequence bodies of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 summation_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to lock the sequencer before doing the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 CLR_RES
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operation and to unlock it after the last 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ACCUM
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operation.  Verify that your results are now correct.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The body of your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 summation_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  should now look something like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls69\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task body();\
      item_c item;\
      byte num;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       lock();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_do_with(item, \{ operation == CLR_RES; \})\
      get_response(rsp);\
      for(num = op_x; num <= op_y; num++) begin\
         `uvm_do_with(item, \{ \
            operation == ACCUM; \
            alpha == num;\
         \})\
         get_response(rsp);\
      end\
      result = rsp.result;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       unlock();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will have this in its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls70\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task body();\
      item_c item;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       lock();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_do_with(item, \{ operation == CLR_RES; \})\
      get_response(rsp);\
      foreach(data[x]) begin\
         `uvm_do_with(item, \{ operation == ACCUM; alpha == data[x]; \})\
         get_response(rsp);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       unlock();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       result = rsp.result;\
      `cn_info($psprintf("Sum of this array = %0x:", result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Prediction Encapsulation\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 One of the most complex tasks in creating a testbench is prediction.  The RTL does what it does with this jumble of stimulus we\'92ve created, and the predictor has the enormous task of determining if it\'92s correct or not.\
We will later write a predictor that sees each individual transaction and determines if the ALU generated the correct result.  This is a fairly straightforward mechanism that should work, for such a simple design.  But how do we know that larger operations are succeeding?\
Take, for example, our sequence that calculates the sum of an array.  Relying only on our basic predictor, the testbench would presume that since each of the  accumulate operations gave the correct result that the entire operation is correct.  But before locking the sequencer, both your summation sequences were getting the wrong answer.  The testbench would not have found this.\
The sequence itself, though, has all the facilities to reach the correct value and check the result, because it has all the data right there and it receives the final answer.  By encapsulating a predictor right in the sequence, our sequence becomes self-checking.  What\'92s more, our sequence knows nothing of all the other traffic flying around.  Imagine writing the scoreboard that has to identify which operations went with which.  You might have to embed a tag or some other identifier within each transaction so that the predictor can determine where they all go.  \
Just as a demonstration of how prediction encapsulation can work, let\'92s use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  as an example.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls71\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task body();\
      item_c item;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       result_t exp_result = data.sum();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
      lock();\
      `uvm_do_with(item, \{ operation == CLR_RES; \})\
      get_response(rsp);\
      foreach(data[x]) begin\
         `uvm_do_with(item, \{ operation == ACCUM; alpha == data[x]; \})\
         get_response(rsp);\
      end\
      unlock();\
      result = rsp.result;\
      `cn_info($psprintf("Sum of this array = %0x:", result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       if(result != exp_result)\
         `cn_err($psprintf("The result %0x did not match the expected value %0x.", result,\
                           exp_result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve embedded a checker to ensure that the entire operation completes successfully, and we\'92ve used SystemVerilog\'92s handy 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function on a dynamic array to quickly calculate the answer.  This will ensure that the DUT can correctly calculate the sums of an array.\
Have we achieved 
\i \expnd0\expndtw0\kerning0
prediction nirvana?!?
\i0 \expnd0\expndtw0\kerning0
\
Well, maybe yes and maybe no.  For one thing, not all sequences will be re-usable at a higher level of abstraction, like in the full-chip testbench.  If you are not able to carry a complex prediction algorithm forward to other testbenches, then that\'92s not a good place to put it.  \
For another, a great many things can happen to your transactions along their journey that this sequence might not be privy to.  These circumstances may or may not be manageable.  For example, what would happen if a reset occurred in the middle of this sequence?  While this situation may be manageable, others may not be so simple.\
How would you check this answer 
\i \expnd0\expndtw0\kerning0
without
\i0 \expnd0\expndtw0\kerning0
 embedding the prediction into the sequence?  The long and involved answer may lead you to believe that could be the better approach.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sequences and sequencers offer dramatically more features than presented here.  You\'92ll see more of them later.  What we know now should suffice to provide enough interesting stimulus for the driver we\'92re about to write.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 8: Drivers and Monitors\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We already created the empty driver class way back in Lesson 5.  In this lesson, we\'92re going to hook it up to the interface we created in Lesson 4, receive requests from the sequencer, drive the transactions, collect the results, and send them back to the sequencer.  Then, we\'92ll create a monitor in the same way, and use analysis ports to announce what happens on the interface.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Fetching the Interface\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You\'92ll recall that during Lesson 4 we instantiated the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the top-level testbench and pushed virtual references to its modports into the resource configuration database with the names 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu::drv_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu::mon_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  The suffix 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  indicates that it\'92s a virtual interface.\
Well, we\'92re trying to make a reusable agent, and the interfaces won\'92t always have those names, so let\'92s create a configuration string in the driver called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 intf_name
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls72\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class drv_c extends uvm_driver#(item_c);\
   `uvm_component_utils_begin(alu_pkg::drv_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_field_string(intf_name, UVM_ALL_ON)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   // var: intf_name\
   // The name of the virtual interface that we'll hook up to\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    string intf_name = "drv_vi";\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 As you can see, we have used the macro 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field_string
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to declare this configuration field, so that it will auto-populate itself when its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is called.  If no other classes have added this configuration to the database for this driver, then it will take the default name of \'93
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ,\'94 which is what we want in the first place.  This is how you give a configuration its default value.\
Next, we need to declare the virtual interface as a field in the driver, so that it can access the signals:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls73\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: drv_vi\
   // Virtual interface to drive on\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual alu_intf.drv_mp drv_vi;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve placed this definition in the fields group, to let readers know that this is not something they\'92ll be touching.  All they need to do is set the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 intf_name
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  string correctly.  Also, the type of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  must match 
\b \expnd0\expndtw0\kerning0
exactly
\b0 \expnd0\expndtw0\kerning0
 what was used to store this interface in the database in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `cn_set_intf(
\f4\b \kerning1\expnd-2\expndtw-8
virtual alu_intf.drv_mp
\f3\b0 \kerning1\expnd-2\expndtw-8
, "alu_pkg::alu_intf", "drv_vi"   , alu_i.drv_mp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This will give us access to the driver modport of this interface.  Now, it needs to be fetched from the interface.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 8-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Fetch the interface from the resource database and assign it to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  In the driver\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , call the interface\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reset()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.  \
You can also 
\b \expnd0\expndtw0\kerning0
remove
\b0 \expnd0\expndtw0\kerning0
 the call to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reset()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that we left in the testbench earlier:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    initial\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       alu_i.reset();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0   Afterwards, you should be able to simulate successfully.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Like the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_set_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro that was used earlier, there is a corresponding 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_get_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls74\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
      // get the interface\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `cn_get_intf(virtual alu_intf.drv_mp, \'93alu_pkg::alu_intf\'94, intf_name, drv_vi)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The macro unrolls to this:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5      if(!uvm_resource_db#(virtual alu_intf.drv_mp)::get(\'93alu_pkg::alu_intf\'94, intf_name, drv_vi))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          `cn_fatal($psprintf("%s virtual interface not present.", intf_name))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note that it\'92s important to flag a fatal error if the interface is not found, because that would indicate a configuration error, and there is no purpose in continuing.  The call to get the interface must take place 
\i \expnd0\expndtw0\kerning0
after
\i0 \expnd0\expndtw0\kerning0
 the call to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  because if it happened before then the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 intf_name
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable would not have been updated by the database.\
Your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  should now look like this to ensure that the assertions in the interface do not fire.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls75\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task run_phase(uvm_phase phase);\
      drv_vi.reset();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : run_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Getting the Next Item\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 As you saw in Lesson 7, drivers have a built-in port called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 seq_item_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  through which the sequencer pushes 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_items
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . It\'92s a special port of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_seq_item_pull_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that is parameterized to your request and response types.  Like the sequences, the driver also has built-in fields 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 req
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rsp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  corresponding to its current request and response. \
To get the next request, you call a blocking task :  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 seq_item_port.get_next_item(req);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It will return when the next request is available.  Or, you can call the function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 try_next_item(req)
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to see if one is available in zero-time.\
Our ALU design operates in a pull-mode.  The driver attempts to fetch the next item from the sequencer, and the sequencer\'92s arbitration scheme selects a sequence, and so on.  Both driver and sequencer are also offered in push-mode, where the sequencer pushes sequence items to the driver.  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Driving a Transaction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There are myriad approaches to doing this, but we went through the exercise of learning how to pack and unpack transactions, so we might as well use that method.  \
UVM\'92s current packing algorithms are offered in three flavors: give me a list of bits, give me a list of bytes, and give me a list of ints (32-bit numbers).  Since this is the fun part, you can do it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 8-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Write a task in the driver called to fetch and drive transactions.  Name it 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 driver
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and change the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task to simply call this task.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Hint: \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
You can use the following algorithm:\
\pard\tx380\tx740\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\fi-360\sl264\slmult1\pardirnatural\qj
\ls76\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Call the interface\'92s reset function, to ensure that X\'92s do not get into the design.\
\pard\tx380\tx740\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\fi-360\pardirnatural\qj
\ls76\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Run forever.\
\pard\tx720\tx1080\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li1080\fi-720\pardirnatural\qj
\ls77\ilvl1{\listtext	\'95	}Get the next transaction.\
{\listtext	\'95	}Pack the transaction into an array of bytes.\
{\listtext	\'95	}For each byte:\
\pard\tx1080\tx1440\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li1440\fi-1080\pardirnatural\qj
\ls77\ilvl2{\listtext	\'95	}Wait 1 clock cycle on the interface.\
{\listtext	\'95	}Assert the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  line only if this is the very first cycle.\
{\listtext	\'95	}Drive the byte of data.\
\pard\tx720\tx1080\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li1080\fi-720\pardirnatural\qj
\ls77\ilvl1{\listtext	\'95	}Wait 1 clock, then clear the bus.\
{\listtext	\'95	}Wait for the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ready
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  line to go high, then wait 1 clock.\
{\listtext	\'95	}Fetch the result from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  bus.\
{\listtext	\'95	}Assign the result to the original request\'92s result field.\
\pard\tx720\tx1080\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li1080\fi-720\sa240\pardirnatural\qj
\ls77\ilvl1\expnd0\expndtw0\kerning0
{\listtext	\'95	}Call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_done
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and send back the original request.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The challenge here was probably dealing with the clocking block.  While it may make for extra typing here, clocking blocks are worth the effort if the clock edges may change or if you later want to add sampling delays.  Clocking blocks in an interface define what the sampling clock edge is, so the notion of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 @(posedge clk)
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  has been abstracted away.  If an interface suddenly became a dual-data rate interface, the only place you would need to change any code would be in the clocking block.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls78\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // func: driver\
   // Drive transactions by packing into an array of bytes, then sending two 4-bit cycles\
   // for each byte.  Then wait for the response and send it back.\
   task driver();\
      byte unsigned stream[];\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       @(posedge drv_vi.drv_cb.rst_n);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
      forever begin\
         seq_item_port.get_next_item(req);\
\
         req.pack_bytes(stream);\
         foreach(stream[x]) begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             @(drv_vi.drv_cb);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             drv_vi.drv_cb.ctl <= (x == 0)? 1'b1 : 1'b0;\
            drv_vi.drv_cb.dat <= stream[x];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          end\
\
         // wait 1 clock, then clear the bus\
         @(drv_vi.drv_cb);\
         drv_vi.reset();\
         \
         // wait for result\
         @(posedge drv_vi.drv_cb.ready);\
         @(drv_vi.drv_cb);\
         req.result = drv_vi.drv_cb.result;\
         seq_item_port.item_done(req);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : driver\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you happened to leave the checker in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , then hopefully the test still passes. \
A few notes on the above design:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             @(drv_vi.drv_cb);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Because of the clocking block, the method to wait 1 clock is to just wait on the clocking block.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             drv_vi.drv_cb.ctl <= (x == 0)? 1'b1 : 1'b0;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5             drv_vi.drv_cb.dat <= stream[x];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The virtual interface that the driver has is a modport of an existing interface.  Recall that this modport, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_mp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , has only two features:  
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_cb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reset
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    modport drv_mp(clocking drv_cb,\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5                   import reset);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Therefore, all signal accesses (both read and write) must take place through the clocking block, which also specifies the direction (input or output) that the driver is permitted to access.  There is no such signal as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi.dat
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  There is only 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi.drv_cb.dat
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  The same can be said for 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rst_n
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Monitoring Activity\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 As its name implies, the monitor is a component that watches the interface.  It checks for any protocol violations and collects all activity it sees, broadcasting these as transactions to all listeners through an analysis port.  Unlike the driver and the sequencer, a monitor is always present in an agent whether it is active or not.\
The monitor in this agent will look very much like the driver, except the exact opposite.  Instead of watching the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_cb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  clocking block, it will watch the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mon_cb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Instead of getting transactions from the sequencer, it will broadcast the ones that it sees.  And instead of packing and driving transactions, it will collect data and unpack into a transaction.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 8-3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Write the ALU monitor.  Use the hints below if you need to.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Hint: \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
As with the driver, we must start by making sure we get the interface.  Then, set up the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to launch two tasks: 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fork..join_any
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  construct so that the tasks are disabled on reset.\
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task should be straightforward: constantly wait for the rising edge of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ready
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal, and broadcast the result bus out the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitored_result_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  by calling its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.\
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task is a little bit trickier.  Because the protocol offers no end-of-transaction signal, it must be inferred from the operation.  Wait for the rising edge of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , grab the data, and based on the operation that\'92s being driven, collect the correct number of data cycles in a dynamic array of bytes.  Report an error if the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal goes high on any cycle other than the first one.\
When that\'92s done, you should be able to create a new transaction, unpack those bytes into it, and write it out of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitored_item_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  You might also want to add debug messages to see what it\'92s doing.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is one possible implementation of the ALU monitor, with some explanations following:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls79\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_mon.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `include "alu_item.sv"\
\
// class: mon_c\
// Monitors an ALU bus and reports activity.\
class mon_c extends uvm_monitor;\
   `uvm_component_utils_begin(alu_pkg::mon_c)\
      `uvm_field_string(intf_name, UVM_ALL_ON)\
   `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   // var: intf_name\
   // The name of the virtual interface that we'll hook up to\
   string intf_name = "mon_vi";\
\
   //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // var: monitored_item_port\
   // All monitored transactions go out here\
   uvm_analysis_port #(item_c) monitored_item_port;\
\
   // var: monitored_result_port\
   // All monitored results go out here\
   uvm_analysis_port #(result_t) monitored_result_port;\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: mon_vi\
   // Virtual interface to monitor\
   virtual alu_intf.mon_mp mon_vi;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="mon",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
      // get the interface\
      `cn_get_intf(virtual alu_intf.mon_mp, "alu_pkg::alu_intf", intf_name, mon_vi)\
\
      monitored_item_port = new("monitored_item_port", this);\
      monitored_result_port = new("monitored_result_port", this);\
   endfunction : build_phase\
\
   ////////////////////////////////////////////\
   // func: run_phase\
   virtual task run_phase(uvm_phase phase);\
      forever begin\
         fork\
            monitor_item();\
            monitor_result();\
            @(negedge mon_vi.mon_cb.rst_n);\
         join_any\
\
         `cn_info("Stopping monitor due to reset.")\
         disable fork;\
\
         @(posedge mon_vi.mon_cb.rst_n);\
      end\
      \
   endtask : run_phase\
\
   ////////////////////////////////////////////\
   // func: monitor_item\
   // Watch and broadcast the transactions on the bus\
   virtual task monitor_item();\
      int num_clocks;\
      byte unsigned data[];\
      item_c item;\
\
      forever begin\
         // wait for the rising edge of the control\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          @(posedge mon_vi.mon_cb.ctl);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
         // determine how many clocks are in this itemaction\
         case(mon_vi.mon_cb.dat)\
            // 5-cycle transactions\
            item_c::ADD_A_B, item_c::SUB_A_B, item_c::SUB_B_A,\
            item_c::MUL_A_B, item_c::DIV_A_B, item_c::DIV_B_A : \
               num_clocks = 5;\
\
            // 3-cycle transactions\
            item_c::INC_A, item_c::INC_B, item_c::ACCUM : \
               num_clocks = 3;\
\
            // 1-cycle transactions\
            item_c::CLR_RES : \
               num_clocks = 1;\
\
            default:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5                `cn_err($psprintf("Unknown operation type: %02X", mon_vi.mon_cb.dat))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          endcase            \
\
         // collect the data for each cycle\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          data = new[num_clocks];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          for(int clk=0; clk < num_clocks; clk++) begin\
            data[clk] = mon_vi.mon_cb.dat;\
            @(mon_vi.mon_cb);\
            if(mon_vi.mon_cb.ctl == 1)\
               `cn_err($psprintf("The CTL signal is high during a transaction that should have been %0d clocks.", num_clocks))\
         end\
\
         // create the transaction, unpack into it, and write it out the monitored_item_port\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          item = item_c::type_id::create("mon_item");\
         item.unpack_bytes(data);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          `cn_info($psprintf("Monitored: %s", item.convert2string()))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          monitored_item_port.write(item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       end\
   endtask : monitor_item\
   \
   ////////////////////////////////////////////\
   // func: monitor_result\
   // Monitor the ready and result signal and broadcast it out the monitored_result_port\
   virtual task monitor_result();\
      forever begin\
         @(posedge mon_vi.mon_cb.ready);\
         `cn_info($psprintf("Monitored Result: %08X", mon_vi.mon_cb.result))\
         monitored_result_port.write(mon_vi.mon_cb.result);\
      end\
   endtask : monitor_result\
   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : mon_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A few explanations may be in order:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          @(posedge mon_vi.mon_cb.ctl);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Here, we are waiting for the positive edge of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal.  Because of the clocking-block, there is no concern that this event will be triggered on the rising edge of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  but before the DUT drives the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 dat
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  lines.  Why is that?  Because the event will sample on the clock specified by the clocking block--in this case, the positive edge of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  If the clocking block had specified the negative edge of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , you would find that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 posedge
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  event triggers on the negative edge of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , even though the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal is driven on the rising edge.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5                `cn_err($psprintf("Unknown operation type: %02X", mon_vi.mon_cb.dat))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A key element to any monitor is protocol checking.  The interface itself already checks for X\'92s.  Here, we ensure that only legal values are specified on the first cycle.  Later, we check that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal does not go high any other time during the transaction.  And, at the end of the transaction, we guarantee that the data collected has a legal format because it can successfully unpack.  If the unpack were to fail, it would report an error for us.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          data = new[num_clocks];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you\'92re coming from a C/C++ background, you might be wary by this line, because there are no free or delete operators.  And this sits in a forever loop.  This looks like a memory leak, but it\'92s not.  SytemVerilog has automatic garbage-collection, so when nobody else is referencing this data, it gets freed automatically.  As it happens, this data is local in scope to this task, and it\'92s copied byte-by-byte into the transaction during the unpack operation.  Therefore, the bytes pointed to by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 data
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable will have zero references the next time the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 data
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable is newed.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          item = item_c::type_id::create("mon_item");\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Like the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 data
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable is local in scope to the task, and we keep creating new ones.  Are these also garbage-collected when the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable creates a new one?  Well, yes and no.  If nobody were listening on the analysis port, then they would be garbage collected.  In this testbench, though, we have the monitor broadcasting to the agent, which broadcasts to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item_subscriber_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class we implemented in Lesson 6.  This subscriber doesn\'92t hold onto the transaction, though.  It merely prints it out, so these transactions will be garbage collected.  Other subscribers may store them in a scoreboard, or some other temporary location, and their reference count will not go to zero, so they will not be freed.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          item.unpack_bytes(data);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 unpack_bytes
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function is used in the same manner as the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pack_bytes
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function we used in the driver.  The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 unpack_bytes
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function will report an error on its own if it is unsuccessful, and it returns an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 int
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  which is the number of bits that were unpacked.  We don\'92t need this information, though, so we don\'92t look at it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          monitored_item_port.write(item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Here we are writing that transaction out of the analysis port.  Elsewhere, we write the result value out of the other analysis port.  Since these are connected to the agent\'92s analysis ports, they will likewise be broadcast out of the agent.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Drivers and monitors are a snap in SystemVerilog because of all the built-in constructs like events, queues, dynamic and associative arrays, and easy signal access.  Hooking them up the UVM way wasn\'92t too difficult, either.\
It\'92s probably time we got around to checking that the ALU is actually doing some math, though.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 9: Writing a Predictor\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve been so focused on creating, driving, and monitoring the stimulus that we haven\'92t bothered to check if it\'92s correct or not.  We\'92ll be getting to reading and writing CSRs in Lesson 10, so for now consider the K and C values to be 1 and 0 respectively.\
UVM offers a variety of options when constructing your predictor.  Some are more appropriate than others, depending on the nature of the prediction being made.\
But first, some definitions:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Intra-Agent Prediction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 Refers to the prediction within a single agent, requiring only one monitor to perceive all necessary information.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Inter-Agent Prediction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 Predictions of DUT activity between different agents.  Multiple agents are required to stimulate and monitor the traffic conditions.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 A block-level testbench may have only one or both of these.  The ALU agent is an example of a testbench that requires only one intra-agent predictor, because one monitor is sufficient to monitor both the transactions and the results.\
A PCIE agent might also have an intra-agent predictor, tracking requests and responses within the PCIE framework.  But that agent will likely communicate to an outside predictor that coordinates with another agent to check traffic at a higher level of abstraction.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Monitor Prediction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 For such a small testbench, you\'92re probably tempted to put all of the prediction in the monitor.  And for something this simple, that decision is probably justified.  Typically, though, this is not such a great idea.  Separating the low-level pin details and interface protocol checking from the higher-level prediction algorithms is often considered the best practice.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Scoreboards\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM provides a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_scoreboard
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class, but it might interest you to know that in UVM 1.1 that class is just an empty component and serves no useful purpose.  (As a matter of fact, so are the agent, environment, test, and a variety of other UVM classes).  The reasons these \'93empty\'94 classes exist are that they help identify the purpose of the derived class you\'92re creating and they serve as placeholders for future functionality that may come along someday.\
Meantime, if the nature of your prediction algorithm requires a scoreboard, this is the component you should create.  Pipe monitored requests and responses into the scoreboard component via TLM interfaces and use some of SystemVerilog\'92s handy data types such as queues or associative arrays and away you go.  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 PW Scoreboard\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The folks at Paradigm Works, Inc., created and released a more fully-functional open source scoreboard that appears in the vcomponents directory as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pw_scoreboard
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  They are lobbying for UVM to adopt it as the standard 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_scoreboard
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class, and it does have some compelling features.\
It\'92s a parameterized component that you can drop in with the transaction types you hope to check, and it automatically instantiates the analysis exports for you.  The API is described in more detail in its {\field{\*\fldinst{HYPERLINK "http://iceman.caveonetworks.com/wiki/uploads/4/40/Pw_svf_scoreboard_user_guide.pdf"}}{\fldrslt \cf3 \expnd0\expndtw0\kerning0
\ul \ulc3 \strokec3 User\'92s Guide}}.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Comparators\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM offers several built-in comparator components that operate as simplistic versions of the PW scoreboard.   The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_in_order_comparator
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_in_order_built_in_comparator
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_in_order_class_comparator
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  all compare two streams of data objects, both of the same type.  This may be useful in situations where what goes in must come out, but for most applications probably will not be sufficient.  \
One place where these comparators can be useful is as an agent self-check.  Placing a comparator in the agent between the driver and the monitor ensures that both components are in sync with one another.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 14__#$!@%!#__pastedGraphic.pdf \width3680 \height1980
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_algorithmic_comparator
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  offers similar functionality, but is parameterized to work with different transaction classes as the two streams and also takes a class that is used to transform the first class into the predicted second class.\
This sounds perfect for our ALU, which would have transaction sequences going in one port, and results going in the other, with a simple math function in between to predict expected results.  What could be easier?\
Unfortunately, the class that UVM 1.1 offers has one small bug--it cannot take an integer type as one of the streams.  We would have to enclose the result value into a separate results class containing just a 32-bit value.  Not an overwhelming limitation, though.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Prediction Encapsulation\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In Lesson 7, we saw how the sequences themselves could perform their own prediction, under the right circumstances.  This was great for checking the result of a longer computation because it isolated the prediction from the interleaved traffic that is common on interfaces.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Roll-Your-Own\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Creating your own predictor component will often be the avenue of choice, and it\'92s the one we\'92ll choose here, though not because it\'92s the most prudent.  Rather, we\'92ll roll our own because it\'92s the situation you\'92ll most often find yourself in.  Also, it will later provide us with the ability to demonstrate using your predictor as a reference model in place of the real RTL.\
This one should be a piece of cake for you.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 9-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Instantiate an ALU predictor (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pred_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) that derives from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_component
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the ALU agent and provide it with two analysis imps, one taking an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and the other taking a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result_t
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  value.  Use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_analysis_imp_decl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros to permit you to create both 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  functions.\
Hook up the predictor\'92s imps to the monitors ports and fire away.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Hopefully this was not too challenging for you.  As discussed in Lesson 6, these can be placed in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls80\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_pkg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `uvm_analysis_imp_decl(_item)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `uvm_analysis_imp_decl(_result)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It\'92s not too distressing if you placed them in the same file as the predictor, but it\'92s a good habit to always put them in the package so they are declared for all classes.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls81\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class pred_c extends uvm_component;\
   `uvm_component_utils(pred_c)\
   //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // var: monitored_item_imp\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    uvm_analysis_imp_item #(item_c, pred_c) monitored_item_imp;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
   // var: monitored_result_imp\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    uvm_analysis_imp_result #(result_t, pred_c) monitored_result_imp;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: result\
   // The result of the monitored transaction is stored here and checked with the received result\
   result_t result = 0;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="pred", \
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
      monitored_item_imp = new("monitored_item_imp", this);\
      monitored_result_imp = new("monitored_result_imp", this);\
   endfunction : build_phase\
\
   ////////////////////////////////////////////\
   // func: write_item\
   // Accepts ALU transactions and sets the next expected result\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void write_item(item_c _item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       case(_item.operation)\
         item_c::ADD_A_B :  result = _item.alpha + _item.beta;\
         item_c::SUB_A_B :  result = _item.alpha - _item.beta;\
         item_c::SUB_B_A :  result = _item.beta  - _item.alpha;\
         item_c::MUL_A_B :  result = _item.alpha * _item.beta;\
         item_c::DIV_A_B :  result = _item.alpha / _item.beta;\
         item_c::DIV_B_A :  result = _item.beta  / _item.alpha;\
         item_c::INC_A   :  result = _item.alpha + 1;\
         item_c::INC_B   :  result = _item.beta  + 1;\
         item_c::CLR_RES :  result = 0;\
         item_c::ACCUM   :  result += _item.alpha;\
      endcase\
\
      `cn_dbg(30, $psprintf("Calculated result %08X on item: %s", result, _item.convert2string()))\
   endfunction : write_item\
\
   ////////////////////////////////////////////\
   // func: write_result\
   // Called when a result is monitored\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void write_result(result_t _result);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       if(_result != result)\
         `cn_err($psprintf("Actual result: %08X != Expected result: %08x",\
                           _result, result))\
   endfunction : write_result\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : pred_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Hopefully by now, your only real challenge was having multiple imps appear in a component.  This required the declaration macros, the new 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_analysis_imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  types that these macros created, and the naming of your implementation functions 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write_result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Reference Modeling\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It won\'92t always be the case, but sometimes your predictor behaves very much like the DUT itself.  Sometimes it\'92s a C or SystemC reference model; or the RTL hasn\'92t actually been written yet and you\'92d like something to test against; or you want to try some early performance modeling to prove the architecture; or you want to run very fast sims without the RTL to test that your functional coverage is adequate.\
Whatever your reasoning, sometimes you want a 
\i \expnd0\expndtw0\kerning0
reference model
\i0 \expnd0\expndtw0\kerning0
.  The predictor designed above is an excellent candidate for that.\
Let\'92s review what the architecture looks like right now.  Our ALU agent--when it is active--looks like this:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 15__#$!@%!#__pastedGraphic.pdf \width6820 \height3700
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 In order to create a reference model, all we would really need to do is this:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 16__#$!@%!#__pastedGraphic.pdf \width4120 \height3260
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 We could modify our predictor to contain a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 seq_item_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  just like the driver, so that it can accept transactions.  Then, in the main or run phase, we could have it get the next item, calculate the result just as it was doing before, and send it back to the sequencer as a response.  We would also want to add analysis ports that broadcast the transactions and results as if a monitor were present.  And we could have it wait for a computational delay that models the real hardware.  \
The rest of the verification environment is completely isolated from this change, and for all intents and purposes the RTL might as well be present.\
How much practical use this method would be is a matter of debate.  But in this testbench, it is so easy that it begs to be written.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 9-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Modify the ALU predictor to behave like a reference model when a configuration field 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ref_model
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is set.  Modify the ALU agent to connect itself like a reference model when its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ref_model
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field is set.  You may need to reset the ALU interface at time zero to avoid the x-checkers.\
Create a new test, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ref_model_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that turns these bits on.\
\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_agent_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  modifications are fairly straightforward:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls82\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_field_int(ref_model, UVM_ALL_ON)\
	...\
   // var: ref_model\
   // When set to 1, the predictor operates in reference mode and the monitor/driver are not enabled\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    bit ref_model = 0;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In the build phase, ensure that the predictor\'92s value of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ref_model
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  matches the agent\'92s by default.  This way, the test(s) only have to modify the agent.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls83\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       set_config_int("pred", "ref_model", ref_model);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Also, don\'92t create either the driver or the monitor when in reference model mode:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls84\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       if(!ref_model)\
         mon = mon_c::type_id::create("mon", this);\
      if(is_active) begin\
         if(!ref_model)\
            drv = drv_c::type_id::create("drv", this);\
         sqr = sqr_c::type_id::create("sqr", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The connect phase should match the TLM connections of the diagram.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls85\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void connect_phase(uvm_phase phase);\
      super.connect_phase(phase);\
\
      if(!ref_model) begin\
	...\
      end else begin\
         // as a reference model\
         pred.seq_item_port.connect(sqr.seq_item_export);\
         pred.monitored_item_port.connect(monitored_item_port);\
         pred.monitored_result_port.connect(monitored_result_port);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : connect_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The changes needed to the predictor are shown below in boldface:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls86\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class pred_c extends uvm_component;\
   `uvm_component_utils_begin(pred_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_field_int(ref_model, UVM_ALL_ON)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_component_utils_end\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // var: ref_model\
   // When set, operates in reference model mode\
   bit ref_model = 0;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    \
   //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // var: monitored_item_imp\
   uvm_analysis_imp_item #(item_c, pred_c) monitored_item_imp;\
\
   // var: monitored_result_imp\
   uvm_analysis_imp_result #(result_t, pred_c) monitored_result_imp;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // var: seq_item_port\
   // As a reference model, pulls transactions from the sequencer\
   uvm_seq_item_pull_port #(item_c) seq_item_port;\
\
   // var: monitored_item_port\
   // As a reference model, drives out the transactions that were "driven"\
   uvm_analysis_port #(item_c) monitored_item_port;\
\
   // var: monitored_result_port\
   // As a reference model, drives out the results that were "seen"\
   uvm_analysis_port #(result_t) monitored_result_port;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: result\
   // The result of the monitored transaction is stored here and checked with the received result\
   result_t result = 0;\
\
   // var: \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="pred", \
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       if(ref_model) begin\
         seq_item_port = new("seq_item_port", this);\
         monitored_item_port = new("monitored_item_port", this);\
         monitored_result_port = new("monitored_result_port", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       end else begin\
         monitored_item_imp = new("monitored_item_imp", this);\
         monitored_result_imp = new("monitored_result_imp", this);\
      end\
      \
   endfunction : build_phase\
\
  
\f4\b \kerning1\expnd-2\expndtw-8
 ////////////////////////////////////////////\
   // func: main_phase\
   task main_phase(uvm_phase phase);\
      item_c item;\
      \
      if(ref_model) begin\
         forever begin\
            seq_item_port.get_next_item(item);\
\
            `cn_dbg(30, $psprintf("REF_MODEL: %s", item.convert2string()))\
\
            // create a delay that models the transmission of the transaction\
            #5ns;\
            monitored_item_port.write(item);\
            \
            // calculate result\
            write_item(item);\
\
            // create a delay that models the ALU calulation speed\
            #15ns;\
\
            // send back the result\
            write_result(result);\
            item.result = result;\
            seq_item_port.item_done(item);\
            monitored_result_port.write(result);\
         end\
      end\
   endtask : main_phase\

\f3\b0 \kerning1\expnd-2\expndtw-8
   \
   ////////////////////////////////////////////\
   // func: write_item\
   // Accepts ALU transactions and sets the next expected result\
   virtual function void write_item(item_c _item);\
      case(_item.operation)\
         item_c::ADD_A_B :  result = _item.alpha + _item.beta;\
         item_c::SUB_A_B :  result = _item.alpha - _item.beta;\
         item_c::SUB_B_A :  result = _item.beta  - _item.alpha;\
         item_c::MUL_A_B :  result = _item.alpha * _item.beta;\
         item_c::DIV_A_B :  result = _item.alpha / _item.beta;\
         item_c::DIV_B_A :  result = _item.beta  / _item.alpha;\
         item_c::INC_A   :  result = _item.alpha + 1;\
         item_c::INC_B   :  result = _item.beta  + 1;\
         item_c::CLR_RES :  result = 0;\
         item_c::ACCUM   :  result += _item.alpha;\
      endcase\
\
      `cn_dbg(30, $psprintf("Calculated result %08X on item: %s", result, _item.convert2string()))\
   endfunction : write_item\
\
   ////////////////////////////////////////////\
   // func: write_result\
   // Called when a result is monitored\
   virtual function void write_result(result_t _result);\
      if(_result != result)\
         `cn_err($psprintf("Actual result: %08X != Expected result: %08x",\
                           _result, result))\
   endfunction : write_result\
   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : pred_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The big change is the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which now looks similar to the one in the driver.  We could modify it to choose different delays based on the transaction type.  Or, we could pull in the virtual interface that the driver uses and wait on clock edges instead.\
You already know how to create the test, but just in case you\'92ve forgotten, it\'92s here:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls87\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/ref_model.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 // class: ref_model_test_c\
// Test the ALU using the predictor as a reference model\
class ref_model_test_c extends basic_test_c;\
   `uvm_component_utils(ref_model_test_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="test",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
      set_config_int("alutb_env.alu_agent", "ref_model", 1);\
   endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : ref_model_test_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 An alternative to this approach would be to leave the ALU agent largely the same, but disconnect the RTL from the interface.  Allow the driver to drive the transaction onto the interface and the monitor to see it.  Then, when the monitor tells the predictor that a transaction occurred, have the predictor drive the result directly onto the interface some time later.  This approach leads to fewer changes to the code, but incurs the overhead of having a driver and monitor and dissociates itself from operating only at the transaction level.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM offers a variety of choices for simple prediction schemes.  TLM interfaces provide a lot of flexibility and can allow you to run without RTL at all, provided you plan ahead.  Ultimately, though, prediction algorithms will be simple because of the rich set of aggregate data types and other functions that are available in the SystemVerilog language.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 10: Configuration Registers\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The CSRs that are specific to this testbench are described in the file 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rtl/alu/alu.csr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  In there, you\'92ll find a CSR titled 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ALU_CONST
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and it contains a read/writable field called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 K_VAL
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Let\'92s write a test that specifically configures that CSR field to a value between 9 and 20.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Register Organization\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Let\'92s first understand where this register is in the hierarchy.  Here is a picture of the testbench hierarchy that gets you to that field:
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 17__#$!@%!#__pastedGraphic.pdf \width4280 \height2140
}}
\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
This picture shows that the test component instantiates two objects, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  The test then has the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg\'92s
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  
\i \expnd0\expndtw0\kerning0
reference
\i0 \expnd0\expndtw0\kerning0
 the one in the test.  Because it\'92s a reference, there is only one instance of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the simulation, and no extra memory is consumed.  This is accomplished with the following code:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       // create reg_block\
      if(reg_block == null) begin\
         reg_block = alu_csr_pkg::alu_ncb_reg_block_c::type_id::create("reg_block", this);\
         reg_block.configure(null, "alutb_tb_top.dut_wrapper.dut");\
         reg_block.build();\
         reg_block.lock_model();\
      end\
\
      // set configuration's reference to reg_block\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       cfg.reg_block = reg_block;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is derived from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and inside of this lives the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_file
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is derived from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_reg_file
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  To understand this better, let\'92s observe the following definitions from the UVM 1.1 Reference Manual:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Register Block\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 A register block represents a design hierarchy. It can contain registers, register files, memories and sub-blocks.  A block has one or more address maps, each corresponding to a physical interface on the block.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Register Address Map\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 An address map is a collection of registers and memories accessible via a specific physical interface. Address maps can be composed into higher-level address maps.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Register File\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 A register file is a collection of register files and/or registers used to create regular repeated structures.  Register files are usually instantiated as arrays.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Register\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 A register represents a set of fields that are accessible as a single entity.  A register may be mapped to one or more address maps, each with different access rights and policy.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Register Adapter\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 This class defines an interface for converting between the generic register operation (
\f3\fs22 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 uvm_reg_bus_op)
\f0\fs24 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7  and a specific bus transaction.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 In short, when you hear \'93Register Block\'94 think design hierarchy (such as MIO, IOB, or GMX).  When you hear \'93Address Map\'94 think interface (such as NCB, RSL, or PCIE).  When you hear \'93Register File\'94 think of repeatable structures such as per-port statistics registers, or physical and virtual functions.\
In our simple testbench, the register block created by the CSR generation scripts contains the registers in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  block.  The register block is located in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 vcomponents/reg/obj/unit/regs__alu.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  It contains the register classes and the register block associated with the NCB address map.  In other blocks, it may be the case that multiple different interfaces can access registers, in which case they would have more than one map.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 References for Everyone!\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 As is usually the case, many different components and objects will want to be able to access the CSRs and the testbench\'92s configuration class.  As we saw in Lesson 5, UVM\'92s configuration and resource database gives us a way to push references with minimal code. We accomplish this in the following manner:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls88\ilvl0{\listtext	1.	}Push the register block into the resource database with the field name \'93
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\'94  Push it to all components by setting the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 inst_name
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  argument to \'93
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 *
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 \'94. Since we want each component to have a reference to the original register block, set the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 clone
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  argument to zero.\
{\listtext	2.	}For any component that needs access to the register block, instantiate a field of that type with the name \'93
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\'94  Use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros to declare this field as a member of this component.\
{\listtext	3.	}Each component will get a reference to this one instance when it calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
The base test uses this method to push both its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field to any component that wishes to see them with this bit of code:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       // push the register block and the configurations to all blocks that ask for it\
      set_config_object("*", "reg_block", reg_block, .clone(0));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       set_config_object("*", "cfg",       cfg,       .clone(0));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Configuring Your Block\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You\'92d be excused if you missed it while flipping through the reference manual, but UVM\'92s register block class contains a nice little function called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 update()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  What this function does is perform the 
\i \expnd0\expndtw0\kerning0
minimum
\i0 \expnd0\expndtw0\kerning0
 number of CSR writes to get the CSRs in the DUT to match the testbench\'92s register block.  So, the process to randomize and configure a block\'92s CSRs is straightforward:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls89\ilvl0{\listtext	1.	}Randomize the register block.  The CSR script has declared all registers as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rand
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  member fields, and all register fields as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rand
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  member fields, so randomizing the entire block will randomize all of the register fields.\
{\listtext	2.	}Call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block.update()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , preferably during the configure phase.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
That was easy.  Maybe too easy.  It turns out that UVM will write the CSRs in address order.  Maybe that\'92s what works for your block (it works great for the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).  But it might require a more complicated configuration routine than that.\
In that case, you can add modify the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 configure_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of a component, and you can organize the register writes in whatever manner you choose.  The registers themselves also have a task called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 update()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and by calling this it will perform the CSR write (if and only if one is needed).\
Register blocks and registers both also have a corresponding task called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mirror()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which will perform CSR reads to get the environment\'92s version of the registers to match the one in the DUT.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 The kval Test\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Let\'92s put all of this together and try to accomplish the goals of this lesson.  Then we\'92ll take a look at how all of it worked.\
Create a test class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 kval_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and extend it from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class.  In it, add this constraint:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls90\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/kval.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 constraint kval_cnstr \{\
   reg_block.ALU_CONST.K_VAL.value inside \{[9:20]\};\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Up until now the CSRs have contained their innocuous values, due to this constraint in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg::cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // Constrain K_VAL and C_VAL to both be innocuous\
   constraint innocuous_cnstr \{\
      reg_block.ALU_CONST.K_VAL.value == 1;\
      reg_block.ALU_CONST.C_VAL.value == 0;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If we were to run this test now, there would be a conflict in the constraints that the simulator would be unable to solve.  Go ahead and try it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 10-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
You could eliminate this problem by removing this constraint altogether.  How could you fix it 
\i \expnd0\expndtw0\kerning0
without
\i0 \expnd0\expndtw0\kerning0
 removing the constraint or altering the configuration class?\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Your first instinct might have been to use the factory.  In that case, you could derive a class from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg::cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and in its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function set the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 constraint_mode
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 innocuous_cnstr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to zero.  \
However, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance is accessible from the test.  So long as you turn off the constraint mode before the configuration class is randomized, then the constraint will not be applied.  How you do that, though, is the hard part.  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void build_phase(uvm_phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       cfg.innocuous_cnstr.constraint_mode(0);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       super.build();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you do this, you\'92ll find that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance hasn\'92t been created yet, so you\'92re trying to access a NULL object.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void build_phase(uvm_phase);\
      super.build();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       cfg.innocuous_cnstr.constraint_mode(0);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you do this, you\'92ll find that the base test\'92s build phase has already randomized the knob.  This cannot be moved to the connect or end of elaboration phases, because it\'92s necessary to randomize it in the build phase so that the rest of the components will build based on any configurations that might appear in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
Fortunately, the base test was designed to solve this problem.  The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  randomization takes place in a virtual function called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 randomize_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which you can override to do something before or after the randomization.  So, in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 kval_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls91\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/kval.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    ////////////////////////////////////////////\
   // func: randomize_cfg\
   // Turn off the innocuous constraint\
   virtual function void randomize_cfg();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       cfg.innocuous_cnstr.constraint_mode(0);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       super.randomize_cfg();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : randomize_cfg\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Naturally, your test will fail because your predictor doesn\'92t know anything about the K or C configurations, yet.  We\'92ll deal with that in a little bit.   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 How It All Works\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 How did the register block know how to create NCB stores and loads for us?  How does it know that the register isn\'92t on the RSL interface instead?\
The answer to these questions lie in the register block, the register maps, and the register adapters.\
Investigate the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_csr_pkg::alu_ncb_reg_block_c::build()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function (in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/reg/obj/unit/reg__alu.v
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), which configures and builds each of the CSRs and builds the NCB address map. The address map will be assigned a reference to the NCB sequencer and the NCB register adapter by the testbench.\
This happens in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test_c::connect_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.  It will be these classes that turn generic read and write transactions that the UVM register model knows about into the NCB stores and loads that we need.\
The UVM 1.1 Class Reference and the User\'92s Guide (section 5.5) have lots more detail on all of these.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Question\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Why couldn\'92t the register adapter have been specified in the register file or register block instead of in the base test?\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Answer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Associating a CSR with an interface is a testbench function.  In the full-chip testbench, these CSRs would not use the NCB to be written because that is an internal interface.  Thus, this code does not belong in the vcomponent, which is meant for code that can be re-used at higher levels.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Fixing Our Predictor\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Fixing the predictor to be CSR aware should be straightforward, as the predictor just needs to be aware of the CSR values at the time it makes the prediction.  So, we can instantiate the register block in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pred_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and make it a configurable reference:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls92\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_component_utils_begin(pred_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_field_object(alutb_reg_block, UVM_REFERENCE)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_field_int(ref_model,          UVM_ALL_ON)\
   `uvm_component_utils_end\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // var: alutb_reg_block\
   // Auto-generated Register Block\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    alu_csr_pkg::alu_ncb_reg_block_c alutb_reg_block;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We chose to provide it with the macro flag 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_REFERENCE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which will ensure that the object is populated by reference.  It also means that the whole register file will not be printed out if we ever 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sprint()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  this predictor.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 10-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Now, modify the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function to consider both the K and C values that are present in the register block.  Also, you\'92ll need to populate the register block in the predictor.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Take special note of the fact that we get the current values from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_reg_field
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  objects by looking at their 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 value
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls93\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void write_item(item_c _item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       bit [7:0] k_val = alutb_reg_block.ALU_CONST.K_VAL.value;\
      bit [7:0] c_val = alutb_reg_block.ALU_CONST.C_VAL.value;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       \
      case(_item.operation)\
         item_c::ADD_A_B :  result = k_val * (_item.alpha + _item.beta) + c_val;\
         item_c::SUB_A_B :  result = k_val * (_item.alpha - _item.beta) + c_val;\
         item_c::SUB_B_A :  result = k_val * (_item.beta  - _item.alpha) + c_val;\
         item_c::MUL_A_B :  result = k_val * (_item.alpha * _item.beta) + c_val;\
         item_c::DIV_A_B :  result = k_val * (_item.alpha / _item.beta) + c_val;\
         item_c::DIV_B_A :  result = k_val * (_item.beta  / _item.alpha) + c_val;\
         item_c::INC_A   :  result = k_val * (_item.alpha + 1) + c_val;\
         item_c::INC_B   :  result = k_val * (_item.beta  + 1) + c_val;\
         item_c::CLR_RES :  result = 0;\
         item_c::ACCUM   :  result += _item.alpha;\
      endcase\
\
      `cn_dbg(30, $psprintf("Calculated result %08X on item: %s", result, _item.convert2string()))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : write_item\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Also note that when this function runs, it will fetch the predicted values based on the most recently completed CSR write.  If a field is marked as being volatile, it means that it may change values between accesses (like a status register or a statistics counter).\
One place to push the register block down to the ALU predictor would be in the build phase of the ALUTB environment class, which instantiates the ALU agent:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls94\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alutb/alutb_env.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          set_config_object("alu_agent.pred", "alutb_reg_block", reg_block, .clone(0));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Register Callbacks\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There are many scenarios where you would want the environment to be alerted whenever  a read or write occurs on a CSR.  Here are just a few:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa40\pardirnatural\qj
\ls95\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Aliased registers.  When one register is written, another register takes a new value.\
{\listtext	\'95	}Expecting interrupts.  When a CSR is written to, the write may conditionally cause an interrupt that needs to be expected.\
{\listtext	\'95	}Soft resets.  Writing a CSR causes a software reset, and some agents and predictors must be reset, too.\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl312\slmult1\sa240\pardirnatural\qj
\ls95\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Writes to the registers on-the-fly cause predictions to shift accordingly.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
For cases such as these, you want to use a register callback.  Register callbacks follow the same pattern that other callbacks in UVM follow:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls96\ilvl0{\listtext	1.	}Derive a class from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_reg_cbs
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	2.	}Fill in the tasks and/or functions that supply the code you want to run.\
{\listtext	3.	}Instantiate your callback class somewhere in the environment.\
{\listtext	4.	}Register your callback class on the CSR(s) that it should apply to.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
You may register multiple callback classes or multiple instances of a callback class on a given CSR.\
The following is an example of a callback that prints the read value anytime the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ALU_RESULT[SOR]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field is read from.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls97\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 // class: alu_result_reg_cb_c\
class alu_result_reg_cb_c extends uvm_reg_cbs;\
   `uvm_object_utils(alu_result_reg_cb_c)\
\
   //---------------------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="alu_result_reg_cb");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: post_read\
   // Print to the logfile anytime the SOR CSR is read from.\
   virtual task post_read(uvm_reg_item rw);\
      `cn_info($psprintf("Read from SOR: %08X", rw.value[0]));\
   endtask : post_read\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : alu_result_reg_cb_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Then, the callback class is created and registered with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ALU_RESULT
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  CSR anyplace and at any time in the environment.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls98\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          alu_result_reg_cb_c alu_result_reg_cb = new("alu_result_reg_cb");\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5          uvm_reg_cb::add(reg_block.ALU_RESULT, alu_result_reg_cb);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Built-In Register Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 For free, UVM\'92s register package includes a variety of register test sequences to completely exercise the CSR and memory space.  These sequences can be the basis of your very first tests of a block to ensure that all CSR bugs are discovered and fixed.  What\'92s more, the sequences will automatically adapt to changes to the CSRs over time without any need to be modified.\
The sequences available test the DUT\'92s ability to withstand resets, bit-bashing, shared accesses (registers that can be accessed by more than one interface), memory walking patterns, and back-door HDL accesses.\
Each sequence can be configured via the UVM resource database to turn on or turn off testing of specific CSRs or blocks.\
See the CSR exerciser test (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb/tests/csr_exer.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) for an example of their usage. 
\f1\b \cf6 \expnd0\expndtw0\kerning0
\up0 \strokec6 TODO
\f0\b0 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM\'92s register package offers significantly more functionality than what is presented here.  UVM also has backdoor accesses, FIFO-like CSRs, memories, indirect registers, and more. But the information presented in this Lesson should provide a baseline for future lessons where these CSRs will be used.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 11: Writing Tests\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 When an environment is written properly, writing tests to hit specific regions of the design or areas of concern is merely a matter of adjusting a few knobs, tweaking a few configurations, or creating a few factory overrides.  The base test instantiates everything, but all of the other tests should be easy to write.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 CFG Classes\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM uses the word configuration when referring to the configuration and resource database that is the backbone for storing values that trickle down to sub-components. However, we\'92re going to talk about the random configurations that make each simulation job a little different.\
There are myriad classes in a vcomponent where you can put random variables.  Transactions, drivers, agents, sequences...all of the classes we\'92ve discussed so far can have random variables that change how they behave from one run to the next.  And that\'92s part of the problem: if you\'92re writing a predictor that needs to be aware of all of these different values, then the predictor must have references to each of these components to have visibility into these values.\
The K and C CSR values from Lesson 10 are a good example.  We had to share the register file with the predictor so it could get access to these values.  Far more complex scenarios can be imagined, though.\
In our environment, all of these random variables--and the CSR register block--are bundled into a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class that is instantiated in the base test.  A vcomponent\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class is similar to one of UVM\'92s policy classes.  Every class that instances this cfg class with the correct name will automatically get the reference to it during the build phase:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       set_config_object("*", "cfg", cfg, .clone(0));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 What\'92s more, all tests that you write can just add constraints directly into the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  member field.  The ALUTB package contains a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class that, admittedly, doesn\'92t do a whole lot just yet.  We\'92re going to add some constraints to it to modify the values of K and C during the configuration phase and attempt to hit a wide swath of values.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 11-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Remove the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 innocuous_cnstr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  constraint from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg::cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Create a configuration 
\i \expnd0\expndtw0\kerning0
knob
\i0 \expnd0\expndtw0\kerning0
 in the ALUTB configuration class that permits values of K and C to be within the following values.  By default, constrain the knob to always choose 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 INNOCUOUS
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  mode:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth1490\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clcbpat2 \clwWidth1190\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth1030\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clcbpat2 \clwWidth1030\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Setting
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 K
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 C
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Frequency
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1490\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1190\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 INNOCUOUS
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 1
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 20%
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1490\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1190\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SMALL
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 2..5
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 2..10
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 50%
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1490\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1190\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 LARGE
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 6..50
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 11..128
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 15%
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1490\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1190\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 XLARGE
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 51..255
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 129..255
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 5%
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1490\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1190\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 UNLIMITED
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 1..255
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0..255
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 10%
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
Then, write a test called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that varies the knob settings according to the frequencies shown above.  You should find that it passes consistently.\
\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
After removing the ALU base constraints, you start by creating an enumerated type that represents the knob.  By placing this type in the configuration class, you do not pollute the namespace of the environment.  This should go at the top of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls99\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_cfg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class cfg_c extends uvm_component;\
   //----------------------------------------------------------------------------------------\
   // Group: Types\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // enum: alu_const_knob_e\
   // Used to constrain the K and C values for ALU\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    typedef enum \{ INNOCUOUS, SMALL, LARGE, XLARGE, UNLIMITED \} alu_const_knob_e;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Then, you create a random instance of your new enumerated type, and constrain it to the value 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 INNOCUOUS
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls100\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_cfg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_component_utils_begin(alutb_pkg::cfg_c)\
      `uvm_field_object(reg_block, UVM_REFERENCE)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_field_enum(alu_const_knob_e, alu_const_knob, UVM_ALL_ON)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   // var: reg_block\
   // Register block for this environment\
   rand alu_csr_pkg::alu_ncb_reg_block_c reg_block;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // var: alu_const_knob\
   // Constrains the K_VAL and C_VAL\
   rand alu_const_knob_e alu_const_knob;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    constraint const_knob_cnstr \{ alu_const_knob == INNOCUOUS; \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note the syntax of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field_enum
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro requires that you provide the type as the first argument.  Now, add implication constraints to K and C that match the table:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls101\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_cfg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // constrain K_VAL based on alu_const_knob\
   constraint kval_cnstr \{\
      alu_const_knob == INNOCUOUS -> (reg_block.REG_FILE.ALU_CONST.K_VAL.value == 1);\
      alu_const_knob == SMALL     -> (reg_block.REG_FILE.ALU_CONST.K_VAL.value inside \{[2:5]\});\
      alu_const_knob == LARGE     -> (reg_block.REG_FILE.ALU_CONST.K_VAL.value inside \{[6:50]\});\
      alu_const_knob == XLARGE    -> (reg_block.REG_FILE.ALU_CONST.K_VAL.value inside \{[51:255]\});\
      alu_const_knob == UNLIMITED -> (reg_block.REG_FILE.ALU_CONST.K_VAL.value inside \{[0:255]\});\
   \}\
   \
   // constrain C_VAL based on alu_const_knob\
   constraint cal_cnstr \{\
      alu_const_knob == INNOCUOUS -> (reg_block.REG_FILE.ALU_CONST.C_VAL.value == 0);\
      alu_const_knob == SMALL     -> (reg_block.REG_FILE.ALU_CONST.C_VAL.value inside \{[2:10]\});\
      alu_const_knob == LARGE     -> (reg_block.REG_FILE.ALU_CONST.C_VAL.value inside \{[11:128]\});\
      alu_const_knob == XLARGE    -> (reg_block.REG_FILE.ALU_CONST.C_VAL.value inside \{[129:255]\});\
      alu_const_knob == UNLIMITED -> (reg_block.REG_FILE.ALU_CONST.C_VAL.value inside \{[0:255]\});\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class uses a distribution constraint to randomize the knob.  Notice that you can add a constraint 
\i \expnd0\expndtw0\kerning0
through
\i0 \expnd0\expndtw0\kerning0
 the class instance hierarchy.  This is essential.  If you couldn\'92t do this in SystemVerilog, the only other way to do it would be by extending the class with another one that contained the constraint, and then overriding that type using the factory.  You\'92ll find this method to be a lot less typing.\
Here is the complete 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls102\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/exer.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 // class: exer_test_c\
// Turns on all possible values of K_VAL and C_VAL\
class exer_test_c extends basic_test_c;\
   `uvm_component_utils(exer_test_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
   constraint const_knob_cnstr \{\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       cfg.alu_const_knob dist \{ alutb_pkg::cfg_c::INNOCUOUS :/ 20,\
                                alutb_pkg::cfg_c::SMALL     :/ 50,\
                                alutb_pkg::cfg_c::LARGE     :/ 15,\
                                alutb_pkg::cfg_c::XLARGE    :/ 5,\
                                alutb_pkg::cfg_c::UNLIMITED :/ 10\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       \};\
   \}\
      \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="alu_exer",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : exer_test_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  test now overwrites the configuration class\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 const_knob_cnstr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  constraint with its new one.  Because the enumerated type is local to the scope of the configuration class, (which is local to the scope of the ALUTB package), you need to use the scoping operator twice.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Test Overrides\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sometimes you want to create a sequence for a semi-directed test case.  Perhaps you want to create an error case that you don\'92t want intermingling with your other sequences.  Or you want your driver to behave differently for a single test.\
Once again, this is where the factory comes in.  It is common practice to create a derived class of something else in the environment and place it in the test file, then use a factory override for that test only.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 11-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Create a new test, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 div0_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that sets the denominator of a divide operation to zero 50% of the time.  Do this by overriding the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  with a new transaction type, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 div0_item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  See what happens.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is one solution to the problem:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls103\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/div0.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 `include "basic.sv"\
\
//****************************************************************************************\
// class: div0_item_c\
// Causes a divide-by-zero on 50% of all divide operations\
class div0_item_c extends alu_pkg::item_c;\
   `uvm_object_utils(div0_item_c)\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    constraint protocol_cnstr \{\
      (operation == DIV_A_B) -> beta dist \{ 0 :/ 50,\
                                            [1:'hffff] :/ 50\};\
      (operation == DIV_B_A) -> alpha dist \{ 0 :/ 50,\
                                            [1:'hffff] :/ 50\};\
      (operation == SUB_A_B) -> alpha > beta;\
      (operation == SUB_B_A) -> beta > alpha;\
   \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="div0_item");\
      super.new(name);\
   endfunction : new\
endclass : div0_item_c\
\
//****************************************************************************************\
// class: div0_test_c\
// Uses the div0_item_c class instead\
class div0_test_c extends basic_test_c;\
   `uvm_component_utils(div0_test_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="div0_test",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       set_type_override_by_type(alu_pkg::item_c::get_type(), div0_item_c::get_type());\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : build_phase\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : div0_test_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Some notes:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    constraint protocol_cnstr \{\
      (operation == DIV_A_B) -> beta dist \{ 0 :/ 50,\
                                            [1:'hffff] :/ 50\};\
      (operation == DIV_B_A) -> alpha dist \{ 0 :/ 50,\
                                            [1:'hffff] :/ 50\};\
      (operation == SUB_A_B) -> alpha > beta;\
      (operation == SUB_B_A) -> beta > alpha;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This changes the constraints to have a zero in the denominator 50% of the time for division operations.  Note how we\'92ve used the distribution constraint on top of an implication constraint.  It was also necessary to put the subtraction constraints in because we cannot partially override a constraint block.\
And finally, the factory override method should now be familiar to you:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       set_type_override_by_type(alu_pkg::item_c::get_type(), div0_item_c::get_type());\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If your first inclination was to only perform the factory override 50% of the time, there\'92s really no effective way to do that.  Using constraints and overriding all transactions is the way to go.\
If you did everything correctly, you should find that the RTL puts X\'92s out as the result and the test fails.  Congratulations!  You\'92ve found your first bug.  The designer agrees and decides to use a denominator of 1 whenever a zero is seen instead.\
You can patch the RTL with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utut
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  script, like this:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utut fix 1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f1\b\fs24 \cf6 \expnd0\expndtw0\kerning0
\up0 \strokec6 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 Question
\f1 \cf6 \expnd0\expndtw0\kerning0
\up0 \strokec6 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 Now if you run your test again, you\'92ll find that the test passes.  But if you wrote your predictor the same way as the solution from Lesson 9, there\'92s a problem in there someplace, can you find it and fix it? \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Hint:
\b0 \expnd0\expndtw0\kerning0
 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
Look in the logfile.  It\'92s a problem that also plagues designers.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Answer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Only if you looked at your logfile would you likely find the problem.  It\'92s that the predictor we wrote also doesn\'92t have the fix and is calculating the result to be X.  But the result is no longer X and yet the test still passes.  What\'92s going on here?\
There are actually two problems.  The first is that the predictor is predicting X, and the second is that it\'92s not flagging an error.  \
If you recall, our comparison took place in the TLM imp function, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write_result()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void write_result(result_t _result);\
      if(_result != result)\
         `cn_err($psprintf("Actual result: %08X != Expected result: %08x",\
                           _result, result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : write_result\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Here, we\'92ve used an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 if
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  statement, and one of the operands is an X.  Just as in RTL, verification people have to beware that the if statement does not propagate an X.  The above test will not succeed, and no error gets printed.\
Of course, we need to modify the calculations to now match the RTL.  But we want to make sure that we don\'92t miss this issue again next time.\
To fix this you could use the else clause:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       if(_result == result)\
         ;\
      else\
         `cn_err($psprintf("Actual result: %08X != Expected result: %08x",\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5                            _result, result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 But this is a pretty terrible solution.  Fortunately, though, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 assert
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  statement does not have the same affliction as the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 if
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  statement.  This is the better solution:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls104\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       assert(_result == result) else\
         `cn_err($psprintf("Actual result: %08X != Expected result: %08x",\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5                            _result, result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And to fix the ALU predictor, you would change the two cases as follows:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls105\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          item_c::DIV_A_B :  result = k_val * (_item.alpha / (_item.beta? _item.beta : 1)) + c_val;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5          item_c::DIV_B_A :  result = k_val * (_item.beta  / (_item.alpha? _item.alpha : 1)) + c_val;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 While the rest of our jobs may be overly complicated, writing tests should be kept simple.  Vcomponents should each have a policy class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , instantiated in the base test and distributed to its components through the configuration database.  Tests should be created with the template generator.  Tweak it with some configurations and knobs, and maybe a factory override or two, and you\'92re done.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 12: Advanced Sequences I\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sequences and sequencers are so involved, they deserve three separate lessons!  This lesson will discuss how to better launch sequences to get a more random mix of traffic, how we can use the resource database to configure sequences, and what a persistent sequence is.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Default Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 So far we\'92ve seen two methods that we can use to launch sequences onto a sequencer.  From a component, we can create a sequence and call its start task, with a reference to the sequencer as an argument.  From another sequence, we can have it launch another sequence by calling one of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros.\
A second way that you can launch sequences from a component is by calling the sequencer\'92s task 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 execute_item()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  with an instance of the sequence.  This isn\'92t a whole lot different from calling the sequence\'92s start task, so there\'92s not much gain here.\
But there\'92s a third way as well.  When any phase of a sequencer is started, its function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_phase_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is run.  If there is a configuration item in the database called \'93
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 default_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 \'94 for this sequencer\'92s phase, then that sequence is run automatically.\
For example, to automatically launch a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  during the main phase, you would put this in your test\'92s build phase:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 uvm_config_db#(uvm_object_wrapper)::set(this, "alutb_env.alu_agent.sqr.main_phase", \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5                                         "default_sequence", alu_pkg::sum_array_seq_c::type_id::get());\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This will create, randomize, and launch a sequence of this type for you when the main phase starts.  If you want a very specific sequence to run, then the call is slightly different:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       alu_pkg::sum_of_factorials_seq_c sof_seq = new("sof");\
      sof_seq.randomize() with \{op_x == 1; op_y == 5;\};\
      uvm_config_db #(uvm_sequence_base)::set(this, "alutb_env.alu_agent.sqr.main_phase", \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5                                               "default_sequence", sof_seq);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Here, notice that we did not just \'91set\'92 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 op_x
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 op_y
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  We needed to randomize it for this to work, because UVM will randomize it for us if it hasn\'92t already been randomized, which would then squash our settings.\
Regardless of the method you choose, you\'92re probably wondering where all the benefit is.  Sure, it allows you to use the configuration database to start these sequences, but it only allows us to launch one sequence per phase.  What good is that?\
Well, if that sequence is one that happens to launch many other sequences, then it can be used to concisely do a whole lot more than what our basic test\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  currently does.  That\'92s where library sequences come into play.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Library Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Before we get too far into library sequences, it should be mentioned that these are new to UVM 1.1 and are not considered \'93production-level\'94.  As such, they are also not particularly well documented yet, either.\
A library sequence is a sequence that picks a random sequence, launches it, then picks another, and another, and another, until a specified count is reached.  This is an ideal method for creating highly random stimulus as it allows you to create a new sequence to test some feature, write a test that focuses on that sequence, and then add it to one or more library sequences to see how well it works with others. \
You might recall that when you created 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_lib.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that it created a class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lib_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and we had you comment it out.  Those few lines of code are a library sequence.  You can create as many library sequences as you wish.  And each library can have as many sequences as you wish.  To place a sequence into a library, you use the macro `
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_add_to_seq_lib
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  For example, to add our factorial sequence to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lib_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  library, you would add the following to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 factorial_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls106\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class factorial_seq_c extends uvm_sequence #(item_c, item_c);\
   `uvm_object_utils_begin(alu_pkg::factorial_seq_c)\
      `uvm_field_int(operand, UVM_ALL_ON)\
      `uvm_field_int(result,  UVM_ALL_ON)\
   `uvm_object_utils_end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_add_to_seq_lib(factorial_seq_c, lib_seq_c);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This macro must specify the type of the sequence and which library you want it to go into.  A sequence can call this macro more than once to be placed into different libraries.  You can create different library sequences to mix different types of sequences.  Your test can then set a library sequence as the default sequence for a particular phase, such as the main phase.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 12-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Add all of the sequences in your library sequence to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lib_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
Clear out the run phase of your basic test, and launch your new library sequence instead.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
To launch the sequences from your basic test, you should have altered it\'92s build phase as follows.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls107\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5     virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       uvm_config_db#(uvm_object_wrapper)::set(this, "alutb_env.alu_agent.sqr.main_phase", \
                                              "default_sequence", alu_pkg::lib_seq_c::type_id::get());\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 When you run this test, you should see 10 different random sequences chosen.  Of course, most of those sequences spawn other sequences and sequence items, so a lot more traffic will be seen.\
Now, all of your tests that derive from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will run your library sequence by default.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Library Sequence Configuration\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Our library sequence only runs 10 random sequences.  And it\'92s always random.  Maybe you want a more interesting pattern to choose from?  Once again, UVM uses the policy class pattern to help out.\
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_library_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class is the policy class that you can use to customize your library sequence.  It offers three different options: 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 selection_mode
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 min_random_count
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 max_random_count
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
The min and max random count options do just what you think.  When the sequence starts, it chooses a random number between these two numbers, and then sends that many sequences.\
The selection mode is an enumerated type that offers you four choices as to how sequences will be chosen:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth2525\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth4630\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f0\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 uvm_sequence_lib_mode
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Method
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2525\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4630\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 UVM_SEQ_LIB_RAND
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Select randomly (default)
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2525\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4630\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 UVM_SEQ_LIB_RANDC
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Random cyclic selection
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2525\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4630\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 UVM_SEQ_LIB_ITEM
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Send only items.  Does not send sequences.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2525\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4630\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 UVM_SEQ_LIB_USER
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Applies a user-defined selection algorithm.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
Random cyclic is a term we haven\'92t used so far in this tutorial.  It tells SystemVerilog to choose randomly from a list of items, but don\'92t choose an item again until the list has been exhausted.\
Sending only sequence items is a very useful scenario.  Essentially, the library sequence will just send random transactions, ignoring whatever sequences you put into it.  Sequence items, though, get responses.  And unfortunately, if you choose this selection mode, you will find that the library sequence\'92s response queue fills up.  To manage this, you would need to implement a response handler function that was described in Lesson 7.\
The user-defined algorithm has you create a function (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 select_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) that returns an unsigned integer between zero and its argument, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 max
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  At your disposal is the member field 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sequences
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is a queue of all the different sequences in the library, stored as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_object_wrapper
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  classes.  Calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_type_name()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  on each member gives the sequence\'92s name as a string.  The following example shows how you might distribute sequences in a library unevenly:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls108\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class lib_seq_c extends uvm_sequence_library #(item_c);\
   `uvm_object_utils(alu_pkg::lib_seq_c)\
   `uvm_sequence_library_utils(lib_seq_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: selector\
   // Distributes sequence selection unevenly when UVM_SEQ_LIB_USER is used\
   rand int unsigned selector;\
   constraint selector_cnstr \{ selector dist \{ 0 :/ 40, 1 :/ 20, 2 :/ 10, 3 :/ 30 \}; \}\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="seq_lib");\
      super.new(name);\
      init_sequence_library();\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: select_sequence\
   virtual function int unsigned select_sequence(int unsigned max);\
      randomize() with \{ selector < max; \};\
      return selector;\
   endfunction : select_sequence\
   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : lib_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Library sequences offer several more features that allow you to modify the list of sequences dynamically, such as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 add_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 remove_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 add_typewide_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which allows you to add a sequence type to all your library sequences at one time.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Persistent Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A persistent sequence is one that starts during some phase (at time zero, perhaps) and remains active for the remainder of the simulation.  Why would you want such a thing?\
Well, we know that a sequencer can have multiple active sequences, so it\'92s not as though your persistent sequence is the only thing happening.  Typically, your sequence will wait some period of time, or wait for some event to happen, and then will spring into action.  Here are a few possible examples of persistent sequences:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl264\slmult1\sa240\pardirnatural\qj
\ls109\ilvl0{\listtext	\'95	}Random Read Sequence.  Picks a random register to safely read, reads it, then waits for a random period of time.\
{\listtext	\'95	}Interrupt Handler.  Waits for some interrupt event to occur, locks down the sequencer, and begins the process of discovery and clearing of interrupts.\
{\listtext	\'95	}Sequence Adapter.  Let\'92s say that you had one sequencer that was spitting out messages and was feeding requests into your ALU agent for mathematical operations.  The writer of that agent doesn\'92t know about our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class, so is sending their own sequence items that need to be converted into 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
The ALU model has a second CSR called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ALU_RESULT
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  This CSR has a 32-bit read-clear field called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 SOR
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  which contains the sum of all results since it was last read. We\'92re going to add a sequence that reads and clears the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 SOR
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  register every time we believe that it should exceed 32\'91h100_000, and we will check to ensure that it does.\
Here\'92s how we\'92ll do it:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls110\ilvl0{\listtext	1.	}Pipe all monitored results into the ALU sequencer and put each one in a mailbox.\
{\listtext	2.	}Run a sequence starting at time zero that pulls from the mailbox and accumulates the expected SOR value.\
{\listtext	3.	}If the expected SOR value exceeds 32\'91h100_0000, then read the CSR to clear it.\
{\listtext	4.	}Ensure that the SOR field read a value greater than 32\'91h100_0000.\
{\listtext	5.	}Clear the expected SOR value that\'92s been accumulated so far.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
There are a whole slew of new concepts above.  \
The first one is the mailbox, which is a handy SystemVerilog construct.  It is a parameterized object that has 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  tasks to let you stuff objects in one place and pull them out of another.  It also has zero-time functions 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 try_put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 try_get
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  UVM offers you the choice of using a TLM FIFO here as well, but the mailbox will work fine for our purposes.\
The next concept is having the sequence pull from its sequencer\'92s mailbox.  How can a sequence get a handle to a mailbox in the sequencer?  Better yet:  how will it read from a CSR?  \
The answer is sequencer references.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Sequencer References\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  base class comes built-in with a reference back to the sequencer it\'92s running on.  This reference is called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 m_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Unfortunately, because it is declared in the base class as being of the type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , it\'92s not very useful by itself.  After all, the base class doesn\'92t have a mailbox of results.\
But, we could create our own reference and cast the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 m_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  back to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::sqr_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that we know it to be, like this:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    sqr_c my_sqr;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    $cast(my_sqr, m_sequencer);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It turns out that this is a pretty common thing to do, so UVM automated it.  We have written plenty of sequences so far that haven\'92t needed to reference the sequencer, so it\'92s an optional macro that you add to the class:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_declare_p_sequencer(sqr_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This macro call creates a reference, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that points to our sequencer and knows what kind it is.\
Before, all of our sequences were detached from the component hierarchy.  If we wanted to interact with any other components in the environment, we were out of luck.  But the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  handle 
\i \expnd0\expndtw0\kerning0
anchors
\i0 \expnd0\expndtw0\kerning0
 our sequence into the hierarchy.  This allows us to do 
\i \expnd0\expndtw0\kerning0
lots
\i0 \expnd0\expndtw0\kerning0
 of nifty new things with sequences.\
In addition to the tiny bit of overhead, the only drawback to declaring a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  handle with the macro is that now our sequence can only be run on this specific sequencer type.\
Sequences can be run on different sequencers?!?!  Yes, they can.  And they often do.  That\'92s a topic we\'92ll explore some more in Lesson 14.  Meantime, let\'92s see how this would all fit together.  It\'92s somewhat complicated at first, so we\'92ll do it in stages.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 12-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Add an analysis imp to your sequencer that accepts items of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result_t
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Also, create a mailbox that holds the same type.  Connect it to the analysis port from the monitor.  Print out the result each time one is received so you know that it\'92s working.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
To add the analysis imp and mailbox to the sequencer, you would put these in all the right places.  In 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sqr_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls111\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    uvm_analysis_imp #(result_t, sqr_c) monitored_result_imp;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    mailbox #(result_t) monitored_result_mbox;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Just as with TLM ports, you also need to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  your mailboxes.  They accept an argument that would limit the number of entries, but the default of zero permits an infinite number, and that should work fine for us:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls112\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       monitored_result_imp = new("monitored_result_imp", this);\
      monitored_result_mbox = new();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function for the analysis imp:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls113\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void write(result_t _result);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       monitored_result_mbox.try_put(_result);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `cn_info($psprintf("Received result %08X", _result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : write\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The one and only challenge here was the use of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 try_put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Because 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is always a function, and because a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to a mailbox could consume time (if it were full, for example), then we must use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 try_put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  And because it\'92s an infinitely large mailbox, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 try_put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will always succeed.\
Connecting to the monitor\'92s port in the agent should also be straightforward:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls114\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       if(!ref_model) begin\
         if(is_active) begin\
            drv.seq_item_port.connect(sqr.seq_item_export);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             mon.monitored_result_port.connect(sqr.monitored_result_imp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Be sure to only call this when both the monitor and the sequencer exist, which would be when the agent is active and not acting as a reference model.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Handling Cyclical Dependencies\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In the next problem, you\'92re going to write a sequence that declares its sequencer using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_declare_p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  But we\'92re also going to start it from that very sequencer.  This will create a cyclical dependency, because they both must know about each other.\
Fortunately, SystemVerilog supports forward references and late binding.  Simply adding a forward reference above your sequences in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_lib.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  tells the compiler: \'93It\'92s ok, I know what I\'92m doing here.\'94\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls115\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 // Forward declaration of sequencer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 typedef class sqr_c;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now, the compiler sees the
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  `uvm_declare_p_sequencer(sqr_c)
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and knows that 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sqr_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  refers to some class, which will later be declared.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 12-3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
So, let\'92s write our persistent sequence, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sor_clr_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  It should constantly try to pull results from its sequencer\'92s mailbox and accumulate them.  Hold off on actually performing the CSR read for now.  When the sum reaches or exceeds the value \'91h100_0000, announce with a print that it\'92s time to read the CSR.  Then clear your accumulated value.\
Have the sequencer itself start this sequence.  Run the basic test to ensure that it\'92s doing its job.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is the sequence that does the job:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls116\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class sor_clr_seq_c extends uvm_sequence#(item_c);\
   `uvm_object_utils(alu_pkg::sor_clr_seq_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    `uvm_declare_p_sequencer(sqr_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="sor_clr_seq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      result_t accum_result = 0;\
      result_t new_result;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       forever begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          // get the next monitored transaction and add it to the accumulated results\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          p_sequencer.monitored_result_mbox.get(new_result);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          accum_result += new_result;\
         `cn_dbg(30, $psprintf("accum_result = %8X", accum_result))\
\
         if(accum_result >= 32'h100_0000) begin\
               `cn_info(\'93Time to read the RESULT CSR!\'94)\
               // clear out accum_result\
               accum_result = 0;\
         end\
      end\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : sor_clr_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The solution declares the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  handle using the macro.  It runs in a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 forever
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  loop and calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to fetch the latest result from the sequencer, using our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  handle.\
And here is how the sequence is launched from the sequencer\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls117\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task run_phase(uvm_phase phase);\
      sor_clr_seq_c sor_clr_seq = sor_clr_seq_c::type_id::create("sor_clr_seq");\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       sor_clr_seq.start(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : run_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 When you start a sequence, you have to give it a handle to the sequencer that it\'92s supposed to run on, which just like in C++ is represented by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 this
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 12-4\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Now, replace your print statement with the actual read of the CSR.  Follow that up with a check that ensures that the sum actually does exceed 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 \'91h100_0000
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  How do you go about accessing the CSR from a sequence?\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
If you did all of that correctly, it\'92s entirely possible that your test will fail.  We\'92ll discuss why it might fail and what can be done about it soon.  But first a solution.\
The CSR register blocks and files are all within the component hierarchy.  So to use these, the sequence will have to reach down into its own sequencer via the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  handle.  We were able to get the register block in the predictor, so we should be able to do that here, too.  Start by declaring the register block in the sequencer:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls118\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // var: reg_block\
   // Auto-generated Register block\
   alu_csr_pkg::alu_ncb_reg_block_c reg_block;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now that the register block is in the sequencer, the sequence can easily access it.  Here is what was done to its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task.  All of the changes are in bold:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls119\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task body();\
      result_t accum_result = 0;\
      result_t new_result;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       uvm_status_e status;\
      uvm_reg result_reg = p_sequencer.reg_block.ALU_RESULT;\
      uvm_reg_data_t sor_value;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       \
      forever begin\
         // get the next monitored transaction and add it to the accumulated results\
         p_sequencer.monitored_item_mbox.get(new_result);\
         accum_result += new_result;\
         `cn_dbg(30, $psprintf("accum_result = %8X", accum_result))\
\
         if(accum_result >= 32'h100_0000) begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             result_reg.read(status, sor_value);\
\
            // ensure status was ok\
            if(status == UVM_NOT_OK) begin\
               `cn_err("Unable to read from ALU_RESULT register.")\
            end else begin\
               // ensure that current value exceeds 'h100_0000\
               `cn_dbg(30, $psprintf("SOR read as %08X", sor_value))\
               if(sor_value < 'h100_0000)\
                  `cn_err($psprintf("Read from ALU_RESULT[SOR] but its value was %08X", sor_value))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5                   \
               // clear out accum_result\
               accum_result = 0;\
            end\
         end\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve been using them all along, but it\'92s worth repeating:  SystemVerilog uses implicit handles all over the place.  This bit of code doesn\'92t create anything new, it just assigns a handle to the register:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       uvm_reg result_reg = p_sequencer.alutb_reg_block.ALU_RESULT;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If instead of calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 read
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  you called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mirror
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and then look at the CSR\'92s value, you would have seen a value of zero, which is not the value that was read.  This is because the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mirror
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task performs the read, then updates it\'92s expected value of the CSR.  Because it\'92s declared as read-clear (\'93RC\'94), it will now be zero.\
Calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 read
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , though, actually gives you the value that was read.  And, it\'92s always safe to check that the status of the read was OK.\
Now, if you did all of this correctly, your test may still fail--under the right circumstances--with an error like this one:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 %E-(_alu_seq_lib.sv:___312)_[alutb_env.alu_agent.sqr.sor_clr_seq_]_\{__1008ns\} Read from ALU_RESULT[SOR] but its value was 000215b3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 How is it that we did not read out something greater than \'91h100_0000?\
The answer lies in the ordering of sequences and the way the RTL was written.  We submitted a read to the sequencer that handles NCB transactions, but these take a certain amount of time to occur.  In the meantime, other ALU traffic is going on.  If a read happens in the exact same cycle that a new result occurs, then the SOR field will not go to zero, but will go to the value of the new result, which is what you would want in an accumulating CSR.  Because the reads take an indeterminate amount of time, multiple results may have been put into the mailbox before the first read completes, and has cleared out the CSR value.  Then, your sequence reads all of these mailbox entries in zero time and quickly accumulates beyond the threshold, but is now out of sync with the real value.\
The solution to this problem is to stop the sequencer from issuing new ALU traffic while an NCB read is happening.  Previously, we had called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lock()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 unlock()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to give our sequence exclusive access.  But, locking a sequencer actually isn\'92t even fast enough, because lock can be preempted by other traffic--potentially 
\i \expnd0\expndtw0\kerning0
lots
\i0 \expnd0\expndtw0\kerning0
 of other traffic.  When our sequence needs to read from the CSR, it needs to do so before any more ALU requests go through.  The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 grab()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ungrab()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  functions will do the trick, because these are prioritized over all other traffic.  \
Also, because the read consumes time, it is possible that any sequences which had launched prior to the grab() would now have their results in the results mailbox, these should be cleared out, too.  Otherwise, our accumulated result will not be correct.\
If you add these to your sequence just before and just after the read, you will find that your test now passes.  Below is the complete solution:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls120\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task body();\
      result_t accum_result = 0;\
      result_t new_result;\
      uvm_status_e status;\
      uvm_reg result_reg = p_sequencer.reg_block.ALU_RESULT;\
      uvm_reg_data_t sor_value;\
      \
      forever begin\
         // get the next monitored transaction and add it to the accumulated results\
         p_sequencer.monitored_result_mbox.get(new_result);\
         accum_result += new_result;\
         `cn_dbg(30, $psprintf("accum_result = %8X", accum_result))\
         \
         if(accum_result >= 32'h100_0000) begin\
            grab();\
            result_reg.read(status, sor_value);\
            \
            // ensure status was ok\
            if(status == UVM_NOT_OK) begin\
               `cn_err("Unable to read from ALU_RESULT register.")\
            end else begin\
               // ensure that current value exceeds 'h100_0000\
               `cn_dbg(30, $psprintf("SOR read as %08X", sor_value))\
               if(sor_value < 'h100_0000)\
                 `cn_err($psprintf("Read from ALU_RESULT[SOR] but its value was %08X", sor_value))\
               \
               // clear out accum_result\
               accum_result = 0;\
\
               // empty out mailbox in case any have been added since the read started\
               while(p_sequencer.monitored_result_mbox.try_get(new_result))\
                  ;\
            end\
            ungrab();\
         end\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Sequence Configurations\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Let\'92s say that we didn\'92t always want to perform the read on such a specific value as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 \'91h100_0000
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Maybe we want to make our sequence 
\i \expnd0\expndtw0\kerning0
configurable
\i0 \expnd0\expndtw0\kerning0
.\
We can configure components through the resource database, so why not sequences as well?  Well, sequences don\'92t have a build phase like components do, so they don\'92t benefit from the magic call to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to automatically populate their configurable fields.\
You could put explicit set and get calls in your code, like this set in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the basic test: \
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls121\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       uvm_resource_db#(alu_pkg::result_t)::set("alu::sor_clr_seq", "trigger_value", 'h300_0000);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And then by placing the get call in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sor_clr_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls122\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_seq_lib.sv  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5      trigger_value = uvm_resource_db#(result_t)::get_by_name("alu::sor_clr_seq",\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5                                                               "trigger_value").read();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
While this works, these calls are not very attractive.  Alternatively, you can have this trigger value be a standard configuration field in your 
\i \expnd0\expndtw0\kerning0
sequencer
\i0 \expnd0\expndtw0\kerning0
, and then access it from the sequence using the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  handle.  \
This gives you a simple and consistent method for setting knobs and configurations for your sequences.  Just be sure not to over-pollute the sequencer with fields that sequences may conflict upon.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Would it surprise you to realize that we\'92ve only really just scratched the surface of what sequences and sequencers are capable of?  Wait until they\'92re 
\i \expnd0\expndtw0\kerning0
virtualized
\i0 \expnd0\expndtw0\kerning0
!\
\
\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 13: A New Testbench\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It shouldn\'92t surprise you that our ALU module doesn\'92t live all by itself.  All block-level testbenches are to be reused in a higher level environment, and the ALU is no different.  Fortunately, the ALU subsystem isn\'92t a whole lot more complicated, and most of the work has already been done for you.  Integrating your ALU vcomponent with another vcomponent in a new testbench is the objective of this lesson.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 The ALU Framer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 18__#$!@%!#__pastedGraphic.pdf \width6360 \height3860
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 This diagram shows the complete ALU block, which consists of the unit you have been verifying, together with it\'92s cousin the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 framer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  block.  ALU results are pushed into the framer\'92s FIFO one at a time.  A frame length (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frame_len
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , valid on the clock cycle in which 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frame_len_val
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is high) is specified to the framer.  When the depth of the FIFO reaches the frame length, all of the results are pushed out as a complete frame, one 32-bit result word at a time.  The framer can only accept one frame length request at a time.  Once the frame has been completed, a new frame length can be specified.\
The FIFO is 32 quadwords deep, the maximum length of a frame.  If it begins to fill up, a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frame_bp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal will be asserted high, indicating that no more ALU transactions should be sent in.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Creating the FRM Testbench\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The objective of this lesson is merely to create the new testbench.  Fortunately, a script will get you most of the way there.  And, the framer vcomponent is already available to you in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/frm
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
But first, let\'92s see what the environment will look like by the time we\'92re done.  We\'92re going to look at it using the topology report that you may have seen at the beginning of your logfiles.  Some lines have been deleted for the sake of brevity:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 -----------------------------------------------------------------------------------------------------\
Name                                        Type       Size  Value                                    \
-----------------------------------------------------------------------------------------------------\
<unnamed>                         uvm_root               -   @162                                     \
   uvm_test_top                   basic_test_c           -   @596                                     \
      env                         frm_pkg::env_c         -   @669                                     \
         alu_agent                alu_pkg::agent_c       -   @738                                     \
            drv                   alu_pkg::drv_c         -   @761                                     \
            mon                   alu_pkg::mon_c         -   @753                                     \
            monitored_result_port uvm_analysis_port      -   @919                                     \
            monitored_item_port   uvm_analysis_port      -   @910                                     \
            pred                  pred_c                 -   @948                                     \
            sqr                   alu_pkg::sqr_c         -   @787                                     \
            item_logger           vm_component           -   @931                                     \
         frm_agent                frm_pkg::agent_c       -   @712                                     \
            drv                   frm_pkg::drv_c         -   @1134                                    \
            mon                   frm_pkg::mon_c         -   @1126                                    \
            sqr                   frm_pkg::sqr_c         -   @1160                                    \
         ncb_env                  ncb_pkg::env_c         -   @724                                     \
         cfg                      frm_pkg::cfg_c         -   @622                                     \
         reg_block                alutb_pkg::reg_block_c -   @623                                     \
      global_env                  global_pkg::env_c      -   @614                                     \
         watchdog                 global_pkg::watchdog_c -   @2790                                    \
      tb_clk_drv                  clk_drv_c              -   @683                                     \
      cfg                         frm_pkg::cfg_c         -   @622                                     \
         reg_block                alutb_pkg::reg_block_c -   @623                                     \
      reg_block                   alutb_pkg::reg_block_c -   @623                                     \
         ALU_CONST                alu_const_reg_c        -   @629                                     \
            C_VAL                 uvm_reg_field          ...  RW ALU_CONST[7:0]=8'h2a (Mirror: 8'h00) \
            K_VAL                 uvm_reg_field          ...  RW ALU_CONST[15:8]=8'h67 (Mirror: 8'h00)\
            RSVD0                 uvm_reg_field          ...  RO ALU_CONST[63:16]=48'h000000000000    \
         ALU_RESULT               alu_result_reg_c       -   @634                                     \
            SOR                   uvm_reg_field          ...  RC ALU_RESULT[31:0]=32'h00000000        \
            RSVD0                 uvm_reg_field          ...  RO ALU_RESULT[63:32]=32'h00000000       \
         NCB                      uvm_reg_map            -   @625                                     \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 -----------------------------------------------------------------------------------------------------\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM\'92s handy topology report is an easy way to see the structure of the testbench, how random configurations were chosen, and what the values of all the CSRs will be after configuration.\
As you can see, it looks pretty similar to the ALUTB environment, with the addition of the framer agent, also written for you.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 UVM New Testbench (untb)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Like 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 untb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  script will generate a lot of the boilerplate code for you.  It\'92s quite simple to use:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 verif>
\f3\b0 \kerning1\expnd-2\expndtw-8
 untb frm\
++ Creating Testbench verif/frm\
++ Creating frm_tb_top.sv\
++ Creating base_test.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 ++ Creating basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 That was simple.  Unfortunately, there\'92s still quite a bit of work to do before you\'92ll be able to run it.\
The script creates the standard Makefile, flists, the top-level testbench, and the base test and basic test.  The first thing to do is add the vcomponents this testbench will need.  You\'92ll want to change the Makefile so that the FLISTS variable is set like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls123\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/frm/Makefile\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 FLISTS= verif/vcomponents/cn/cn.flist \\\
   verif/vcomponents/global/global.flist \\\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    verif/vcomponents/ncb/ncb.flist \\\
   verif/vcomponents/alu/alu.flist \\\
   verif/vcomponents/alutb/alutb.flist \\\
   verif/vcomponents/frm/frm.flist \\\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    verif/frm/frm.flist \\\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    verif/frm/rtl.flist\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You\'92ll also want to change the CSR packages list to point to the one in the ALUTB vcomponent, since we\'92re just reusing that one:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls124\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/frm/Makefile\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 CSR_PKGS = $(ROOT_DIR)/verif/vcomponents/reg/obj/unit/regs__alu.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rtl.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file can just be copied from the one in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb/rtl.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  since both testbenches will be using the same RTL.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 13-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Modify the top-level testbench, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_tb_top.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , to create all interfaces and instantiate the DUT as needed.  You may use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_wrapper.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file from the ALUTB testbench, or you can instantiate the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directly in the top-level.  The testbench will be largely the same as the one used by ALUTB with the addition of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  interface.\
You will also need to make some changes to the base test.  Namely, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will be in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , the NCB interface names must be assigned, and the register block must be tied to the NCB register adapter (see the ALUTB base test\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 connect_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
In the top-level testbench, you need to instantiate the NCB interface, the ALU interface, and the ALU wrapper.  You also need to push the interfaces into the configuration database.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls125\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/frm/frm_tb_top.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // obj: ncb_i\
   // The <ncb_intf> instance.\
   ncb_intf ncb_i(.clk(tb_clk), .reset_n(tb_rst_n));\
\
   // obj: alu_i\
   // The <alu_intf> instance\
   alu_intf alu_i(.clk(tb_clk), .rst_n(tb_rst_n));\
\
   //----------------------------------------------------------------------------------------\
   // Group: DUT\
   // (Instantiate the DUT and other modules here)\
   alu_wrapper alu_wrapper(/*AUTOINST*/\
                           // Interfaces\
                           .ncb_i               (ncb_i),\
                           .alu_i               (alu_i),\
                           .frm_i               (frm_i),\
                           // Inputs\
                           .tb_clk              (tb_clk),\
                           .tb_rst_n            (tb_rst_n));\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Procedural Blocks\
   function void pre_run_test();\
      uvm_config_db#(virtual cn_clk_intf)   ::set(uvm_root::get(), "*", "tb_clk_vi",  tb_clk_i);\
\
      // NCB Interfaces\
      uvm_config_db#(virtual ncb_inb_intf.drv_mp)::set(uvm_root::get(), "*", "ncb::inb_drv_vi", \
                     ncb_i.inb.drv_mp);\
      uvm_config_db#(virtual ncb_inb_intf.mon_mp)::set(uvm_root::get(), "*", "ncb::inb_mon_vi",\
                     ncb_i.inb.mon_mp);\
      uvm_config_db#(virtual ncb_outb_intf.drv_mp)::set(uvm_root::get(), "*", "ncb::outb_drv_vi", \
                     ncb_i.outb.drv_mp);\
      uvm_config_db#(virtual ncb_outb_intf.mon_mp)::set(uvm_root::get(), "*", "ncbLLoutb_mon_vi",  \
                     ncb_i.outb.mon_mp);\
      uvm_config_db#(virtual ncb_outb_intf.outb_bp_mp)::set(uvm_root::get(), "*", \
                     "ncb_outb_bp_mon_vi",\
                     ncb_i.outb.outb_bp_mp);\
      uvm_config_db#(virtual ncb_inb_intf.arb_drv_mp)::set(uvm_root::get(), "*", "ncb::arb_drv_vi", \
                     ncb_i.inb.arb_drv_mp);\
      uvm_config_db#(virtual ncb_inb_intf.arb_mon_mp)::set(uvm_root::get(), "*", "ncb::arb_mon_vi",\
                     ncb_i.inb.arb_mon_mp);\
\
      // ALU Interfaces\
      uvm_config_db#(virtual alu_intf.drv_mp) ::set(uvm_root::get(), "*", "alu::drv_vi", \
                     alu_i.drv_mp);\
      uvm_config_db#(virtual alu_intf.mon_mp) ::set(uvm_root::get(), "*", "alu::mon_vi", \
                     alu_i.mon_mp);\
\
      // FRM Interfaces\
      uvm_config_db#(virtual frm_intf.drv_mp) ::set(uvm_root::get(), "*", "frm_drv_vi", frm_i.drv_mp);\
      uvm_config_db#(virtual frm_intf.mon_mp) ::set(uvm_root::get(), "*", "frm_mon_vi", frm_i.mon_mp);\
   endfunction : pre_run_test\
   \
   // proc: Reset Busses\
   // Clear the ncb/rsl blocks\
   initial begin\
      // clear out the ncb\
      ncb_i.reset();\
      alu_i.reset();\
      frm_i.reset();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    end \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_wrapper.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file, you need to have the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  interface as an input, and wire it up to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  block.  In the base test, the register block comes not from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_pkg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  In its build phase, you need to set the interface name for the NCB interface:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls126\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/frm/alu_wrapper.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       // set up the frm env\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       set_config_string("env.ncb_env",    "intf_name",    "ncb_vi");\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Lesson 14: Advanced Sequences II\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Virtual sequencers solve the important problem of how to create a sequence that controls more than one agent at a time.  We will discuss these as well as more exotic uses of sequences such as adapter sequences.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Virtual Sequences and Sequencers\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We know that a sequencer arbitrates among sequences and forwards sequence items--usually to a driver.  Virtual sequencers are just a little bit different.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Virtual Sequencer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 A virtual sequencer is one that does not send sequence items.  Instead, it holds references to other sequencers and forwards sequences onto those sequencers.  Virtual sequencers are not parameterized with a request or response type.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 Likewise:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf7 \expnd0\expndtw0\kerning0
\strokec7 Virtual Sequence\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural

\b0 \cf7 \expnd0\expndtw0\kerning0
\strokec7 A virtual sequence is any sequence that is running on a virtual sequencer.  It is not parameterized to send requests and responses through a 
\f3\fs22 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 seq_item_port
\f0\fs24 \cf7 \expnd0\expndtw0\kerning0
\up0 \strokec7 .  It may push sequence items or other sequences, but it always pushes them to a sequencer that is referenced by the virtual sequencer on which it is running.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 19__#$!@%!#__pastedGraphic.pdf \width2820 \height3260
}}
\f0 \cf7 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec7 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 The current 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_pkg::env_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  environment contains the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but does not contain the virtual sequencer (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 vsqr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).  Our goal is to create this sequencer, and then run virtual sequences on it that are capable of touching both agents.\
As can be seen from the diagram, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 vsqr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  component references the individual sequencers in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  These are referred to as its subsequencers.  The references should be set during the environment\'92s connect phase.  You can also add the register block to the virtual sequencer, in case any of the sequences running on it need to access CSRs.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 14-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Create the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_pkg::vsqr_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  component using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  (with the template named 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 vsqr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), populate the references to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  sequencers, and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance, and instantiated it within 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_pkg::env_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\b0\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  provides most of what you need.  All that needs to be done is to add the references.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls127\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/frm/frm_vsqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 // class: vsqr_c\
// Virtual sequencer holding references to frm_sqr and alu_sqr\
class vsqr_c extends uvm_sequencer;\
   `uvm_component_utils_begin(frm_pkg::vsqr_c)\
      `uvm_field_object(frm_sqr,         UVM_REFERENCE)\
      `uvm_field_object(alu_sqr,         UVM_REFERENCE)\
      `uvm_field_object(alutb_reg_block, UVM_REFERENCE)\
   `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Sequencer references\
\
   // var: frm_sqr\
   sqr_c frm_sqr;\
\
   // var: alu_sqr\
   alu_pkg::sqr_c alu_sqr;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: reg_block\
   // alutb register block (reference to the one in cfg)\
   alu_csr_pkg::alu_ncb_reg_block_c alutb_reg_block;\
      \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="vsqr",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : vsqr_c   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note that the build phase is not used to create the subsequencers.\
In the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_pkg::env_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , the virtual sequencer is instantiated in the usual manner and the connect phase is used to perform the assignments.  If either of the sequencers are not present (which would happen if either agent were accidentally set to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_PASSIVE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), then a fatal error is reported:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls128\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/frm/frm_env.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void connect_phase(uvm_phase phase);\
      super.connect_phase(phase);\
\
      if(!frm_agent.sqr || !alu_agent.sqr)\
         `cn_fatal("fram_agent.sqr or alu_agent.sqr are not present!")\
\
      vsqr.frm_sqr = frm_agent.sqr;\
      vsqr.alu_sqr = alu_agent.sqr;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 109   endfunction : connect_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Virtual Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Virtual sequences are generally only different from other sequences in three ways.  \
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls129\ilvl0{\listtext	1.	}First, they launch their sequences and sequence items using the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_on
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  family of macros, specifying the reference to the sequencer on which to launch the item as their second argument.  \
{\listtext	2.	}Second, in order to refer to their sequencer\'92s subsequencers they must call the macro 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_declare_p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  \
{\listtext	3.	}Third, library sequences do not support virtual sequences (as of UVM 1.1).\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
The example virtual sequence below launches a random frame sequence item and an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::exer_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in parallel, with the number of ALU transactions matching the expected number in the frame.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls130\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/frm/frm_vseq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class basic_vseq_c extends uvm_sequence;\
   `uvm_object_utils(frm_pkg::basic_vseq_c)\
   `uvm_declare_p_sequencer(vsqr_c)\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="basic_vseq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      frame_c frame;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       alu_pkg::exer_seq_c alu_exer_seq;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       \
      // create and randomize to see how many ALU transactions to send\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_create_on(frame, p_sequencer.frm_sqr)\
      frame.randomize();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 \
      `cn_info($psprintf("Sending this frame: %s", frame.convert2string()))\
      \
      fork\
         begin : send_frame\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             `uvm_send(frame);\
            get_response(rsp);\
            `cn_info($psprintf("Frame completed: %s", rsp.convert2string()))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          end\
         \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          `uvm_do_on_with(alu_exer_seq, p_sequencer.alu_sqr, \{ count == frame.frame_len; \})\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       join\
\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : basic_vseq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Some explanations are below:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       alu_pkg::exer_seq_c alu_exer_seq;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Instead of creating our own sequence which runs a number of random ALU transactions, we can just re-use sequences from other vcomponents that this vcomponent is aware of.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_create_on(frame, p_sequencer.frm_sqr)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5       frame.randomize();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We want to randomize the frame ourselves so that we know how many ALU transactions to send in.  Since a sequence\'92s sequencer must be determined at the time of its creation, UVM provides the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_create_on
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro.  Because we declared the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_declare_p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that is how we reference the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_sqr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             `uvm_send(frame);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Since the frame has already been created and randomized, we do not use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_on
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but instead we just want to launch it. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             get_response(rsp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5             `cn_info($psprintf("Frame completed: %s", rsp.convert2string()))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We sent in an object derived from sequence item (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frame_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), so we need to get the response.  In this agent, the response frame will not return until the frame with all its data has been pushed out of the framer block.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          `uvm_do_on_with(alu_exer_seq, p_sequencer.alu_sqr, \{ count == frame.frame_len; \})\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Here, we are doing a sequence, specifying the non-virtual sequencer to do it on, and supplying the correct count of ALU transactions to run.  UVM offers the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_on_with
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro for just such an occasion.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 14-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Nothing about the framer block says that the frame length has to be specified before or after the ALU transactions associated with it.  In the file 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vcomponents/frm_vseq_lib.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , write a virtual sequence called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_delay_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that varies which one comes first.  Write another sequence, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that executes a random number of these.  Set this as the default sequence of the test in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/frm/tests/basic.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
See if you can find anything wrong with the simulation.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
This implementation of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_delay_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  randomizes a signed integer between -100ns and 100ns.  If the random delay is positive, it delays the frame first.  If it is negative, it delays the ALU sequence instead.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls131\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/frm/frm_vseq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class basic_delay_vseq_c extends uvm_sequence;\
   `uvm_object_utils(frm_pkg::basic_delay_vseq_c)\
   `uvm_declare_p_sequencer(vsqr_c)\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // frame_delay_ns\
   // Delay of sending the frame, with respect to starting the ALU transactions\
   // If frame_delay_ns is negative, then send the frame first, otherwise, send transactions first\
   rand int frame_delay_ns;\
   constraint frame_delay_cnstr \{ frame_delay_ns inside \{[-100:100]\}; \}\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="basic_delay_vseq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      frame_c frame;\
      alu_pkg::exer_seq_c alu_exer_seq;\
      \
      // create and randomize to see how many ALU transactions to send\
      `uvm_create_on(frame, p_sequencer.frm_sqr)\
      frame.randomize();\
\
      `cn_info($psprintf("Sending this frame: %s", frame.convert2string()))\
      \
      fork\
         begin\
            if(frame_delay_ns > 0)\
               #(frame_delay_ns * 1ns);\
            `uvm_send(frame);\
            get_response(rsp);\
            `cn_info($psprintf("Frame completed: %s", rsp.convert2string()))\
         end\
\
         begin\
            if(frame_delay_ns < 0)\
               #((-frame_delay_ns) * 1ns);\
            `uvm_do_on_with(alu_exer_seq, p_sequencer.alu_sqr, \{ count == frame.frame_len; \})\
         end\
      join\
\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : basic_delay_vseq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The exerciser sequence is a virtual sequence because it is running on a virtual sequencer.  But it only launches sequences of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_delay_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which run on the same sequencer as it does.  So, it does not need to use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_on
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and does not need to refer to any of the subsequencers.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls132\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/frm/frm_vseq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 class exer_vseq_c extends uvm_sequence;\
   `uvm_object_utils_begin(frm_pkg::exer_vseq_c)\
      `uvm_field_int(count, UVM_ALL_ON | UVM_DEC)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: count\
   // The number of basic_vseq to do\
   rand int count;\
   constraint count_cnstr \{ count inside \{[20:100]\}; \}\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="exer_vseq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      basic_delay_vseq_c vseq;\
      `cn_info($psprintf(\'93Transmitting %0d frames.\'94, count))\
      repeat(count)\
         `uvm_do(vseq)\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endclass : exer_vseq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Everything about this test should seem to work.  There is a problem, though.  While your sequence prints that it\'92s transmitting a certain number of frames, it will probably actually send fewer than that.\
The problem is that the main phase of the simulation can end during the body of your sequence, and your sequence will never complete.  That\'92s because UVM does not implicitly wait for a component\'92s default sequence to finish before moving on to the next phase.  After all, it might be a persistent sequence that never ends.\
We\'92ll discuss this in more detail in Appendix A.  In the meantime, you can solve this problem by having the sequence explicitly raise and drop the phase\'92s objection.  Do this by adding the following code to your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls133\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/frm/frm_vseq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task body();\
      basic_delay_vseq_c vseq;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `cn_seq_raise\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `cn_info($psprintf(\'93Transmitting %0d frames.\'94, count))\
      repeat(count)\
         `uvm_do(vseq)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `cn_seq_drop\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Adapter Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 With the example of virtual sequences, we have seen how block-level sequences can be re-used in higher-level testbenches by continuing to be run on the same sequencers for which they were designed.  But what if, upon moving up to the full-chip level, you wanted to operate the same sequences on a different sequencer?\
At a higher level your ALU agent may be passive, and the stimulus to the ALU block is instead fed by another RTL block.  But, you\'92ve gone to a lot of trouble creating sequences that stimulate the ALU just the way you like them, why should you have to re-do them for a different interface?  This is where adapter sequences can help.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 One-to-One\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A simple example would be a feeder block that received NCB store transactions that were then converted to ALU transactions.  The objective would be to use the ALU stimulus that was already created for its block-level testbench in this higher-level testbench.  To accomplish this, an ALU agent\'92s sequencer could be directed to feed its ALU transactions stream to a port instantiated inside a feeder agent\'92s sequencer instead of its own driver.  On this sequencer is running an adapter sequence which is a persistent sequence that constantly pulls from the port just as a driver would.  It then converts each transaction to the correct NCB transaction type, and drives them out its own sequencer.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 20__#$!@%!#__pastedGraphic.pdf \width8960 \height5420
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 This works well when there is a one-to-one correlation between the sequence items.  In this case, an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is directly converted to an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ncb_pkg::outb_trans_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  And, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::result_t
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is converted to an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ncb_pkg::inb_trans_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
The basic algorithm for the adapter sequence\'92s body would be as follows, where creation and conversion is done in an algorithm called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 convert_to_ncb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls134\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    task body();\
      alu_pkg::item_c alu_item;\
\
      forever begin\
         p_sequencer.alu_item_port.get_next_item(alu_item);\
         
\f4\b \kerning1\expnd-2\expndtw-8
convert_to_ncb
\f3\b0 \kerning1\expnd-2\expndtw-8
(outb_trans, alu_item);\
         `uvm_send(outb_trans);\
         alu_item.result = read_result();\
         p_sequencer.alu_item_port.item_done(alu_item);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs24 \cf4 \expnd0\expndtw0\kerning0
\strokec4 One-to-Many\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Alternatively, what if the feeder block took several outbound NCB transactions to perform one ALU transaction?  The feeder block might hypothetically operate by writing the A value to one CSR, the B value to a another CSR, and the operation type to a third CSR.  An adapter sequence would also be the right choice here, as it would merely send three outbound NCB transactions for every one ALU transaction.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Many-to-One\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A more complex example is one that has a many-to-one mapping of sequence items.  The feeder block instead might receive NCB transactions that write a block of data into it, and then an NCB request that starts summing all of the numbers to be summed, with a polling mechanism to indicate when the transaction is complete.\
We already have a sequence that sums an array.  It even checks the final result for us.  But, it transmits multiple transactions that need to be lumped into one transaction.  The adapter sequence would have to be smart enough to know how to do this, and that may not be practical.  Thought must be given to how and where complex scenario prediction should take place.  In this example, an adapter sequence may not be the right solution, and putting the prediction within the sequence may have been a mistake because it would not be reusable in the higher-level testbench.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Adding Time Delays\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 One problem that our ALU agent suffers from is that all of the transactions are bunched together and driven as quickly as possible.  As soon as one request is complete, it immediately fetches another one and drives it.  While this makes for quick simulations, it probably does not represent realistic traffic conditions.  There are two practical methods that can be used to solve this: adding delays in the sequence or adding delays to each transaction.\
A sequence knows nothing of interfaces, signals, or clocks, because it has no virtual interfaces to attach to.  If you want to create delays between transactions based on absolute time, then putting delays in a sequence before sending a sequence item works great.\
If the frequency of your driver\'92s clock is apt to change, though, the delays you incorporate into your sequences will unfortunately not vary along with it.  Basing the delay on the clock frequency might be the better alternative in this case.  To do so, you specify a random delay 
\i \expnd0\expndtw0\kerning0
per transaction
\i0 \expnd0\expndtw0\kerning0
.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 14-3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Add a field to the ALU\'92s transaction class that indicates the number of clocks that the driver should wait before sending it.  It should be constrained to a reasonable value, and optimally should be biased towards realistic conditions.\
Then, implement the wait in the driver and see the results.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Adding the delay field to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class is simple.  One thing you have to do, though, is ensure that when you declare the field with the macros that you add the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_NOPACK
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_NOCOMPARE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  flags:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls135\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `uvm_field_int (delay_in_clocks, UVM_ALL_ON | UVM_NOPACK | UVM_NOCOMPARE | UVM_DEC)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It is also worthwhile specifying in the name and comments what the timescale is for this delay.  By naming it 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 delay_in_clocks
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , it\'92s clear how this delay will be used.\
Then, declare the field and a typical constraint for it:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls136\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    // var: delay_in_clocks\
   // The number of clocks that the driver should delay before transmitting this transaction\
   rand int unsigned delay_in_clocks;\
   constraint delay_cnstr \{\
      delay_in_clocks dist \{ 0 :/ 40,\
                             [1:10] :/20,\
                             [11:30] :/20,\
                             [31:100] :/ 10\
                             \};\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Finally, the ALU driver should obey the transaction delay as soon as it\'92s fetched from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 seq_item_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls137\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}verif/vcomponents/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          seq_item_port.get_next_item(req);\
\
         // wait the correct number of clocks before sending\
         repeat(req.delay_in_clocks)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5             @(drv_vi.drv_cb);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 After doing this, you will notice that your transactions will now have gaps between them and the transaction stream is more realistic.  You can then create derived transactions and use the factory to modify the distribution constraints to suit your needs.  Better yet, you can add knobs to your vcomponent\'92s CFG class as discussed in Lesson 11.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this lesson, we learned the important concept of virtual sequences and sequencers.  We also saw how adapter sequences can be re-used to take a sequence that resides on one interface and drive it on the next.  Finally, we discussed how time delays between transactions can be achieved.\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix A: Phases and Heartbeats\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Cavium\'92s global environment contains both a watchdog timer and a heartbeat monitor.  Together with UVM\'92s phase objections, these components work together to ensure that simulation jobs are not running away needlessly.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Watchdog Timer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The watchdog timer will issue a fatal error when the simulation time exceeds the specified watchdog time, which can be set on a cnmake command-line:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 % cnmake sim TEST=basic SIMU=VCS WDOG=300000\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Watchdog times are always specified in nanoseconds.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 21__#$!@%!#__pastedGraphic.pdf \width3220 \height5840
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec2 Phase Objections\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Phase objections exist to ensure that your various independent components do not get ahead of one another.  It would be inappropriate to start sending packets into a DUT before reset was complete, for example. \
Each of UVM\'92s run-time phases ends immediately when all phase objections have been dropped.  
\b \expnd0\expndtw0\kerning0
Any task that was spawned during the phase but is still active will immediately be killed.
\b0 \expnd0\expndtw0\kerning0
\
The heartbeat monitor works in concert with a well-constructed environment which raises and drops objections in the correct manner.  Where and when your objections take place depend on the current phase.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Reset Phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  package contains a standard reset driver component, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn_pkg::rst_drv_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  This  driver may be instantiated and configured to provide a simple reset on a single reset line.  When this standard driver is used, it will manage the raising and dropping of the reset phase\'92s objections for you.\
If you decide to create your own reset driver, this phase\'92s objection must be raised at the beginning of the phase, and be dropped once the reset is complete.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Configuration Phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 As discussed in Lesson 10, the configuration phase may be as simple as calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 register_block.update()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or as complicated as you wish it to be.  Like the reset phase, objections should be raised at the beginning and dropped at the end.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Main Phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The main phase is substantially different from both the reset and configuration phases. The purpose of the main phase is to launch sequences that inject sequence items into the DUT.  The main phase does not necessarily wait for the completion of these items, it merely lasts as long as it takes to send these items to the drivers.\
Therefore, the main phase should end once all sequence items have been launched.  Where these objections are raised and dropped depends entirely on how your sequences are launched.\
If your main phase is creating and starting your sequences directly, then you must raise and drop the objections once they are complete.  In Lesson 7, your first sequence was started in this manner:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls138\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5   virtual task main_phase(uvm_phase phase);\
      alu_pkg::alu_seq_c alu_seq = new("basic_seq");\
      \
      phase.raise_objection(this);\
      `cn_info("Starting alu_seq.")\
      alu_seq.start(alutb_env.alu_agent.sqr);\
      phase.drop_objection(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : main_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Alternatively, you may launch your sequences as the default sequence of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  In Lesson 12, this is how you launched the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls139\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 uvm_config_db#(uvm_object_wrapper)::set(this, "alutb_env.alu_agent.sqr.main_phase", \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5                                         "default_sequence", alu_pkg::sum_array_seq_c::type_id::get());\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 When a sequence is launched in this manner, a field called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 starting_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is set to the main phase.  Otherwise, this field is 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 null
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  In either the sequence\'92s body, or in pre- and post-body tasks, you can use this field to raise and drop the objection:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls140\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task pre_body();\
      if(starting_phase)\
         starting_phase.raise_objection();\
   endtask : pre_body\
\
   virtual task post_body();\
      if(starting_phase)\
         starting_phase.drop_objection();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : post_body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Since you never know when a sequence is going to be configured to be a default sequence, you would have to add these tasks to every sequence you write.  A recommended procedure is to create a base sequence that contains this code in your library sequence, and then derive all of your other sequences from it.\
Alternatively, you can use the macros 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_seq_raise
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_seq_drop
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  as shown in Lesson 14.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Shutdown Phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The shutdown phase is the DUT\'92s opportunity to finish responding to all of the stimulus that was previously driven into it.  This phase should end once all of the stimulus has 
\i \expnd0\expndtw0\kerning0
completed
\i0 \expnd0\expndtw0\kerning0
.  This is usually decided by a predictor whose scoreboards are empty, a monitor or driver awaiting responses, etc.  Only components that can determine this information should be raising and dropping the shutdown phase\'92s objection.\
The following is a typical pattern for a predictor\'92s shutdown phase:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls141\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task shutdown_phase(uvm_phase phase);\
      if(scoreboard.size()) begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          phase.raise_objection(this, $psprintf("Waiting for %0d responses.", scoreboard.size()));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          while(scoreboard.size())\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5             @(response_received);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          phase.drop_objection(this, "All responses complete.");\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : shutdown_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The phase only raises an objection if there are outstanding packets, otherwise it does nothing.  As shown here, an event must have been defined which is triggered whenever a response is received.\
Once the shutdown phase is complete, your simulation will move to the extract and check phases.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf4 \expnd0\expndtw0\kerning0
\strokec4 Extract and Check Phases\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The extract phase precedes the check phase and provides higher-level components with the opportunity to pull information from lower-level components in order to complete its prediction process.  \
The check phase is your environment\'92s last chance to say whether or not the simulation passed or failed.  This is where scoreboards must be checked to be empty, credits must be completed, etc.\
These phases are not run-time phases.  They are zero-time functions whose objections need not be raised or dropped.  They are mentioned here because as you will see in the next section, it is important that your predictive components report errors during the check phase for any final conditions.  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Deadlock Checking\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Deadlock
\i0 \expnd0\expndtw0\kerning0
 is when stimulus has gone into the DUT, but responses are not coming out.  How long to wait before deciding that it will never come out is a function of your DUT and your environment.  When a simulation is deadlocked, it should immediately exit and report a failure.  It is also helpful to report what the environment is still waiting for.\
The global environment\'92s heartbeat monitor, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 global_pkg::heartbeat_mon_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , is the configurable component that is responsible for detecting a deadlock scenario.  During the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 end_of_elaboration
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phase, components that are responsible for tracking responses from the DUT (i.e. monitors, predictors, subscribers, etc.) register themselves with the heartbeat monitor.  Then, after reset has been completed, the heartbeat monitor periodically checks to ensure that 
\i \expnd0\expndtw0\kerning0
at least one
\i0 \expnd0\expndtw0\kerning0
 registered component has seen some form of activity from the DUT (the heartbeat).  The length of time between these checks is called the 
\i \expnd0\expndtw0\kerning0
sample time
\i0 \expnd0\expndtw0\kerning0
.  The monitor will obey the 
\i \expnd0\expndtw0\kerning0
longest
\i0 \expnd0\expndtw0\kerning0
 sample time required by all registered components.\
If no activity was seen during the last sample time, the simulation is considered deadlocked.  In that scenario, all run-time phases are immediately halted, and the simulation proceeds to the extract, check, and final phases, where your environment has an opportunity to report what activity is still expected of the DUT.  This is called a 
\i \expnd0\expndtw0\kerning0
phase jump
\i0 \expnd0\expndtw0\kerning0
.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 22__#$!@%!#__pastedGraphic.pdf \width9360 \height2140
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The art of getting the heartbeat monitor to work properly for your environment lies in determining which components must be registered, and how long the sample time should be.  Your registered monitors will probably have different needs from one another.  For example, RSL responses might come out just a few clocks after the request, whereas a complex algorithmic unit such as ZIP might take 50,000ns before a response comes out.  \
Each component registers itself and its required sample time during the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 end_of_elaboration
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phase using a standard macro:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls142\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void end_of_elaboration_phase(uvm_phase phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       `global_add_to_heartbeat_mon(7000ns);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : end_of_elaboration_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 When a response to 
\i \expnd0\expndtw0\kerning0
stimulus
\i0 \expnd0\expndtw0\kerning0
 is seen from the DUT, then your component indicates a heartbeat with another macro.  It\'92s important to distinguish between responses to stimulus and responses to random traffic, such as random CSR reads.\
The ALU monitor\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task would add this functionality:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls143\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual task monitor_result();\
      forever begin\
         @(posedge mon_vi.mon_cb.ready);\
         if(waiting_for_result == null)\
            `cn_err("Monitored Result does not match any outstanding transaction.");\
         \
         `cn_info($psprintf("Monitored Result: %08X", mon_vi.mon_cb.result));\
         monitored_result_port.write(mon_vi.mon_cb.result);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          `global_heartbeat("Result seen");\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          waiting_for_result = null;\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endtask : monitor_result\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The ALU monitor\'92s check phase should report an error if it is still waiting for a response:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls144\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    virtual function void check_phase(uvm_phase phase);\
      super.check_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       if(waiting_for_result != null)\
         `cn_err($psprintf("Monitor is currently waiting for a result to transaction: %s", \
                           waiting_for_result.convert2string()));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    endfunction : check_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Both of these methods use the variable 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 waiting_for_response
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is a reference to the outstanding request and would be set by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task.\
By default, the heartbeat monitor starts in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_configuration
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phase, but it can be configured to start during 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_reset
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_main
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead.  It stops in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 post_shutdown
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phase.\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix B: Common Recipes\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Implementing a Watchdog\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Often, you will want to send something into the DUT and ensure that it completes within a \'93reasonable\'94 amount of time.  Otherwise, you want to report an error.  Depending on your scenario, this may be measured in nanoseconds, clocks, or some other triggering event.  \
A simple method to do this is as follows:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls145\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 fork\
   do_something();\
   begin\
      #(5000ns);\
      `cn_error(\'93Watchdog timeout!\'94)\
   end\
join_any\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 disable fork;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Either the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_something()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task will complete its mission, or the error will occur in 5,000ns.  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Forking Multiple Instances of a Method\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There will be myriad situations where you will want to fork off multiple instances of the same method call with different arguments.  Doing this simple approach will not give the desired results:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 for(int num=0; num < 5; num++)\
   fork\
      do_stuff(num);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5    join_none\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Nor will this:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 fork\
   for(int num=0; num < 5; num++)\
      do_stuff(num);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 join\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The problem with both of these examples is that while four tasks will be launched, they will all be launched with an argument of 4.  This is due to the fact that the loop will add 4 tasks to the scheduler, and when they later launch the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 num
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable will have a final value of 4.\
To fix this, you need an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 automatic
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable to accept the loop value:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls146\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 for(int num=0; num < 5; num++) begin\
   fork\
      automatic int _num = num;\
      do_stuff(_num);\
   join_none\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Phase-Boundary Crossing Tasks\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Any task that starts in a run-time phase (other than the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), will be killed at the end of that phase.  Raising and holding an objection on that phase may not be desirable if you want that task to continue into a later phase.\
A way around that is to wait for a start event, launch your task during the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and then kill it upon receiving a finish event.  In the following example, the task 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_stuff()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  launches at the beginning of the main phase and continues through to the end of the shutdown phase.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls147\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 event start_event, finish_event;\
\
////////////////////////////////////////////\
virtual task run_phase(uvm_phase phase);\
   @(start_event);\
   fork\
      do_stuff();\
      @(finish_event);\
   join_any\
   disable fork;\
endtask : run_phase\
\
////////////////////////////////////////////\
virtual task main_phase(uvm_phase phase);\
   -> start_event;\
endtask : main_phase\
\
////////////////////////////////////////////\
virtual task post_shutdown_phase(uvm_phase phase);\
   -> finish_event;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endtask : post_shutdown_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Handling a Reset\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Drivers and monitors should be made aware of the reset signals on the interfaces.  If a test chooses to suddenly perform a reset, these components must handle the event cleanly.\
A typical method for doing this is shown below in an example driver:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls148\ilvl0
\f4\b\fs12 \cf5 \expnd0\expndtw0\kerning0
\strokec5 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5 virtual task run_phase(uvm_phase phase);\
   forever begin\
      @(posedge my_vi.rst_n);\
\
      fork\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          drive_items();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5          @(negedge my_vi.rst_n);\
      join_any\
      `cn_info(\'93Saw a reset.  Time to clean up.\'94)\
      disable fork;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf5 \kerning1\expnd-2\expndtw-8
\strokec5       cleanup();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf5 \kerning1\expnd-2\expndtw-8
\strokec5    end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf5 \kerning1\expnd-2\expndtw-8
\strokec5 endtask : run_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The phase first waits for the positive edge of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rst_n
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal to indicate that reset is complete.  The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drive_items
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task is expected to run forever, and so only the falling edge of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rst_n
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal will cause the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 join_any
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to fall through.  The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 disable fork
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  statement will kill the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drive_items()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task, and the cleanup function will reset any of the driver\'92s fields which track state.  The whole task is wrapped in a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 forever
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  block so that it loops back and is able to drive more items once the reset event is finished.\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f1\b \cf6 \expnd0\expndtw0\kerning0
\up0 \strokec6 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\fs36 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 Appendix C: Environment Chaining\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f1\fs24 \cf6 \expnd0\expndtw0\kerning0
\up0 \strokec6 TODO
\f2\b0 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\pard\tqr\tx9360\pardeftab720\sl312\slmult1\sa180\pardirnatural

\f0\fs18 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Cavium	CONFIDENTIAL
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\pard\tqc\tx4680\tqr\tx9360\pardeftab720\sl288\slmult1\pardirnatural

\f0\b\fs14 \cf4 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec4 Cavium 
\b0 \expnd0\expndtw0\kerning0
    2315 North 1st St.	   San Jose, CA 95131
\b \expnd0\expndtw0\kerning0
   
\b0 \expnd0\expndtw0\kerning0
   	{\field{\*\fldinst{HYPERLINK "http://www.cavium.com"}}{\fldrslt \cf3 \expnd0\expndtw0\kerning0
\ul \ulc3 \strokec3 www.cavium.com}}
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\pard\tqr\tx9360\pardeftab720\sl312\slmult1\sa180\pardirnatural

\f0\fs18 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 UVM Training Guide	149
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic exportedGraphic.pdf \width7780 \height6240
}}{{\NeXTGraphic 1__#$!@%!#__exportedGraphic.pdf \width7780 \height6240
}}{{\NeXTGraphic 2__#$!@%!#__exportedGraphic.pdf \width10540 \height4600
}}{{\NeXTGraphic 3__#$!@%!#__exportedGraphic.pdf \width4920 \height1220
}}}