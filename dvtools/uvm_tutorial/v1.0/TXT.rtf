{\rtf1\ansi\ansicpg1252\cocoartf1187\cocoasubrtf390
\cocoascreenfonts1{\fonttbl\f0\fswiss\fcharset0 Optima-Regular;\f1\fnil\fcharset0 HelveticaNeue;\f2\fswiss\fcharset0 Helvetica;
\f3\fmodern\fcharset0 CourierNewPSMT;\f4\fmodern\fcharset0 CourierNewPS-BoldMT;\f5\fmodern\fcharset0 CourierNewPS-ItalicMT;
\f6\fnil\fcharset77 ZapfDingbatsITC;\f7\fnil\fcharset0 HelveticaNeue-Light;}
{\colortbl;\red255\green255\blue255;\red43\green105\blue145;\red0\green0\blue109;\red0\green0\blue153;
\red0\green0\blue0;\red17\green43\blue255;\red17\green43\blue255;\red17\green43\blue255;\red17\green43\blue255;
\red255\green70\blue76;\red0\green0\blue128;\red178\green178\blue178;\red149\green149\blue149;\red255\green25\blue22;
}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid1\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid4}
{\list\listtemplateid5\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid5}
{\list\listtemplateid6\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid6}
{\list\listtemplateid7\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid7}
{\list\listtemplateid8\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid8}
{\list\listtemplateid9\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid9}
{\list\listtemplateid10\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid10}
{\list\listtemplateid11\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid11}
{\list\listtemplateid12\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid12}
{\list\listtemplateid13\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid13}
{\list\listtemplateid14\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid14}
{\list\listtemplateid15\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid15}
{\list\listtemplateid16\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid16}
{\list\listtemplateid17\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid17}
{\list\listtemplateid18\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid18}
{\list\listtemplateid19\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid19}
{\list\listtemplateid20\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid20}
{\list\listtemplateid21\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid21}
{\list\listtemplateid22\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid22}
{\list\listtemplateid23\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid23}
{\list\listtemplateid24\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid24}
{\list\listtemplateid25\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid2401\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid25}
{\list\listtemplateid26\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid26}
{\list\listtemplateid27\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid2601\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid27}
{\list\listtemplateid28\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid28}
{\list\listtemplateid29\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid29}
{\list\listtemplateid30\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid2901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid30}
{\list\listtemplateid31\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid31}
{\list\listtemplateid32\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid32}
{\list\listtemplateid33\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid33}
{\list\listtemplateid34\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid34}
{\list\listtemplateid35\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid35}
{\list\listtemplateid36\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid36}
{\list\listtemplateid37\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid3601\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid37}
{\list\listtemplateid38\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid3701\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid38}
{\list\listtemplateid39\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid39}
{\list\listtemplateid40\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid3901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid40}
{\list\listtemplateid41\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid41}
{\list\listtemplateid42\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid42}
{\list\listtemplateid43\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid43}
{\list\listtemplateid44\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid44}
{\list\listtemplateid45\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid45}
{\list\listtemplateid46\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid4501\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid46}
{\list\listtemplateid47\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid47}
{\list\listtemplateid48\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid48}
{\list\listtemplateid49\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid49}
{\list\listtemplateid50\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid4901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid50}
{\list\listtemplateid51\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid51}
{\list\listtemplateid52\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid52}
{\list\listtemplateid53\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid53}
{\list\listtemplateid54\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid54}
{\list\listtemplateid55\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid55}
{\list\listtemplateid56\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid56}
{\list\listtemplateid57\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid57}
{\list\listtemplateid58\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid58}
{\list\listtemplateid59\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid59}
{\list\listtemplateid60\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid5901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid60}
{\list\listtemplateid61\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid61}
{\list\listtemplateid62\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid62}
{\list\listtemplateid63\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid63}
{\list\listtemplateid64\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid64}
{\list\listtemplateid65\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid65}
{\list\listtemplateid66\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid66}
{\list\listtemplateid67\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid67}
{\list\listtemplateid68\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid68}
{\list\listtemplateid69\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid69}
{\list\listtemplateid70\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid6901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid70}
{\list\listtemplateid71\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid71}
{\list\listtemplateid72\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid72}
{\list\listtemplateid73\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid7201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid73}
{\list\listtemplateid74\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7302\'02\'01.;}{\levelnumbers\'01;}\fi-360\li1440\lin1440 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u10020 }{\leveltext\leveltemplateid7303\'01\uc0\u10020 ;}{\levelnumbers;}\fi-360\li2160\lin2160 }{\listname ;}\listid74}
{\list\listtemplateid75\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid75}
{\list\listtemplateid76\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid76}
{\list\listtemplateid77\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid77}
{\list\listtemplateid78\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid78}
{\list\listtemplateid79\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid79}
{\list\listtemplateid80\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid7901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid80}
{\list\listtemplateid81\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid81}
{\list\listtemplateid82\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid82}
{\list\listtemplateid83\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid83}
{\list\listtemplateid84\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid84}
{\list\listtemplateid85\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid85}
{\list\listtemplateid86\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid86}
{\list\listtemplateid87\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid87}
{\list\listtemplateid88\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid88}
{\list\listtemplateid89\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid89}
{\list\listtemplateid90\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid8901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid90}
{\list\listtemplateid91\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid9001\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid91}
{\list\listtemplateid92\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid92}
{\list\listtemplateid93\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid93}
{\list\listtemplateid94\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid94}
{\list\listtemplateid95\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid95}
{\list\listtemplateid96\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid96}
{\list\listtemplateid97\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid97}
{\list\listtemplateid98\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid98}
{\list\listtemplateid99\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid99}
{\list\listtemplateid100\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid9901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid100}
{\list\listtemplateid101\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid101}
{\list\listtemplateid102\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid102}
{\list\listtemplateid103\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid103}
{\list\listtemplateid104\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid104}
{\list\listtemplateid105\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid105}
{\list\listtemplateid106\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid106}
{\list\listtemplateid107\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid107}
{\list\listtemplateid108\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid108}
{\list\listtemplateid109\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid109}
{\list\listtemplateid110\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid10901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid110}
{\list\listtemplateid111\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid111}
{\list\listtemplateid112\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid112}
{\list\listtemplateid113\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid113}
{\list\listtemplateid114\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid114}
{\list\listtemplateid115\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \uc0\u8226 }{\leveltext\leveltemplateid11401\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid115}
{\list\listtemplateid116\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid116}
{\list\listtemplateid117\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid117}
{\list\listtemplateid118\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid118}
{\list\listtemplateid119\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid119}
{\list\listtemplateid120\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid11901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid120}
{\list\listtemplateid121\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid121}
{\list\listtemplateid122\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid122}
{\list\listtemplateid123\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid123}
{\list\listtemplateid124\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid124}
{\list\listtemplateid125\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid125}
{\list\listtemplateid126\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid126}
{\list\listtemplateid127\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid127}
{\list\listtemplateid128\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid128}
{\list\listtemplateid129\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid129}
{\list\listtemplateid130\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid12901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid130}
{\list\listtemplateid131\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid131}
{\list\listtemplateid132\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid132}
{\list\listtemplateid133\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid133}
{\list\listtemplateid134\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid134}
{\list\listtemplateid135\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid135}
{\list\listtemplateid136\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid136}
{\list\listtemplateid137\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid137}
{\list\listtemplateid138\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid138}
{\list\listtemplateid139\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid139}
{\list\listtemplateid140\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid13901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid140}
{\list\listtemplateid141\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid141}
{\list\listtemplateid142\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid142}
{\list\listtemplateid143\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid143}
{\list\listtemplateid144\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid144}
{\list\listtemplateid145\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid145}
{\list\listtemplateid146\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid146}
{\list\listtemplateid147\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid147}
{\list\listtemplateid148\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid148}
{\list\listtemplateid149\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid149}
{\list\listtemplateid150\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid14901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid150}
{\list\listtemplateid151\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid15001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid151}
{\list\listtemplateid152\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid15101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid152}
{\list\listtemplateid153\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid15201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid153}
{\list\listtemplateid154\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid15301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid154}
{\list\listtemplateid155\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid15401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid155}
{\list\listtemplateid156\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid15501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid156}
{\list\listtemplateid157\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid15601\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid157}
{\list\listtemplateid158\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid15701\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid158}
{\list\listtemplateid159\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid15801\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid159}
{\list\listtemplateid160\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid15901\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid160}
{\list\listtemplateid161\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid16001\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid161}
{\list\listtemplateid162\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid16101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid162}
{\list\listtemplateid163\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid16201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid163}
{\list\listtemplateid164\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid16301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid164}
{\list\listtemplateid165\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid16401\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid165}
{\list\listtemplateid166\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid16501\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid166}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}{\listoverride\listid5\listoverridecount0\ls5}{\listoverride\listid6\listoverridecount0\ls6}{\listoverride\listid7\listoverridecount0\ls7}{\listoverride\listid8\listoverridecount0\ls8}{\listoverride\listid9\listoverridecount0\ls9}{\listoverride\listid10\listoverridecount0\ls10}{\listoverride\listid11\listoverridecount0\ls11}{\listoverride\listid12\listoverridecount0\ls12}{\listoverride\listid13\listoverridecount0\ls13}{\listoverride\listid14\listoverridecount0\ls14}{\listoverride\listid15\listoverridecount0\ls15}{\listoverride\listid16\listoverridecount0\ls16}{\listoverride\listid17\listoverridecount0\ls17}{\listoverride\listid18\listoverridecount0\ls18}{\listoverride\listid19\listoverridecount0\ls19}{\listoverride\listid20\listoverridecount0\ls20}{\listoverride\listid21\listoverridecount0\ls21}{\listoverride\listid22\listoverridecount0\ls22}{\listoverride\listid23\listoverridecount0\ls23}{\listoverride\listid24\listoverridecount0\ls24}{\listoverride\listid25\listoverridecount0\ls25}{\listoverride\listid26\listoverridecount0\ls26}{\listoverride\listid27\listoverridecount0\ls27}{\listoverride\listid28\listoverridecount0\ls28}{\listoverride\listid29\listoverridecount0\ls29}{\listoverride\listid30\listoverridecount0\ls30}{\listoverride\listid31\listoverridecount0\ls31}{\listoverride\listid32\listoverridecount0\ls32}{\listoverride\listid33\listoverridecount0\ls33}{\listoverride\listid34\listoverridecount0\ls34}{\listoverride\listid35\listoverridecount0\ls35}{\listoverride\listid36\listoverridecount0\ls36}{\listoverride\listid37\listoverridecount0\ls37}{\listoverride\listid38\listoverridecount0\ls38}{\listoverride\listid39\listoverridecount0\ls39}{\listoverride\listid40\listoverridecount0\ls40}{\listoverride\listid41\listoverridecount0\ls41}{\listoverride\listid42\listoverridecount0\ls42}{\listoverride\listid43\listoverridecount0\ls43}{\listoverride\listid44\listoverridecount0\ls44}{\listoverride\listid45\listoverridecount0\ls45}{\listoverride\listid46\listoverridecount0\ls46}{\listoverride\listid47\listoverridecount0\ls47}{\listoverride\listid48\listoverridecount0\ls48}{\listoverride\listid49\listoverridecount0\ls49}{\listoverride\listid50\listoverridecount0\ls50}{\listoverride\listid51\listoverridecount0\ls51}{\listoverride\listid52\listoverridecount0\ls52}{\listoverride\listid53\listoverridecount0\ls53}{\listoverride\listid54\listoverridecount0\ls54}{\listoverride\listid55\listoverridecount0\ls55}{\listoverride\listid56\listoverridecount0\ls56}{\listoverride\listid57\listoverridecount0\ls57}{\listoverride\listid58\listoverridecount0\ls58}{\listoverride\listid59\listoverridecount0\ls59}{\listoverride\listid60\listoverridecount0\ls60}{\listoverride\listid61\listoverridecount0\ls61}{\listoverride\listid62\listoverridecount0\ls62}{\listoverride\listid63\listoverridecount0\ls63}{\listoverride\listid64\listoverridecount0\ls64}{\listoverride\listid65\listoverridecount0\ls65}{\listoverride\listid66\listoverridecount0\ls66}{\listoverride\listid67\listoverridecount0\ls67}{\listoverride\listid68\listoverridecount0\ls68}{\listoverride\listid69\listoverridecount0\ls69}{\listoverride\listid70\listoverridecount0\ls70}{\listoverride\listid71\listoverridecount0\ls71}{\listoverride\listid72\listoverridecount0\ls72}{\listoverride\listid73\listoverridecount0\ls73}{\listoverride\listid74\listoverridecount0\ls74}{\listoverride\listid75\listoverridecount0\ls75}{\listoverride\listid76\listoverridecount0\ls76}{\listoverride\listid77\listoverridecount0\ls77}{\listoverride\listid78\listoverridecount0\ls78}{\listoverride\listid79\listoverridecount0\ls79}{\listoverride\listid80\listoverridecount0\ls80}{\listoverride\listid81\listoverridecount0\ls81}{\listoverride\listid82\listoverridecount0\ls82}{\listoverride\listid83\listoverridecount0\ls83}{\listoverride\listid84\listoverridecount0\ls84}{\listoverride\listid85\listoverridecount0\ls85}{\listoverride\listid86\listoverridecount0\ls86}{\listoverride\listid87\listoverridecount0\ls87}{\listoverride\listid88\listoverridecount0\ls88}{\listoverride\listid89\listoverridecount0\ls89}{\listoverride\listid90\listoverridecount0\ls90}{\listoverride\listid91\listoverridecount0\ls91}{\listoverride\listid92\listoverridecount0\ls92}{\listoverride\listid93\listoverridecount0\ls93}{\listoverride\listid94\listoverridecount0\ls94}{\listoverride\listid95\listoverridecount0\ls95}{\listoverride\listid96\listoverridecount0\ls96}{\listoverride\listid97\listoverridecount0\ls97}{\listoverride\listid98\listoverridecount0\ls98}{\listoverride\listid99\listoverridecount0\ls99}{\listoverride\listid100\listoverridecount0\ls100}{\listoverride\listid101\listoverridecount0\ls101}{\listoverride\listid102\listoverridecount0\ls102}{\listoverride\listid103\listoverridecount0\ls103}{\listoverride\listid104\listoverridecount0\ls104}{\listoverride\listid105\listoverridecount0\ls105}{\listoverride\listid106\listoverridecount0\ls106}{\listoverride\listid107\listoverridecount0\ls107}{\listoverride\listid108\listoverridecount0\ls108}{\listoverride\listid109\listoverridecount0\ls109}{\listoverride\listid110\listoverridecount0\ls110}{\listoverride\listid111\listoverridecount0\ls111}{\listoverride\listid112\listoverridecount0\ls112}{\listoverride\listid113\listoverridecount0\ls113}{\listoverride\listid114\listoverridecount0\ls114}{\listoverride\listid115\listoverridecount0\ls115}{\listoverride\listid116\listoverridecount0\ls116}{\listoverride\listid117\listoverridecount0\ls117}{\listoverride\listid118\listoverridecount0\ls118}{\listoverride\listid119\listoverridecount0\ls119}{\listoverride\listid120\listoverridecount0\ls120}{\listoverride\listid121\listoverridecount0\ls121}{\listoverride\listid122\listoverridecount0\ls122}{\listoverride\listid123\listoverridecount0\ls123}{\listoverride\listid124\listoverridecount0\ls124}{\listoverride\listid125\listoverridecount0\ls125}{\listoverride\listid126\listoverridecount0\ls126}{\listoverride\listid127\listoverridecount0\ls127}{\listoverride\listid128\listoverridecount0\ls128}{\listoverride\listid129\listoverridecount0\ls129}{\listoverride\listid130\listoverridecount0\ls130}{\listoverride\listid131\listoverridecount0\ls131}{\listoverride\listid132\listoverridecount0\ls132}{\listoverride\listid133\listoverridecount0\ls133}{\listoverride\listid134\listoverridecount0\ls134}{\listoverride\listid135\listoverridecount0\ls135}{\listoverride\listid136\listoverridecount0\ls136}{\listoverride\listid137\listoverridecount0\ls137}{\listoverride\listid138\listoverridecount0\ls138}{\listoverride\listid139\listoverridecount0\ls139}{\listoverride\listid140\listoverridecount0\ls140}{\listoverride\listid141\listoverridecount0\ls141}{\listoverride\listid142\listoverridecount0\ls142}{\listoverride\listid143\listoverridecount0\ls143}{\listoverride\listid144\listoverridecount0\ls144}{\listoverride\listid145\listoverridecount0\ls145}{\listoverride\listid146\listoverridecount0\ls146}{\listoverride\listid147\listoverridecount0\ls147}{\listoverride\listid148\listoverridecount0\ls148}{\listoverride\listid149\listoverridecount0\ls149}{\listoverride\listid150\listoverridecount0\ls150}{\listoverride\listid151\listoverridecount0\ls151}{\listoverride\listid152\listoverridecount0\ls152}{\listoverride\listid153\listoverridecount0\ls153}{\listoverride\listid154\listoverridecount0\ls154}{\listoverride\listid155\listoverridecount0\ls155}{\listoverride\listid156\listoverridecount0\ls156}{\listoverride\listid157\listoverridecount0\ls157}{\listoverride\listid158\listoverridecount0\ls158}{\listoverride\listid159\listoverridecount0\ls159}{\listoverride\listid160\listoverridecount0\ls160}{\listoverride\listid161\listoverridecount0\ls161}{\listoverride\listid162\listoverridecount0\ls162}{\listoverride\listid163\listoverridecount0\ls163}{\listoverride\listid164\listoverridecount0\ls164}{\listoverride\listid165\listoverridecount0\ls165}{\listoverride\listid166\listoverridecount0\ls166}}
\margl1440\margr1440\margb1800\margt1800
\deftab720
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sa1360\pardirnatural

\f0\b\fs64 \cf0 \kerning1\expnd7\expndtw38
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa120\pardirnatural

\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Table of Contents\
\pard\tqr\tx9360\pardeftab720\li180\sa120\pardirnatural

\f1\i\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \outl0\strokewidth0 \strokec2 Acknowledgments	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 6
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
Revision History	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 7
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural
\cf2 \expnd0\expndtw0\kerning0
\strokec2 Introduction	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 8
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Design Decisions	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 8
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Tool Scripts	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 9
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\sa120\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Prerequisites	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 10
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
Chapter 1: The ALUTB Testbench	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 11
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural
\cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 2: Your First Test	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 13
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Using the UVM Template Generator	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 13
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
flist Files	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 14
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Extended from the Base Test	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 14
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Changing the Clock Frequency	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 15
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Overriding Constraints	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 15
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 17
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 3: Class Factories	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 18
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Extending the Driver	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 18
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Using The Factory	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 19
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 22
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\sa120\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 4: The ALU Protocol	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 23
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural
\cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 5: Creating a Transaction	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 26
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Creating a vkit	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 26
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
A Sequence Item is a Transaction	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 27
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Typedefs Rule	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 28
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Sequence Item U-Turns	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 29
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Adding Constraints	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 30
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Printing Your Classes	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 31
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Packing and Unpacking	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 33
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Printing, Comparing, Packing...Recording?	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 38
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Adding Coverpoints	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 39
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 39
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 6: Creating an Interface	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 40
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The ALU Interface Explained	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 44
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Connecting the Interface to the DUT	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 44
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Storing the Interface in the Database	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 45
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 47
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 7: Creating an Agent	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 48
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Creating Multiple Files	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 48
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Objects vs. Components	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 48
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
All About Build Configurations	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 52
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
All About The Class Factory	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 54
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Factory Overrides on Non-Components	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 55
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
How To See Everything	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 56
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 56
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 8: TLM Ports, Imps, and Exports	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 57
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 TLM Ports	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 57
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
TLM Implementations (Imps)	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 58
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Connecting	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 59
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
TLM Exports	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 59
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
TLM Summary	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 60
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Imp Declarations	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 60
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Many-to-One and One-to-Many	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 61
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Broadcasting to a Listener	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 63
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 66
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 9: Beginning Sequences	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 67
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A Simple Generator	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 67
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
`uvm_do Macros	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 69
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Getting a Response	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 72
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Response Queue Handler	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 74
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Complex Routines	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 76
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Sequencing other Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 82
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Sequence Hierarchy	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 84
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
The Sequencer	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 85
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Locking and Grabbing	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 87
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 88
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 10: Drivers and Monitors	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 89
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Responsibilities of Drivers and Monitors	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 89
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Fetching the Interface	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 89
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Getting the Next Item	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 92
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Driving a Transaction	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 93
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Monitoring Activity	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 95
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 100
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 11: Writing a Predictor	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 101
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Monitor Prediction	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 101
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Comparators	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 101
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Scoreboards	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 102
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Reference Modeling	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 102
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Device Reference Modeling	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 105
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 110
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 12: Configuration Registers	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 111
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Register Organization	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 111
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
References for Everyone!	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 113
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Configuring Your Block	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 113
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Configuration Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 114
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
The kval Test	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 115
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
How It All Works	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 116
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Fixing Our Predictor	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 118
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Register Callbacks	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 119
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Built-In Register Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 120
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Register Accesses	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 121
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 121
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 13: CFG Classes and Writing Tests	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 122
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Cfg Classes	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 122
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Ted and Fred	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 123
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Hierarchical Constraints	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 125
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Collecting Functional Coverage	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 129
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Test Overrides	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 129
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 133
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 14: Advanced Sequences I	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 134
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Default Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 134
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Library Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 135
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Library Sequence Configuration	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 136
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Persistent Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 138
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Sequencer References	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 139
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Handling Cyclical Dependencies	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 143
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Sequence Configurations	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 148
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 149
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 15: A New Testbench	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 150
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The ALU Framer	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 150
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Creating the FRM Testbench	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 151
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
UVM New Testbench (untb)	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 152
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 16: Advanced Sequences II	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 155
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Virtual Sequences and Sequencers	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 155
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Virtual Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 158
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Adapter Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 161
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Conclusion	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 164
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix A: Phases and Heartbeats	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 165
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Watchdog Timer	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 165
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Phase Objections	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 165
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Deadlock Checking	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 169
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix B: Common Recipes	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 171
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Implementing a Watchdog	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 171
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Forking Multiple Instances of a Method	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 171
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Phase-Boundary Crossing Tasks	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 172
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Randomizing a Dynamic Array of Objects	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 172
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural
\expnd0\expndtw0\kerning0
Dynamic Arrays of TLM Ports	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 173
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix C: Vertical Reuse	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 176
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa120\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Passing Meta-Data	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 181
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li180\pardirnatural

\i\b \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix D: Design Patterns	
\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 183
\fs20 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\pardirnatural

\i0\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Design Pattern for Agents	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 183
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Design Pattern for Drivers	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 184
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
Design Pattern for Monitors	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 186
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tqr\tx9360\pardeftab720\li1080\fi-720\sa180\pardirnatural
\expnd0\expndtw0\kerning0
Design Pattern for Library Virtual Sequences	
\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 188
\b0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\up0 \outl0\strokewidth0 \strokec2 Acknowledgments\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The tutorial and the coding guidelines presented here could not have been made possible without significant contributions from the following individuals. I greatly appreciate all of their efforts and encouragement:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl120\slmult1\sa160\pardirnatural
\cf3 \expnd0\expndtw0\kerning0
\strokec3 Janick Bergeron, Synopsys\
Michael Carns, Cavium\
Stephen Chinatti, Cavium\
Ben Chen, Cavium\
Leo Chen, Cavium\
Joeseph D'Errico, Cavium\
James Ellis, Cavium\
Srihari Gosike, Cavium\
Rebecca Lipon, Synopsys\
Ethan Robbins, Cavium\
Jeffrey Schroeder, Cavium\
Ahmed Shahid, Cavium\
Chris Spears, Synopsys\
Joe Stadolnik, Cavium\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl120\slmult1\sa180\pardirnatural
\cf3 \expnd0\expndtw0\kerning0
\strokec3 Claudine Wong, Cavium\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Revision History\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth942\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clcbpat2 \clwWidth1502\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth1593\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clcbpat2 \clwWidth4900\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Version
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Author
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Date
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Notes
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth942\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1502\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1593\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth4900\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0.1
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Brian Hunter
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Oct. 5, 2011
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Initial release to SPOC working group.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth942\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1502\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1593\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth4900\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0.2
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Brian Hunter
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Oct. 27, 2011
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Second release to SPOC working group.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth942\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1502\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1593\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth4900\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0.3
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Brian Hunter
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Dec. 1, 2011
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 All major content complete.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth942\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1502\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1593\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth4900\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0.4
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Brian Hunter
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Dec. 30, 2011
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Release for testing.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth942\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1502\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1593\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth4900\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0.5
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Brian Hunter
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Jan. 13, 2012
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Updates after review.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth942\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1502\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1593\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth4900\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0.6
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Brian Hunter
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Feb. 7, 2012
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Added appendices for vertical reuse, reset testing, and self-testing.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trcbpat1 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth942\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1502\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1593\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth4900\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 1.0
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Brian Hunter
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Jul. 17, 2013
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Major overhaul after many reviews.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Introduction\

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Welcome to Cavium\'92s UVM Tutorial. In these lessons, you will learn the key concepts of UVM and how to use it with SystemVerilog for verification within Cavium\'92s environment.\
To get the source code associated with this tutorial, use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utut
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  script described below.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 About This Tutorial\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This tutorial walks you through the process of adding to an existing testbench. It takes a dive-right-in approach. Each chapter introduces one or more concepts and presents problems that you are expected to attempt to solve. 
\i \expnd0\expndtw0\kerning0
Some of these problems are intentionally difficult. 
\i0 \expnd0\expndtw0\kerning0
The objective of the problems is to challenge you to find the correct answers through trial-and-error, in order to better familiarize yourself with what works, what doesn\'92t, and where to find the answers.\
If you need help solving the problems, your best courses of action are to:\
\pard\tx380\tx740\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\fi-360\ri360\sa240\pardirnatural\qj
\ls1\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Read through the existing UVM code that comprises the testbench;\
{\listtext	\'95	}Refer to the UVM reference manual and user\'92s guide, the SystemVerilog Language Reference Manual, or;\
{\listtext	\'95	}Visit {\field{\*\fldinst{HYPERLINK "http://www.uvmworld.org"}}{\fldrslt \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 http://www.uvmworld.org}}. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
If you are unable to solve a problem, a solution is presented on the following page.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Design Decisions\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The tutorial and the coding guidelines that it is based on do not always approach each problem with the most efficient answer in terms of simulation performance. Where priority of resources is concerned the methodology attempts to espouse the following order of precedence:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\b \expnd0\expndtw0\kerning0
Debug Time < Design Time < Simulation Run Time < Simulation Compile Time\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
\
In other words, you may find examples of the methodology that may be harmful to simulation run-time performance or may cause longer compile-times, depending on your choice and version of simulator. These decisions were made intentionally because they help to minimize the time it takes to initially design a verification environment and/or simplifies the process of reading and debugging it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Tool Scripts \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\fs24 \cf5 \expnd0\expndtw0\kerning0
\strokec5 utut\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Use this script to checkout the source code, obtain code snippets that exist throughout this tutorial, or to synchronize your working area with the chapters.\
To create a new work environment tree in the directory \'91
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mydir
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 \'92:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 >
\f3\b0 \kerning1\expnd-2\expndtw-8
 utut create mydir\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Many code snippets presented in this tutorial are preceded by a small number. Using the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utut
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  script as follows will print out the code that you can then cut-and-paste into your own files. This example prints out code snippet #17:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 mydir/verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utut code 17\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Each chapter throughout this tutorial has a checkpoint file available. You can run the following command to update your working copy to be identical to the solutions. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 mydir/verif>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utut chapter 3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Using this command allows you to start at (or skip) any chapter you wish and still be able to continue with the rest of the tutorial. It will bring your current working directory up to the 
\i \expnd0\expndtw0\kerning0
end
\i0 \expnd0\expndtw0\kerning0
 of the chapter that you specify. However 
\b \expnd0\expndtw0\kerning0
this will delete any modifications that currently exist in your working directory.\

\b0 \expnd0\expndtw0\kerning0
As with all scripts, help can be viewed with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 -h
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  switch on the command-line.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf5 \expnd0\expndtw0\kerning0
\strokec5 utg and untb\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 These scripts operate in accordance with the coding guidelines that are strictly followed in this tutorial. 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  generates files, classes, and vkits. 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 untb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to generate a new testbench.\
The templates that they generate can be customized to your company\'92s needs as you see fit. To do so, you would need to edit the files located in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tools/uvmtmp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Prerequisites\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Before beginning the UVM Tutorial, you should already be quite familiar with SystemVerilog\'92s verification components, including but not limited to these chapters of specification:\
\pard\tx380\tx740\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\fi-360\ri360\sa240\pardirnatural\qj
\ls2\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Classes and Inheritance\
{\listtext	\'95	}Constrained Random Value Generation\
{\listtext	\'95	}Processes \
{\listtext	\'95	}Functional Coverage Collection\
{\listtext	\'95	}Data Types and Aggregate Data Types\
{\listtext	\'95	}Interfaces, Modports, and Clocking Blocks\
{\listtext	\'95	}Interprocess Synchronization and Communication\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
Also, you should have the {\field{\*\fldinst{HYPERLINK "http://mrdata.caveonetworks.com/docs/Standards/Accellera/1800-2009Std.pdf"}}{\fldrslt 
\b \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 SystemVerilog 1800-2009}} specification handy for your reference.\
While this is a tutorial on Cavium\'92s usage of UVM, it assumes at least a nascent knowledge of UVM. Therefore, it is helpful for you to read through the {\field{\*\fldinst{HYPERLINK "http://mrdata.caveonetworks.com/docs/Standards/Accellera/uvm_users_guide_1.1.pdf"}}{\fldrslt 
\b \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 UVM User\'92s Guide 1.1}} and familiarize yourself with the concepts it lays out.\
It is also helpful to keep the {\field{\*\fldinst{HYPERLINK "http://mrdata.caveonetworks.com/docs/Standards/Accellera/UVM_1.1_Class_Reference_Final_06062011.pdf"}}{\fldrslt 
\b \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 UVM 1.1 Class Reference}}
\b \expnd0\expndtw0\kerning0
 
\b0 \expnd0\expndtw0\kerning0
handy.\
You should definitely familiarize yourself with our company\'92s {\field{\*\fldinst{HYPERLINK "http://mawiki.caveonetworks.com/wiki/Sv_guidelines"}}{\fldrslt 
\b \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 SV Guidelines}} on our internal wiki. This document describes coding guidelines, naming conventions, testbench organization, and generally preferred best practices. It also points you to the {\field{\*\fldinst{HYPERLINK "http://www.naturaldocs.org/"}}{\fldrslt 
\b \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 NaturalDocs website}}, which describes how code should be documented to work with this documentation generator.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qj
\expnd0\expndtw0\kerning0
Updated links to these documents will be kept on our {\field{\*\fldinst{HYPERLINK "http://iceman.caveonetworks.com/wiki/index.php/SV_&_UVM_Resources"}}{\fldrslt 
\i \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 SV & UVM Resources}} page.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 1: The ALUTB Testbench\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The ALU testbench (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) is a pure UVM testbench created for the purposes of this tutorial. The Device Under Test (DUT) is a block called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rtl/alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ). This block was designed to be used for this tutorial. It has CSRs on a CTX interface, and has a simple interface to perform math computation requests. In this tutorial, you will be responsible for creating UVM testbench code to test this device (and find bugs!).\
The top-level hierarchy of the current ALUTB testbench approximates the following diagram. In this document, solid-line objects represent instantiations, and dashed lines represent handles or references. Also, colorful objects represent the environment, while black and white is for the RTL.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\i\fs20 \expnd0\expndtw0\kerning0
  
\f2\i0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic pastedGraphic.pdf \width7740 \height6260
}}
\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 1:
\b0 \expnd0\expndtw0\kerning0
 The ALUTB Testbench\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
We\'92ll discuss these particulars in more detail later. But first note that the top-level of the environment hierarchy is the test itself. Also notice that each testbench instantiates a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 global_pkg::env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is a container for functionality that is needed by every UVM testbench.\
Feel free to read some of the SystemVerilog code that is already present in this testbench, and familiarize yourself with its layout and style. The code is located in these directories:\
\pard\tx380\tx740\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\fi-360\ri360\sa240\pardirnatural\qj
\ls3\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - Contains this testbench and all of its tests.\
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - Contains the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  vkit (verification code that can be reused in a higher level testbench).\
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/ctx
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - Contains the CTX vkit, which will be used to program the design\'92s configuration and status registers.\
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/global
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - Contains the global vkit and things that live in the global environment.\
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/cn
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - A vkit containing miscellaneous utility functions, macros, message customizations, and components.\
{\listtext	\'95	}
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/uvm/1_1b
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  - Contains the UVM 1.1b library itself.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
If you enter the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory and run the following, you should get a test to run and PASS.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 cnmake sim\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If your simulation fails, proceed no further and seek some help.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 2: Your First Test\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this chapter, you will learn to use the UVM Template Generator to write a test in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  testbench.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Using the UVM Template Generator\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The first objective is to write a test that speeds up the clock frequency.\
The template generator automates the creation of UVM files and classes. You should always use it because it will save you a considerable amount of typing. It also creates files and classes with a consistent look and feel, which encourages readability.\
The first thing to do is go into the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb/tests
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory and create a new test. The script is called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and it takes as its argument the name of a template. You also give it the name of the file/class to create:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb/tests>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg test -n fast_clk\
++ Creating fast_clk.sv\

\f4\b \kerning1\expnd-2\expndtw-8
fast_clk test: Enter substitution for <description>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 
\f5\i \kerning1\expnd-2\expndtw-8
A test that makes the clock go super fast!
\f3\i0 \kerning1\expnd-2\expndtw-8
\
//-*- mode: Verilog; verilog-indent-level: 3; indent-tabs-mode: nil; tab-width: 1 -*-\
\
// **********************************************************************\
// * CAVIUM CONFIDENTIAL                                                 \
// *                                                                     \
// *                         PROPRIETARY NOTE                            \
// *                                                                     \
// * This software contains information confidential and proprietary to  \
// * Cavium, Inc. It shall not be reproduced in whole or in part, or     \
// * transferred to other documents, or disclosed to third parties, or   \
// * used for any purpose other than that for which it was obtained,     \
// * without the prior written consent of Cavium, Inc.                   \
// * (c) 2013, Cavium, Inc.  All rights reserved.                      \
// * (utg v0.8.2)\
// ***********************************************************************\
// File:   fast_clk.sv\
// Author: username\
/* About:  A test that makes the clock go super fast!\
 *************************************************************************/\
\
`ifndef __FAST_CLK_SV__\
   `define __FAST_CLK_SV__\
\
   `include "base_test.sv"\
// (`includes go here)\
\
// class: fast_clk_test_c\
// (Describe me)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural
\cf7 \kerning1\expnd-2\expndtw-8
\strokec7 class fast_clk_test_c extends base_test_c;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural
\cf8 \kerning1\expnd-2\expndtw-8
\strokec8    `uvm_component_utils_begin(fast_clk_test_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf9 \kerning1\expnd-2\expndtw-8
\strokec9    `uvm_component_utils_end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Because we did not add 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 -f
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to the command-line, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  just printed its output to the screen. \
As you can see, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  chose to name the class 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , even though we asked it to be named 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . This is because according to the coding guidelines, tests must have the word 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 test
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  as a suffix 
\b \expnd0\expndtw0\kerning0
[Rule 2.6-1]
\b0 \expnd0\expndtw0\kerning0
, and all classes must end in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _c 
\f0\b\fs24 \expnd0\expndtw0\kerning0
\up0 [Rule 2.5-1]
\b0 \expnd0\expndtw0\kerning0
. Some of our internal tools expect these conventions to be followed, and it is much easier to tell what kind of class it is, isn\'92t it?  It also created lots of (nearly) empty tasks and functions for you, to save you some typing. If you don\'92t need these, you can leave them there for future expansion, or you can delete them if you like smaller files 
\b \expnd0\expndtw0\kerning0
[Rec 4.2-1]
\b0 \expnd0\expndtw0\kerning0
.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  also asked you to fill in a description. The templates have tagged identifiers in them, and if 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  doesn\'92t know what to put in there, it will ask you. In order to skip these requests and just have 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  leave the tags in the document, add 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 -q
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to the command-line. Note that some tags are not within comments, and will break the compile if they remain.\
You may cut-and-paste this into a file, or you may have 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  pipe this directly into a file called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , with the
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  -f 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 argument:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb/tests>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg test -n fast_clk -f -q\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 ++ Creating fast_clk.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now you have a file called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tests
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory and it is time to actually do something with it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 flist Files\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 But before we go much further, there\'92s one bit of housecleaning we need to do. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cnmake
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  script relies upon files called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 flists
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to help it know what SystemVerilog files to compile and in what order to compile them. Edit the file 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb/alutb.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and add your new test file to it, so that it looks like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls4\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/alutb.flist\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 +incdir+../../verif/alutb\
+incdir+../../verif/common\
+incdir+../../verif/uvm_common\
+incdir+../../verif/hdl\
+incdir+../../verif/alutb/tests\
+incdir+../../rtl/include\
../../verif/alutb/alutb_tb_top.sv\
../../verif/alutb/alu_wrapper.sv\
../../verif/alutb/tests/basic.sv\
../../verif/alutb/tests/base_test.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 ../../verif/alutb/tests/fast_clk.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 -f ../../verif/alutb/rtl.flist\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The change you need to make is highlighted in 
\b \expnd0\expndtw0\kerning0
bold
\b0 \expnd0\expndtw0\kerning0
. Each directory has an flist file in it, but as you\'92ll see later you won\'92t need to do this all the time.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Extended from the Base Test\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now take a look at your new test, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Pretty, isn\'92t it?  You\'92ll notice that it extends from the class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . In fact, all tests descend from this test, but the base test is not a test at all. Well, it is, but it\'92s not one that does any testing.\
Actually, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will be the tippy-top of the component hierarchy in every simulation you run. It\'92s the one that instantiates all of the same components that (most) tests will share, so they don\'92t have to do the same thing over and over.\
Go ahead and take a gander at 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . It looks a lot like 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , except it has 
\i \expnd0\expndtw0\kerning0
stuff 
\i0 \expnd0\expndtw0\kerning0
in it. As the coding guidelines say, it has all of its fields at the top, and all of its methods at the bottom 
\b \expnd0\expndtw0\kerning0
[Rec 4.2-1]
\b0 \expnd0\expndtw0\kerning0
. The phase methods are declared in the order that they will run. Each section has a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 Group:
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  comment, each field has a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 field:
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  comment, and each method has a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 func:
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  comment. These are parsed by the documentation generator to make all that pretty documentation 
\b \expnd0\expndtw0\kerning0
[Rule 2.8-1]
\b0 \expnd0\expndtw0\kerning0
.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Changing the Clock Frequency\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You\'92re probably eager to actually write some code, so let\'92s get to it. In 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , look for the instantiation of the clock driver, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_clk_drv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function. This driver is a component, and so can be configured directly through the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_config_db::set
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function. As you can see in the line just before it is instantiated, the base test has configured the period of the clock driver to be 2,000ps. Let\'92s get it going faster in our new test.\
Back in our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk_test_c 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 class, modify its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function to look like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls5\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/fast_clk.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_config_db#(int)::set(this, "tb_clk_drv", "period_ps", 1800);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This will re-configure the clock driver\'92s period to be 1800ps. A detailed explanation of how this works will be given in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 7\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 . For now know that it is important that these configuration calls happen during a component\'92s build phase, and that they happen after you call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
Now go ahead and simulate and you should see a period of 1.8ns. Here\'92s the command-line, which you\'92ll execute from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 cnmake sim UTEST=fast_clk\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UTEST
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  command-line argument selects the UVM test to run.  See cnmake\'92s help function for more information on how to use that tool.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Overriding Constraints\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 That\'92s great, you say, but what if we want more randomness?  What if I want a clock period between 1.8ns and 2ns?\
Well, that\'92s what constraints are great for. A component is a SystemVerilog class, and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 period_ps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field is a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rand int
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , so it can be randomized anytime after it is new\'92ed. So, let\'92s change our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk_test_c::build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to this instead:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls6\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/fast_clk.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
      
\f4\b \kerning1\expnd-2\expndtw-8
tb_clk_drv.randomize(period_ps) with \{\
         period_ps inside \{[1800:1999]\};\
      \};\
      `cn_info((\'93Selected a period of %0dps\'94, tb_clk_drv.period_ps))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note our first use of the messaging macro `
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn_info
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .
\fs16 \expnd0\expndtw0\kerning0
\super 
\fs24 \expnd0\expndtw0\kerning0
\nosupersub  These work similarly to the UVM reporting macros that they replace, but you need to use two sets of parentheses because the argument will be sent directly to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 $sformatf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Also, you are advised 
\b \expnd0\expndtw0\kerning0
not
\b0 \expnd0\expndtw0\kerning0
 to put a semi-colon at the end of any macro calls 
\b \expnd0\expndtw0\kerning0
[Rec. 3.6-8]
\b0 \expnd0\expndtw0\kerning0
 because depending on its location within the code and the macro definition (both of which may change over time), it may not behave as you expect.\
Go ahead and run that, but add 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 NOBLD=lib
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to your command-line. 
\b \expnd0\expndtw0\kerning0
This prevents cnmake from re-compiling the C code
\b0 \expnd0\expndtw0\kerning0
, which hasn\'92t changed at all: \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 cnmake sim UTEST=fast_clk NOBLD=lib\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Also you can tell 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cnmake
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to create waves for DVE by adding 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 WAVE=1
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  on the command-line, or Verdi with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 FSDB=1
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Question\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
If you take a look at the resultant wave file, you\'92ll find that it didn\'92t work. Instead, you got a period of 2,000ps, which is what the base test specified. \
Do you know why?  Do you know how to fix it?\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Answer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here\'92s what happens:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls7\ilvl0{\listtext	1.	}The base test\'92s build phase stuffs a period of 2,000ps into the resource database.\
{\listtext	2.	}It then creates the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_clk_drv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  component.\
{\listtext	3.	}Then, we randomize the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_clk_drv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  component and get a nice random value.\
{\listtext	4.	}Later, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_clk_drv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  component\'92s build phase runs, fetches the value of 2,000ps, and assigns it to the period.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
So how do we fix it?  Simple:  we randomize it in a later phase. Either the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 connect
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 end_of_elaboration
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_of_simulation
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phases will do, since they run after the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . \
You can move your randomize call from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 end_of_elaboration_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead. Re-simulate and check your results. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This was a dive-right-in lesson that familiarized you with the UVM template generator, flist files, writing a little bit of SystemVerilog, and running using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cnmake
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 3: Class Factories\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this chapter, you will learn to create a derived driver class and use the factory to instantiate it instead of the base class.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Extending the Driver\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The goal of this chapter is to create a clock driver that has a 75/25 duty cycle. The generic clock driver, located in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/cn/cn_clk_drv.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , has lots of optional but complex functionality such as jitter and drift that we will not need. Instead, we want to create a simple clock driver that has a \'911\'92 for 75% of its period and a \'910\'92 for the remaining 25%.\
To start, head over to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory and create a generic component using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg component -n clk_duty_cycle -f -q\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 ++ Creating clk_duty_cycle.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This doesn\'92t precisely do what you want. When you open the file, you\'92ll see that there are still template variables all around because we specified 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to run quietly (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 -q
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ). It also didn\'92t know that we wanted to extend from an existing driver. But, using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is still much faster than writing all of this boilerplate code. And, since we\'92re creating this driver in the testbench itself, there is no package to reference. So you also need to get rid of all 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 <pkg_name>
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  things.\
You\'92ll want to extend this not from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_component
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  but from the generic clock driver instead, which being in a separate package will need the scope operator (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn_pkg::
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 3-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Do your best to modify the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 clk_duty_cycle_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to drive a clock with a 75/25 duty cycle. Consider the variables 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 period_ps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 init_delay
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 init_value
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 init_x
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  as defined in the base class in your algorithm.\
You won\'92t be able to simulate it just yet.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is one possible solution:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls8\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/clk_duty_cycle.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 // class: clk_duty_cycle_c\
// A clock with a duty cycle of 75/25.\
class clk_duty_cycle_c extends cn_pkg::clk_drv_c;\
   `uvm_component_utils(clk_duty_cycle_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="clk_duty_cycle",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: run_phase\
   virtual task run_phase(uvm_phase phase);\
      int uptime = 3*period_ps / 4;\
      int downtime = period_ps - uptime;\
\
      // set to initial value\
      clk_vi.clk = (init_x)? 'bx : init_value;\
      #(init_delay_ps * 1ps);\
      \
      forever begin\
         clk_vi.clk = 1;\
         #(uptime * 1ps);\
         clk_vi.clk = 0;\
         #(downtime * 1ps);\
      end\
   endtask : run_phase\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : clk_duty_cycle_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note that all of the empty methods have been deleted. You could keep them there in case you need them later, with no effect on performance. However, one method that you can never remove is the constructor function, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . This function must always be present in derived UVM classes.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Using The Factory\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The base test creates the testbench clock driver (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_clk_drv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) using the factory overridable create method:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // Create the clock driver\
      uvm_config_db#(string)::set(this, "tb_clk_drv", "intf_name", "tb_clk_vi");\
      uvm_config_db#(int)::set(this, "tb_clk_drv", "period_ps",    2000);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       tb_clk_drv = cn_pkg::clk_drv_c::type_id::create("tb_clk_drv", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
This is essentially the same as calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but if there were earlier factory overrides, then they would be used. It is usually best to never call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  on a UVM object, but to call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 create()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead, as it provides this flexibility for free
\fs16 \expnd0\expndtw0\kerning0
\super 
\fs24 \expnd0\expndtw0\kerning0
\nosupersub  
\b \expnd0\expndtw0\kerning0
[Rec 10.5-3]
\b0 \expnd0\expndtw0\kerning0
.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 3-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Create a test called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 duty_cycle_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that overrides the generic clock driver with your new clock driver. Run this test and see your new duty cycle.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Hint: \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
See 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_type_override_by_type()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the UVM Reference.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
If you were successful, the signal 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top.tb_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  should now have the new duty cycle. This is one possible solution:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls9\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/duty_cycle.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `ifndef __DUTY_CYCLE_SV__\
   `define __DUTY_CYCLE_SV__\
\
   `include "base_test.sv"\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `include "clk_duty_cycle.sv"\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
// class: duty_cycle_test_c\
// Run using the clk_duty_cycle_c instead of cn_pkg::clk_drv_c\
class duty_cycle_test_c extends base_test_c;\
   `uvm_component_utils(duty_cycle_test_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="duty_cycle_test",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       set_type_override_by_type(cn_pkg::clk_drv_c::get_type(),\
                                clk_duty_cycle_c::get_type(), .replace(1));\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\
endclass : duty_cycle_test_c\
   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `endif // __DUTY_CYCLE_SV__\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There are two keys here:  the first is that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 clk_duty_cycle.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file must be included by this file, because it is a dependency 
\b \expnd0\expndtw0\kerning0
[Rule 3.4.2.1-1]
\b0 \expnd0\expndtw0\kerning0
. The second is that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_type_override_by_type
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function call must precede the call to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Do you know why? (if not, you will find out in 
\b \cf10 \expnd0\expndtw0\kerning0
\strokec10 Chapter 7
\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 ).\
You could also use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_type_override_by_name
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead when you want to override a specifically named clock.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 3-3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
How could you run the earlier 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  test that you wrote with your new clock driver but 
\i \expnd0\expndtw0\kerning0
without
\i0 \expnd0\expndtw0\kerning0
 needing to modify any code at all?\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Hint:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
You can add runtime options to your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cnmake
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  command-line with:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 cnmake sim SIMOPTS+=+MY_PLUSARG=1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa160\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0\b\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
UVM offers a set of options that allow you to perform a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_type_override
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  from the command-line. Running your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fast_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  test with this command-line will do it:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls10\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 cnmake sim UTEST=fast_clk \\\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6                 SIMOPTS+=\'93+uvm_set_type_override=cn_pkg::clk_drv_c,clk_duty_cycle_c\'94\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This lesson introduced what class factories are capable of and had you write a smattering of SystemVerilog. Up next, you will start doing some real work on the ALU testbench.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 4: The ALU Protocol\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The ALU module operates as a simple arithmetic logic unit. It has a 1-bit control signal, an 8-bit data input interface, and a 32-bit data output interface with a 1-bit output ready signal:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 1__#$!@%!#__pastedGraphic.pdf \width7980 \height3500
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 2:
\b0 \expnd0\expndtw0\kerning0
 The ALU Block\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
Input data and control are sampled on the rising edge of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sclk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . The first cycle in an input transaction contains the 8-bit operation on 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_dat[7:0]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal is high. 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is held low for the remainder of the transaction and may not go high again to signal a new transaction until after the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_ready
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  output signal has been sampled high. The
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  alu_dat[7:0]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  lines contain the remaining operands based on the ten operation types as per this chart:\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth914\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clcbpat2 \clwWidth647\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clcbpat2 \clwWidth849\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clcbpat2 \clwWidth745\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth846\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clcbpat2 \clwWidth784\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clcbpat2 \clwWidth2055\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clcbpat2 \clwWidth1697\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Operation
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Cycle 0
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Cycle 1
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Cycle 2
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Cycle 3
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Cycle 4
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Formula
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Notes
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 ADD_A_B
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (a+b) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SUB_A_B
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h1
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (a-b) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a > b
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SUB_B_A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h2
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (b-a) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b > a
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 MUL_A_B
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h3
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (a*b) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 DIV_A_B
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h4
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (a/b) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b != 0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 DIV_B_A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h5
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (b/a) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a != 0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 INC_A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h6
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (a+1) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 INC_B
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h7
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 b[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 k * (b+1) + c
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 CLR_RES
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h8
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Sets previous result to zero
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth914\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1080
\clvertalt \clshdrawnil \clwWidth647\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth849\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3240
\clvertalt \clshdrawnil \clwWidth745\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth846\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5400
\clvertalt \clshdrawnil \clwWidth784\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth2055\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx7560
\clvertalt \clshdrawnil \clwWidth1697\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 ACCUM
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 8\'92h9
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[15:8]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a[7:0]
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 N/A
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 a+result
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Uses previous result value
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\i\b\fs20 \expnd0\expndtw0\kerning0
Table 1:
\b0 \expnd0\expndtw0\kerning0
  ALU Protocol\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
As you can see, some transactions take fewer cycles than others. The result is valid on the assertion of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ready
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal, and the number of cycles that takes also depends on the operation chosen.\
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 k
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  values are the 8-bit values programmed into the CSR named 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 CONST
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . The sum of all results since it was last read should be in the CSR 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 RESULT[SOR]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is a read-clear CSR.\
Your job in future chapters will be to verify this simple sub-module using an agent that you create, leverage your work in a sub-system environment, and maybe even find a bug or two.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clmgf \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 ALU_CONST = 0x7E8
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth1016\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clcbpat2 \clwWidth873\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clcbpat2 \clwWidth619\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clcbpat2 \clwWidth557\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clcbpat2 \clwWidth5773\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Bit
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Field Name
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Type
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Reset
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Description
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1016\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clshdrawnil \clwWidth873\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clshdrawnil \clwWidth619\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clshdrawnil \clwWidth557\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clshdrawnil \clwWidth5773\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 <63:16>
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 NS
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 RAZ
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 NS
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Reserved
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1016\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clshdrawnil \clwWidth873\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clshdrawnil \clwWidth619\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clshdrawnil \clwWidth557\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clshdrawnil \clwWidth5773\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 <15:8>
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 K_VAL
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 R/W
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 1
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The constant value that is first multiplied to the results of all ALU computations before the C_VAL is added in.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1016\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clshdrawnil \clwWidth873\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clshdrawnil \clwWidth619\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clshdrawnil \clwWidth557\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clshdrawnil \clwWidth5773\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 <7:0>
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 C_VAL
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 R/W
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The constant value that is added to the results of all ALU computations.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\i\b\fs20 \expnd0\expndtw0\kerning0
Table 2:
\b0 \expnd0\expndtw0\kerning0
  ALU CONST Register Details\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2\i0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clmgf \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clmrg \clvertalt \clcbpat2 \clwWidth9240\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 ALU_RESULT = 0x7F0
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell 
\pard\intbl\itap1\cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth1016\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clcbpat2 \clwWidth873\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clcbpat2 \clwWidth619\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clcbpat2 \clwWidth557\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clcbpat2 \clwWidth5773\clftsWidth3 \clheight520 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Bit
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Field Name
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Type
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Reset
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Description
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1016\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clshdrawnil \clwWidth873\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clshdrawnil \clwWidth619\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clshdrawnil \clwWidth557\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clshdrawnil \clwWidth5773\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 <63:32>
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 NS
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 RAZ
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 NS
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Reserved
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1016\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx1728
\clvertalt \clshdrawnil \clwWidth873\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx3456
\clvertalt \clshdrawnil \clwWidth619\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx5184
\clvertalt \clshdrawnil \clwWidth557\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6912
\clvertalt \clshdrawnil \clwWidth5773\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 <31:0>
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SOR
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 RC
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The sum of all results so far.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\i\b\fs20 \expnd0\expndtw0\kerning0
Table 3:  
\b0 \expnd0\expndtw0\kerning0
ALU RESULT Register Details
\b \expnd0\expndtw0\kerning0
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\i0\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 5: Creating a Transaction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It is often considered good Object-Oriented Programming (OOP) practice to begin with figuring out what the data should look like. We\'92ll create a transaction that can be generated randomly by a sequence, sent to the driver via a sequencer, and monitored by a monitor. The predictor will also be able to receive these transaction classes. It would also be nice to be able to pack and unpack these transactions off the wire.\
We will put all of our ALU-related code in a separate vkit, because it is possible that the ALU interface is common to multiple blocks. A 
\i \expnd0\expndtw0\kerning0
vkit
\i0 \expnd0\expndtw0\kerning0
 is composed of any reusable code, if any other testbenches wanted to use just the ALU agent, this might  be appropriate. If not, then putting this code in the ALUTB vkit would be correct.\
With these goals in mind, let\'92s get started.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Creating a vkit\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A vkit is meant to be a single reusable package that can be compiled with the help of other vkits. For a detailed discussion on what a vkit is and what it isn\'92t, see the {\field{\*\fldinst{HYPERLINK "http://iceman.caveonetworks.com/wiki/index.php/Sv_guidelines%23Directory_Structure"}}{\fldrslt \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 SV Coding Guidelines}} on the wiki.\
To create a vkit, you can again use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/vkits>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg vkit -n alu\
++ Creating alu_pkg.sv\
++ Created vkit alu\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 ++ Exiting.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This creates the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  package file, and an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file for you. Other vkits that this package relies upon will be placed ahead of this one in the build order. Then, the files needed to create the ALU package will be 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `included
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  inside the package file. You will not need to touch the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file at this time.\
To incorporate this new vkit into the ALUTB testbench, you need to modify the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb/Makefile
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and add the path to this vkit\'92s flist file to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 FLISTS
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable. 
\b \expnd0\expndtw0\kerning0
The order in which it is added is important based on this vkit\'92s dependencies on other vkits
\b0 \expnd0\expndtw0\kerning0
. This vkit will depend upon 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 global
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  flists, so add it after those. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  testbench depends upon this vkit, so it needs to be added before that flist as well.\
\page The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 FLISTS
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable in the file 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb/Makefile
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  should now be set as follows:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls11\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/Makefile\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 FLISTS= verif/vkits/cn/cn.flist \\\
	verif/vkits/global/global.flist \\\
	verif/vkits/sps/sps.flist \\\
	verif/vkits/cn_csr/cn_csr.flist \\\
	verif/vkits/reg/reg.flist \\\
	verif/vkits/ctx/ctx.flist \\\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 	verif/vkits/alu/alu.flist \\\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 	verif/vkits/alutb/alutb.flist \\\
	verif/alutb/alutb.flist \\\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 	verif/alutb/rtl.flist\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 A Sequence Item is a Transaction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The class 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  derives directly from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_transaction
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but has the additional property of being able to be driven by a sequence through a sequencer and on to a driver, which are components that we\'92ll discuss in the near future. It is  a rule that we must derive our new class from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item 
\f0\b\fs24 \expnd0\expndtw0\kerning0
\up0 [Rule 10.6-1]
\b0 \expnd0\expndtw0\kerning0
.\
Create the sequence item file by specifying the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  template. Call it \'91
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 \'92, and have it saved to the file named 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls12\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/vkits/alu>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg item -n item --filename alu_item.sv -q\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 ++ Creating alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Do not forget to 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 `include
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  it into the ALU package located in 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/alu/alu_pkg.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The first field in our transaction is the operation, which is a good place for an enumerated type. Enumerated types need to be specified before the call to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field_enum
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , so put the following at the very top of the class 
\b \expnd0\expndtw0\kerning0
[Rec 4.2-1]
\b0 \expnd0\expndtw0\kerning0
:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls13\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    //----------------------------------------------------------------------------------------\
   // Group: Types\
   typedef enum bit [7:0] \{ADD_A_B = 0,\
                           SUB_A_B = 1,\
                           SUB_B_A = 2,\
                           MUL_A_B = 3,\
                           DIV_A_B = 4,\
                           DIV_B_A = 5,\
                           INC_A   = 6,\
                           INC_B   = 7,\
                           CLR_RES = 8,\
                           ACCUM   = 9\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6                            \} operation_e;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Notice that we declared it with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 bit [7:0]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  syntax to tell SystemVerilog how wide it should be. This will be useful when we pack and unpack this transaction. Also notice that we provided the suffix of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _e
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to help identify it as an enumerated type, as required in the {\field{\*\fldinst{HYPERLINK "http://iceman.caveonetworks.com/wiki/index.php/Sv_guidelines%23Type_Suffixes"}}{\fldrslt \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 SV Coding Guidelines}}
\b \expnd0\expndtw0\kerning0
 [Rule 2.5-1]
\b0 \expnd0\expndtw0\kerning0
.\
Now we add it to the list of fields with the
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  `uvm_field_enum
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls14\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	} verif/vkits/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_object_utils_begin(alu_pkg::item_c)\
      `uvm_field_enum(operation_e, operation, UVM_ALL_ON)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_object_utils_end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We chose to give it the flag 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_ALL_ON
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  because we want UVM to pack it, print it, and all the other fancy stuff that UVM provides for free.\
Now we need to declare the operation as a member field of the class. Put this in the Fields group:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls15\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    //----------------------------------------------------------------------------------------\
   // Group: Fields\
   // field: operation\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    rand operation_e operation;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We declared it as a random field because we\'92re going to want to produce lots of random transactions later on.\
Now let\'92s do what we need to do for variables 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 a
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 b
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls16\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_object_utils_begin(alu_pkg::item_c)\
      `uvm_field_enum(operation_e, operation, UVM_ALL_ON)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_field_int (alpha,                  UVM_ALL_ON | UVM_NOPACK)\
      `uvm_field_int (beta,                   UVM_ALL_ON | UVM_NOPACK)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_object_utils_end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We chose to call them 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  because 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 a
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  b
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  are not very good variable names 
\b \expnd0\expndtw0\kerning0
[Rec 4.3-1]
\b0 \expnd0\expndtw0\kerning0
. We also specified that they are not to be packed. This, as you\'92ll see later, is important when we go to pack and unpack these transactions, because A and B do not appear in all operation types.\
Declare the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  fields as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rand bit [15:0]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Typedefs Rule\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 At some point in the life of this ALU, somebody\'92s going to want to make a bus wider. Or narrower. Or they\'92re going to add a square root operation. Or they\'92re going to turn it into a router that sorts packets by size. Whatever happens, it will almost certainly change somehow at some point, and when it does you\'92re going to have to change it in a 
\i \expnd0\expndtw0\kerning0
lot
\i0 \expnd0\expndtw0\kerning0
 of places. Using constants would require you to only make the change in one place. And defining constants is much safer because it prevents typos from creating a nightmare debugging session.\
\page However, defining constants for bus widths using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `defines
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is so pass\'e9. Instead, we\'92re going to create a typedef for the result type. All typedefs end with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _t 
\f0\b\fs24 \expnd0\expndtw0\kerning0
\up0 [Rule 2.5-1]
\b0 \expnd0\expndtw0\kerning0
:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls17\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_pkg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 typedef logic [31:0] result_t;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 That will also be much easier to type all over the place than this would:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 logic [`RESULT_WIDTH-1:0] result;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You can place your typedefs in the vkit\'92s package (above all of the included files that depend on it), or you can create an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_types.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `include
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  it in any file that needs it. The choice is yours. Either way, the type will be local to the vkit\'92s package, so there\'92s no concern for namespace pollution.\
Create typedefs for any type that will be commonly used within a package, including enumerated types. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 operation_e
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  enumerated type was placed in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class, but it could just as easily have been placed in the package. You may also, for example, create types for the operands 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Sequence Item U-Turns\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92re also going to put the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field in the transaction, like so:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls18\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkit/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: result\
   // This is the result of the operation, filled in by the driver and sent back with the response\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    result_t result;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 When the transaction is sent to the driver by the sequencer, the driver will (eventually) send a response back. Sometimes, a block gives no response (for one-way communications, for example). In cases such as those, it is common for the driver to send the same request item back to the sequencer after the transaction has been completely driven. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 2__#$!@%!#__pastedGraphic.pdf \width8200 \height5480
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 3:
\b0 \expnd0\expndtw0\kerning0
 Sequence Item U-Turns \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
In our case, there is a response. But it is just a 32-bit integer. Both request and response types have to be derived from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , to ensure that they have all the functionality that the sequencer needs to track them. So, our design will simply have the driver put the result back into the request transaction and send it back once it has been received.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Adding Constraints\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You can\'92t divide by zero. And the transaction rules don\'92t allow for negative results during subtractions, either. Constraints are the way to do this. Fortunately, SystemVerilog really shines in this department.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 5-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Exercise your SystemVerilog muscles to add constraints such that all randomized transactions follow the protocol.\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
There are several ways you can approach this, but this is probably the clearest and most concise way:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls19\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // ensure that all operands have legal values\
   constraint protocol_cnstr \{\
      (operation == DIV_A_B) -> beta != 0;\
      (operation == DIV_B_A) -> alpha != 0;\
      (operation == SUB_A_B) -> alpha >= beta;\
      (operation == SUB_B_A) -> beta >= alpha;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note that all constraint blocks need a name, and they should end in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _cnstr 
\f0\b\fs24 \expnd0\expndtw0\kerning0
\up0 [Rule 2.5-1]
\b0 \expnd0\expndtw0\kerning0
. Also, you should put your constraints near the field declarations themselves, in the Fields group.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Printing Your Classes\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Printing your UVM classes to a logfile is something you\'92ll want to do all over the place. All UVM classes have a method that returns the class as a string\'97
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sprint
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . This function takes an optional argument of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_printer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  which you can use to define what you want your string to look like. This class is called a policy class, and they are sprinkled all over UVM. You then pass this string to one of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  messaging macros, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_info
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ,
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  `cn_dbg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_warn
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_err
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_fatal
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf5 \expnd0\expndtw0\kerning0
\strokec5 Table Format\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Table format is the default, so you do not need to provide a printer class to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sprint
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function. The following code snippet will produce the table format of a class:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          `cn_info(("Monitored:\\n%s", item.sprint()))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And the results are shown below:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 %I-(   alu_mon.sv:   140) [alutb_env.alu_agent.mon               ] \{ 38597ns\} Monitored: \
-----------------------------------------------------------------------------------------------------\
Name                               Type                               Size  Value                                      \
-----------------------------------------------------------------------------------------------------\
mon_item                           alu_pkg::item_c                    -     @6203                                      \
  operation                        operation_e                        8     DIV_A_B                                    \
  alpha                            integral                           16    'hc6eb                                     \
  beta                             integral                           16    'h8a74                                     \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 -----------------------------------------------------------------------------------------------------\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 By default, your printed class uses the table printer, which prints your class in a nice, easy-to-read format. However, it is expensive in simulation time. For the thrifty, consider using the tree format instead.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf5 \expnd0\expndtw0\kerning0
\strokec5 Tree Format\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 To print in the tree format, use the following instead. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `cn_info(("Monitored:\\n%s", item.sprint(uvm_default_tree_printer)))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And it appears like this in the logfile:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 %I-(   alu_mon.sv:   142) [alutb_env.alu_agent.mon               ] \{ 38573ns\} Monitored:\
mon_item: (alu_pkg::item_c@6195) \{\
  operation: DIV_A_B \
  alpha: 'hcc3d \
  beta: 'h38de \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_default_*_printer 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 objects are globally scoped instances of the 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_printer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  policy classes
\b0 \expnd0\expndtw0\kerning0
 that can be used when you don\'92t want to type too much. Alternatively, you can create your own tree printer instance and use it over and over again:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 uvm_tree_printer tp = new();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `cn_info(("Monitored:\\n%s", item.
\fs18 \kerning1\expnd-2\expndtw-8
sprint
\fs16 \kerning1\expnd-2\expndtw-8
(tp)))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The benefit of this approach is that you can tweak a variety of printer knobs to get your class just as pretty as you like. The variety of knobs available is impressive. See the UVM reference manual\'92s description of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_printer_knobs
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class for details.\
The same approach can be used for the table and line printer classes, too.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf5 \expnd0\expndtw0\kerning0
\strokec5 Line Format\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The cheapest formatting is the line printer:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             `cn_info(("Monitored:\\n%s", item.sprint(uvm_default_line_printer)))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And its appearance is as shown here:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 %I-( alu_mon.sv:   142) [alutb_env.alu_agent.mon ] \{ 38597ns\} Monitored:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 mon_item: (alu_pkg::item_c@6203) \{ operation: DIV_A_B  alpha: 'hc6eb  beta: 'h8a74  \} \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\f0\b\fs24 \cf5 \expnd0\expndtw0\kerning0
\strokec5 \page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural
\cf5 \expnd0\expndtw0\kerning0
\strokec5 Convert2String\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It is very handy to single-line print things\'97especially small transactions like these. But UVM\'92s standard  
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_line_printer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  format is not terribly readable. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 convert2string()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function is defined by UVM as an empty function and is our place to do this 
\b \expnd0\expndtw0\kerning0
[Rec 10.4-1]
\b0 \expnd0\expndtw0\kerning0
, and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 $sformatf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is the right tool for the job:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls20\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    ////////////////////////////////////////////   \
   // func: convert2string\
   // Single-line printing\
   virtual function string convert2string();\
      convert2string = $sformatf("%s A:%04X B:%04X", operation, alpha, beta);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : convert2string\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You can optionally make your function fancier by not printing out the A and B operands for operations that don\'92t use them, but this will suffice for now. Now your transaction will print out nice and neat and just the way you like it:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 %I-(   alu_drv.sv:   107) [alutb_env.alu_agent.drv  ] \{   890ns\} Monitored: DIV_A_B A:C6EB B:8A74\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Packing and Unpacking\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There are many routes that will get us to our end goal, but this is a great opportunity to learn about how to pack and unpack in UVM. Later, the driver will be able to pack this transaction down to the bytes that it will put on the wire, and the monitor will be able to collect the bytes and unpack them.\
When you call the pack function on a transaction, it will automatically pack all of the fields that are marked by the flags in the macros as packable. Because the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  fields will not always be used, though, we\'92ll need to 
\i \expnd0\expndtw0\kerning0
conditionally
\i0 \expnd0\expndtw0\kerning0
 pack them. To add this functionality to a UVM object, you override the function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_pack
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls21\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    ////////////////////////////////////////////\
   // func: do_pack\
   virtual function void do_pack(uvm_packer packer);\
      super.do_pack(packer);\
\
      if(operation inside \{[ADD_A_B : INC_A], ACCUM\})\
         packer.pack_field_int(alpha, 16);\
      if(operation inside \{[ADD_A_B : DIV_B_A], INC_B\})\
         packer.pack_field_int(beta, 16);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : do_pack\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve chosen to use SystemVerilog\'92s handy 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 inside
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operator to conditionally pack these ints as 16-bit values.\
Like the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sprint
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pack
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 unpack 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 functions take an optional policy class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_packer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Here, we let the policy class do the work for us, in case the caller of pack or unpack chose to modify the default policy to handle things differently. \
The following example shows how the user can pack into a list of bytes in little-endian format instead of the default big-endian format:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 uvm_packer little_endian = new();\
byte unsigned stream[];\
\
little_endian.big_endian = 0;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa160\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 item.pack_bytes(stream, little_endian);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0\b\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Problem 5-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
With the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_pack
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  method as a boilerplate, write the corresponding 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_unpack
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  method.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The solution should look very familiar:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls22\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    ////////////////////////////////////////////\
   // func: do_unpack\
   virtual function void do_unpack(uvm_packer packer);\
      super.do_unpack(packer);\
\
      if(operation inside \{[ADD_A_B : INC_A], ACCUM\})\
         alpha = packer.unpack_field_int(16)\
      if(operation inside \{[ADD_A_B : DIV_B_A], INC_B\})\
         beta = packer.unpack_field_int(16);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa160\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : do_unpack\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0\b\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Problem 5-3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Let\'92s now fill in the test 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  such that during the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  it creates a stream of 50 random ALU transactions, prints them out, and packs them into a list of unsigned bytes. Then, unpack this list of bytes into another transaction, and print it out. Finally, compare the two transactions and print an error if they do not compare.\
Use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_info
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_err
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to print informational messages and error messages, respectively. You can also use the function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn_pkg::print_ubyte_array()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to print out your byte array (or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 print_byte_array
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  if you used signed bytes), to aid in debugging your work.\
What happens?\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Hint:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
See 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_compare
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the UVM reference.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is one possible solution:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls23\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class basic_test_c extends base_test_c;\
   `uvm_component_utils(basic_test_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="test",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: main_phase\
   virtual task main_phase(uvm_phase phase);\
      byte unsigned stream[];\
      alu_pkg::item_c item;\
      alu_pkg::item_c unp_item = alu_pkg::item_c::type_id::create("unp_item");;\
      \
      phase.raise_objection(this);\
\
      repeat(50) begin\
         item = alu_pkg::item_c::type_id::create("item");\
         item.randomize();\
         `cn_info(("Created ALU transaction: %s", item.convert2string()))\
         item.pack_bytes(stream);\
         `cn_info(("Bytes: %s", cn_pkg::print_ubyte_array(stream)))\
         unp_item.unpack_bytes(stream);\
         `cn_info(("Unpacked: %s", unp_item.convert2string()))\
         if(item.compare(unp_item) == 0)\
            `cn_err(("Miscompare!"))\
      end\
      \
      phase.drop_objection(this);\
   endtask : main_phase\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : basic_test_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Your test will almost certainly fail for the increment operations. But why?\
Well, we\'92re both randomizing and comparing the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  fields unconditionally, yet these fields will be neither packed nor unpacked, so will be different for the increment operations which do not use them all.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 5-4\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
This problem can be solved by overriding the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_compare()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  method, in the same manner as the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_pack()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_unpack()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  methods. What else do you need to do?\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
You\'92ll need to add the flag 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_NOCOMPARE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field macro calls. If everything worked correctly, your test should PASS. Notice that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_compare
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function must first 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 $cast
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  the object passed to it to the type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  before you can look at its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alpha
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  member fields.\
The complete class looks like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls24\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_item.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 // class: item_c\
// An ALU Transaction as a sequence item\
class item_c extends uvm_sequence_item;\
   //----------------------------------------------------------------------------------------\
   // Group: Types\
   typedef enum bit [7:0] \{\
                           ADD_A_B = 0,\
                           SUB_A_B = 1,\
                           SUB_B_A = 2,\
                           MUL_A_B = 3,\
                           DIV_A_B = 4,\
                           DIV_B_A = 5,\
                           INC_A   = 6,\
                           INC_B   = 7,\
                           CLR_RES = 8,\
                           ACCUM   = 9\
                           \} operation_e;\
   \
   `uvm_object_utils_begin(alu_pkg::item_c)\
      `uvm_field_enum(operation_e, operation, UVM_ALL_ON)\
      `uvm_field_int (alpha,                  UVM_ALL_ON | UVM_NOPACK | UVM_NOCOMPARE)\
      `uvm_field_int (beta,                   UVM_ALL_ON | UVM_NOPACK | UVM_NOCOMPARE)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: operation\
   rand operation_e operation;\
\
   // field: A variable\
   rand bit [15:0] alpha;\
\
   // field: B variable\
   rand bit [15:0] beta;\
\
   // ensure that all operands have legal values\
   constraint protocol_cnstr \{\
      (operation == DIV_A_B) -> beta != 0;\
      (operation == DIV_B_A) -> alpha != 0;\
      (operation == SUB_A_B) -> alpha > beta;\
      (operation == SUB_B_A) -> beta > alpha;\
   \}\
\
   // field: result\
   // This is the result of the operation, filled in by the driver and sent back with the response\
   result_t result;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="item");\
      super.new(name);\
   endfunction : new\
\
   //----------------------------------------------------------------------------------------\
   // func: convert2string\
   // Single-line printing\
   virtual function string convert2string();\
      convert2string = $sformatf("%s A:%04X B:%04X", operation, alpha, beta);\
   endfunction : convert2string\
\
   ////////////////////////////////////////////\
   // func: do_pack\
   virtual function void do_pack(uvm_packer packer);\
      super.do_pack(packer);\
\
      if(operation inside \{[ADD_A_B : INC_A], ACCUM\})\
         packer.pack_field_int(alpha, 16);\
      if(operation inside \{[ADD_A_B : DIV_B_A], INC_B\})\
         packer.pack_field_int(beta, 16);\
   endfunction : do_pack\
\
   ////////////////////////////////////////////\
   // func: do_unpack\
   virtual function void do_unpack(uvm_packer packer);\
      super.do_unpack(packer);\
\
      if(operation inside \{[ADD_A_B : INC_A], ACCUM\})\
         alpha = packer.unpack_field_int(16);\
      if(operation inside \{[ADD_A_B : DIV_B_A], INC_B\})\
         beta = packer.unpack_field_int(16);\
   endfunction : do_unpack\
\
   ////////////////////////////////////////////\
   // func: do_compare\
   virtual function bit do_compare(uvm_object rhs,\
                                   uvm_comparer comparer);\
      item_c _rhs;\
      $cast(_rhs, rhs);\
      do_compare = super.do_compare(rhs, comparer);\
      if(operation inside \{[ADD_A_B : INC_A], ACCUM\})\
         do_compare &= comparer.compare_field_int("alpha", alpha, _rhs.alpha, 16);\
      if(operation inside \{[ADD_A_B : DIV_B_A], INC_B\})\
         do_compare &= comparer.compare_field_int("beta", beta, _rhs.beta, 16);\
   endfunction : do_compare\
   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : item_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Printing, Comparing, Packing...Recording?\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You\'92ve already figured out how to customize a UVM object\'92s comparison mechanism by overriding the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_compare
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function. You\'92ll note that it, too, takes an optional policy class. As you\'92ve seen, UVM uses these policy classes together with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_* 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 functions and the UVM field flags such as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_NOCOMPARE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to customize your classes to operate exactly the way you want them to.\
UVM also includes a recording mechanism, but what does it do?  The UVM reference says that it is \'93vendor-specific.\'94  In fact, it can be used by the simulation tool, the waveform dumper, or any other third-party tool that might come along. You could override it to write itself to a database for further analysis, for example.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Adding Coverpoints\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In a coverage driven verification environment, 
\i \expnd0\expndtw0\kerning0
now
\i0 \expnd0\expndtw0\kerning0
\'97when you\'92ve just created the transaction\'97is the time to create coverpoints. Start collecting functional coverage early in the project, and collect it often. Creating metrics to chart the progress of the verification environment as early as possible is very beneficial to long-term planning. Plus you may later be pleasantly surprised at what you\'92re already covering now that you won\'92t have to write a test for someday.\
Because this is a UVM tutorial, though, we will not be going over how to create covergroups and coverpoints.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this lesson, we created a transaction object that represents an ALU request, and we derived it from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , for reasons we\'92ll explore later. We also briefly touched on how to customize the packing, printing, comparing, and recording of any UVM object. The level of customization that UVM provides for this is deep, and you should refer to the UVM Reference Manual when you next want to pursue these topics.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 6: Creating an Interface\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A few fun facts about interfaces that you may have missed during your SystemVerilog 101 training:\
\pard\tx380\tx740\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\fi-360\ri360\sa240\pardirnatural\qj
\ls25\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Interfaces are 
\i \expnd0\expndtw0\kerning0
not
\i0 \expnd0\expndtw0\kerning0
 just a bundle of wires. They are really more like classes or modules. This is because they can contain their own tasks and functions, their own member fields, assertions, procedural blocks (initial and always statements), assignments, checkers, enumerated types...the list of things you can stuff into an interface is very long. 
\i \expnd0\expndtw0\kerning0
And
\i0 \expnd0\expndtw0\kerning0
 they can be passed between RTL modules as a synthesizable construct (that bundle of wires analogy). Unlike classes, though, they are not dynamically created at runtime, but statically created as part of the RTL hierarchy just as modules, regs, and wires are.\
{\listtext	\'95	}Interfaces cannot be defined in a package. As much as you\'92d like to define your ALU interface in your ALU package, the language won\'92t allow it. Instead, the interface must be 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `included
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\i \expnd0\expndtw0\kerning0
known
\i0 \expnd0\expndtw0\kerning0
 to the compiler before it compiles any packages that depend on it because...\
{\listtext	\'95	}Testbench code (i.e. that which lives in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory) can access hard-coded paths such as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top.ctx_i.out[7:0]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Packages\'97such as those which reside in 
\i \expnd0\expndtw0\kerning0
vkit
\i0 \expnd0\expndtw0\kerning0
 directories\'97cannot. Doing so would break the reusability aspect of a 
\i \expnd0\expndtw0\kerning0
vkit
\i0 \expnd0\expndtw0\kerning0
 because in a full-chip testbench, the path 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  does not exist. Instead, 
\i \expnd0\expndtw0\kerning0
all
\i0 \expnd0\expndtw0\kerning0
 signals accessed by testbench code within a package must come via a 
\i \expnd0\expndtw0\kerning0
virtual
\i0 \expnd0\expndtw0\kerning0
 
\i \expnd0\expndtw0\kerning0
interface
\i0 \expnd0\expndtw0\kerning0
.\
{\listtext	\'95	}The UVM method of getting a class in a package to see a testbench interface is to put a reference to the interface in the UVM resource database. This reference is placed in the RTL-side of the testbench and is then pulled out of the database by the UVM class\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phase.\
{\listtext	\'95	}An interface may have input (or output) signals, typically a clock and a reset signal. These signals are not specific to the interface itself, because they may be shared with other devices (i.e. 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 tb_rst_n
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ). If a signal is specific to the interface (i.e. 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pcie_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 srio_clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , etc.) then it 
\i \expnd0\expndtw0\kerning0
might
\i0 \expnd0\expndtw0\kerning0
 be a member of that interface. \
{\listtext	\'95	}Interfaces may contain other interfaces. If a single interface has four separate \'91channels\'92, then it is often convenient to create a single channel interface, and repeat it four times in a container interface. This is more robust than naming its signals 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 valid0
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 valid1
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , etc. \
{\listtext	\'95	}Clocking blocks offer you the ability in one place to specify the clock edge on which signals will be sampled or driven. By using different clocking blocks for each component that will access a given signal, you can easily change these edges in one place.\
{\listtext	\'95	}Clocking blocks also solve race conditions between the RTL and the verification environment that were previously solved in SystemVerilog by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 program
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 /
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 endprogram
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  constructs.\
{\listtext	\'95	}Modports offer access protection against modules, drivers, and monitors from touching signals that they shouldn\'92t. In a way, they act like protected access in C++. Given that an interface can have a task or function that accesses signals, it could be easy for a monitor that shouldn\'92t touch any signals to accidentally start affecting things.\
{\listtext	\'95	}You don\'92t 
\i \expnd0\expndtw0\kerning0
need
\i0 \expnd0\expndtw0\kerning0
 to use clocking blocks and modports, as they add additional typing when accessing signals. You\'92ll have to judge whether their benefits outweigh this additional overhead. We\'92ll use both of them in our example just so you can see how they are used.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\ri360\sa240\pardirnatural\qj
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 6-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Take a stab at creating an interface for the ALU signals. Use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  template 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . The filename should be 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_intf.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and it should reside in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directory. The interface itself should be named 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Write a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reset()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function that sets the control and input data signals to zero. A clock and an active-low reset signal should be inputs to the interface.\
You can use the file 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/ctx/ctx_intf.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  as a guide to help you. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Extra credit:
\b0 \expnd0\expndtw0\kerning0
 \
Add assertions that ensure that there are no X\'92s when there shouldn\'92t be. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_err
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro cannot be used in an interface (it can only be used in verification environment code that derives from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_object 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 because these macros call the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_full_name 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 function). You must use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_err_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros instead.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\ri360\sl312\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Admittedly this one was probably a lot to ask you for, and you don\'92t yet have a way to simulate it to see if you\'92re right. But hopefully the effort was worthwhile:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls26\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_intf.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 interface alu_intf(input logic clk,\
                   input logic rst_n);\
   import uvm_pkg::*;\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Signals\
\
   // var: ctl\
   // Asserted only on the first cycle of a new transaction, while dat contains the operation\
   logic        ctl;\
\
   // var: dat\
   // The input data nibble that contains the operation and operands\
   logic [7:0]  dat;\
\
   // var: ready\
   // The output of the ALU that indicates when the result data is valid\
   logic        ready;\
\
   // var: result\
   // The 32-bit result data\
   logic [31:0] result;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Clocking blocks\
\
   // var: drv_cb\
   // A clocking block that represents how the environment's driver sees the interface\
   clocking drv_cb @(posedge clk);\
      output    ctl;\
      output    dat;\
      input     ready;\
      input     result;\
      input     rst_n;\
   endclocking : drv_cb\
\
   // var: mon_cb\
   // A clocking block that represents how the environment's monitor sees the interface\
   clocking mon_cb @(posedge clk);\
      input     ctl;\
      input     dat;\
      input     ready;\
      input     result;\
      input     rst_n;\
   endclocking : mon_cb\
\
   //----------------------------------------------------------------------------------------\
   // Group: Modports\
\
   modport drv_mp(clocking drv_cb,\
                  import reset);\
   modport mon_mp(clocking mon_cb);\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
\
   // func: reset\
   // Convenience function for the driver to reset its outputs\
   function void reset();\
      ctl = 0;\
      dat = 8'b0;\
   endfunction : reset\
\
   //----------------------------------------------------------------------------------------\
   // Group: Assertions\
\
   ctl_not_x :\
      assert property(@(posedge clk)\
                      disable iff (~rst_n || rst_n === 1'bx)\
                      (!$isunknown(ctl))) else\
         `cn_err_intf(("ctl signal is an X"))\
\
   dat_not_x :       \
      assert property(@(posedge clk)\
                      disable iff (~rst_n || rst_n === 1'bx)\
                      (!$isunknown(dat))) else\
         `cn_err_intf(("dat signal is an X"))\
\
   ready_not_x : \
      assert property(@(posedge clk)\
                      disable iff (~rst_n || rst_n === 1'bx)\
                      (!$isunknown(ready))) else\
         `cn_err_intf(("ready signal is an X"))\
\
   result_not_x : \
      assert property(@(posedge clk)\
                      disable iff (~rst_n || rst_n === 1'bx || ready == 0)\
                      (!$isunknown(result))) else\
         `cn_err_intf(("result signal is an X"))\
         \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endinterface : alu_intf\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 The ALU Interface Explained\
\pard\tx380\tx740\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\fi-360\ri360\sa240\pardirnatural\qj
\ls27\ilvl0
\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 {\listtext	\'95	}Interface signals should be declared as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 logic
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , not 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 wire
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . The reason SystemVerilog needed to create the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 logic
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  type was for this very reason:  these signals could be driven either by a continuous assignment (like a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 wire
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) or with a procedural assignment (like a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), depending upon the implementation to which it is connected. Thus the need for this new data type.\
{\listtext	\'95	}We created 2 different types of clocking blocks and 2 modports: one for a monitor that drives no signals, and one for an environment driver that drives the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 dat
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signals. Only the driver will be allowed to call the reset function to clear the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 dat
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signals. If the RTL uses interfaces to wire itself up, more clocking blocks and modports might be added, too.\
{\listtext	\'95	}Because the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_err_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro still refers to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_report_handler
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , the interface namespace must import the UVM package.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Connecting the Interface to the DUT\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now that you\'92ve defined the interface, you need to let the simulator see it. This is accomplished by adding the file to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 vkits/alu/alu.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file. It must be added before the ALU environment package, because the package depends on the interface, not the other way around:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls28\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu.flist\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 +incdir+../../verif/vkits/alu\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 ../../verif/vkits/alu/alu_intf.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 ../../verif/vkits/alu/alu_pkg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now we will instantiate a single ALU interface in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  module after the CTX interface, and reset it at time zero so that we do not trip our assertions:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls29\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/alutb_tb_top.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: alu_i\
   // The <alu_intf> instance\
   alu_intf alu_i(.clk(tb_clk), .rst_n(tb_rst_n));\
   initial\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       alu_i.reset();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You probably look at all the extra documentation comments as being unnecessary, and for such a simple testbench they probably are. But when things get more complicated or are written by others, you will appreciate having pretty documentation to look at 
\b \expnd0\expndtw0\kerning0
[Rec 2.8-2]
\b0 \expnd0\expndtw0\kerning0
. These comments help create that documentation.\
In this testbench, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  DUT is instantiated in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_wrapper
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  module. Add this interface as an argument to that module as the other interfaces are:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls30\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/alu_wrapper.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 module alu_wrapper(input logic tb_clk,\
                   tb_rst_n,\
                   ctx_intf ctx_i,\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6                    
\f4\b \kerning1\expnd-2\expndtw-8
alu_intf alu_i
\f3\b0 \kerning1\expnd-2\expndtw-8
);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Strictly speaking, the wrapper module is not 
\i \expnd0\expndtw0\kerning0
necessary
\i0 \expnd0\expndtw0\kerning0
. The purpose of this wrapper module is to consolidate the instantiation of the DUT and all of the wiring that is required such that the top-level testbench can be more easily read and understood.\
In the future, perhaps this RTL module will just accept the SystemVerilog interfaces. But like many legacy modules, this one doesn\'92t. Instead, you need to wire up each signal to the interface directly, or you can use emacs\'92 verilog-mode and its auto-mode features (by pressing 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 C-c C-a
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).\
Assuming you\'92ve done everything correctly, you may now run one of your tests as a sanity check. Everything should still PASS because hooking the interface up to the DUT is (theoretically) innocuous.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Storing the Interface in the Database\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_run_test()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function must appear in all testbenches 
\b \expnd0\expndtw0\kerning0
[Rule 5.1-2]
\b0 \expnd0\expndtw0\kerning0
, because it will be called by the code that sits in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/hdl/tbv_common.v
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file to ensure that all interfaces are 
\i \expnd0\expndtw0\kerning0
set
\i0 \expnd0\expndtw0\kerning0
 in the resource database before any agents try to 
\i \expnd0\expndtw0\kerning0
get
\i0 \expnd0\expndtw0\kerning0
 them. As you can see in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  testbench, several interfaces have already been set into the database.\
You\'92ll want to put an instance of the driver and the monitor modports (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_mp 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 and
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  mon_mp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , respectively) into the resource database so that the driver and monitor that will be written later can get them. You will also want to virtualize these interfaces with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 virtual
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  keyword, because that is what the classes will use.\
The name for the interfaces here must match the name of the interfaces that the driver and monitor use to get them. As you\'92ll see later, making that name a configuration field of those components will allow you to attach different instances of components to different interfaces, all on a configurable basis.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 6-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Put virtual driver and monitor modports into the resource database in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top.pre_run_test()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function, using the other examples as models. Name the resource for both 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::alu_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and name the interfaces 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mon_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , respectively. See 
\b \expnd0\expndtw0\kerning0
[Rule 5.3.1-3]
\b0 \expnd0\expndtw0\kerning0
.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
This should do the trick:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 uvm_resource_db#(virtual alu_intf.drv_mp)::set(\'93alu_pkg::alu_intf\'94, "drv_vi", alu_i.drv_mp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 uvm_resource_db#(virtual alu_intf.mon_mp)::set(\'93alu_pkg::alu_intf\'94, "mon_vi", alu_i.mon_mp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 However, these handy macros simplify the process somewhat 
\b \expnd0\expndtw0\kerning0
[Sug 5.3-2]
\b0 \expnd0\expndtw0\kerning0
:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls31\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/alutb_tb_top.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `cn_set_intf(virtual alu_intf.drv_mp, \'93alu_pkg::alu_intf\'94, \'93drv_vi\'94, alu_i.drv_mp)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `cn_set_intf(virtual alu_intf.mon_mp, \'93alu_pkg::alu_intf\'94, \'93mon_vi\'94, alu_i.mon_mp)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In SystemVerilog, testbench-related code is capable of reaching down into the hierarchy and peeking and poking at signals. All reusable components, though, are kept in packages that have no notion of the hierarchy. The bundle of signals that they can see and affect must be kept in an interface. As we\'92ll see later, components in the environment can easily attach to a named interface via the resource database settings we just completed.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 7: Creating an Agent\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this chapter, we\'92re going to create the ALU agent, driver, monitor, and sequencer. We will learn about the purpose of each of these types of components, and we will discuss in detail how all that configuration 
\i \expnd0\expndtw0\kerning0
magic
\i0 \expnd0\expndtw0\kerning0
 actually works.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Creating Multiple Files\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Again, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  makes it a snap to create all of these files at one time:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/vkits/alu>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg agent drv mon sqr -n alu -f -q\
++ Creating alu_agent.sv\
++ Creating alu_drv.sv\
++ Creating alu_mon.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 ++ Creating alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You\'92ll want to add these files as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `includes
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to the package 
\b \expnd0\expndtw0\kerning0
[Rec 3.4.1.3-1]
\b0 \expnd0\expndtw0\kerning0
. The order in which these files are included is inconsequential. In fact, you can do it in alphabetical order or in chronological order. What matters most is that each file\'92s dependencies are 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `included 
\f0\b\fs24 \expnd0\expndtw0\kerning0
\up0 [Rule 3.4.2.1-1]
\b0 \expnd0\expndtw0\kerning0
, that you use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `include
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  guards 
\b \expnd0\expndtw0\kerning0
[Rule 3.4.2.1-2]
\b0 \expnd0\expndtw0\kerning0
, and that you manage any cyclical dependencies (which we\'92ll see later). If you follow these rules of order, you should never have any build ordering issues.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Objects vs. Components\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Let\'92s review a few terms and what the purpose of each of these things is before going forward:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Objects\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 Everything is a 
\f3\fs22 \cf11 \expnd0\expndtw0\kerning0
\up0 \strokec11 uvm_object
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3 , because it is the root class of all other UVM-based classes, but when we specifically refer to something as an object, we usually mean it is something that is not also a component. A class solely derived from 
\f3\fs22 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3 uvm_object
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3  is dynamic in nature, being created and destroyed on-the-fly, like a transaction or a packet.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Component\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 A component derives from 
\f3\fs22 \cf11 \expnd0\expndtw0\kerning0
\up0 \strokec11 uvm_object
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3 , but is quasi-static in nature. While the simulator considers them to be dynamically created (as opposed to, say, modules, wires, and registers), they are created by UVM at time zero and live throughout the lifetime of the simulation.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Phases\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 Components have phases. First, they run their 
\f3\fs22 \cf11 \expnd0\expndtw0\kerning0
\up0 \strokec11 new()
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3  function as soon as they are created, as all classes do. Later, they run the 
\f3\fs22 \cf11 \expnd0\expndtw0\kerning0
\up0 \strokec11 build_phase
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3 , the 
\f3\fs22 \cf11 \expnd0\expndtw0\kerning0
\up0 \strokec11 connect_phase
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3 , the 
\f3\fs22 \cf11 \expnd0\expndtw0\kerning0
\up0 \strokec11 end_of_elaboration_phase
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3 , and the 
\f3\fs22 \cf11 \expnd0\expndtw0\kerning0
\up0 \strokec11 start_of_simulation_phase
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3 . All of these phases happen in zero time at time zero. Then, the 
\f3\fs22 \cf11 \expnd0\expndtw0\kerning0
\up0 \strokec11 run_phase
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3  happens, which has numerous task-based sub-phases, which consume time. See more about phases in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Appendix A\cf3 \expnd0\expndtw0\kerning0
\ulnone \strokec3 .\
Objects that are 
\i \expnd0\expndtw0\kerning0
not
\i0 \expnd0\expndtw0\kerning0
 components do 
\i \expnd0\expndtw0\kerning0
not
\i0 \expnd0\expndtw0\kerning0
 have phases.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Driver\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 The driver is a component that receives transactions from the sequencer and wiggles the wires of an interface to stimulate the DUT, following the protocol of the interface it attaches to. It also re-routes responses to transactions back to the sequencer. Ideally, its purpose should be kept to that, and to that only.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Monitor\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 The monitor is a component that watches the interface it is attached to and reports what happens, checking the interface for protocol violations. It collects activity on the interface in the form of transactions and usually pushes them out of an analysis port. It is agnostic in nature because it monitors both the driver and the DUT looking for errors and reporting activity.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Sequencer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 A sequencer is a component that arbitrates among multiple streams of stimulus (sequences), sends sequence items to a driver one at a time, and re-routes responses back to the original sequence.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Agent\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 An agent is merely a container class that typically holds a sequencer, driver, and monitor. Its primary purpose is to provide a single configurable, re-usable component that you can plop down into your testbench, without having to deal with multiple components. An agent may hold other components as well, but serves no other specific purpose. It usually features TLM ports and exports (see \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 8\cf3 \expnd0\expndtw0\kerning0
\ulnone \strokec3 ) that send and receive transactions to other agents or components.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 With those definitions in mind, let\'92s take a look at what 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  created for us. The file 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/alu/alu_agent.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is already chock full of most of the stuff we need. It has one configuration field, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 is_active
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which instantiates the driver and sequencer when set to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_ACTIVE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Otherwise, the agent is 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_PASSIVE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , in which case only the monitor is created and operational. This is typical for block-level agents that monitor interfaces in a full-chip testbench, but never actually drive stimulus. The build phase is where this all happens:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
      mon = mon_c::type_id::create("mon", this);\
      if(is_active) begin\
         drv = drv_c::type_id::create("drv", this);\
         sqr = sqr_c::type_id::create("sqr", this);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A monitor might perform all of the checking for the agent on-the-fly, but agents 
\i \expnd0\expndtw0\kerning0
usually
\i0 \expnd0\expndtw0\kerning0
 do not contain scoreboards or more complex predictors, because these might inhibit  reusability. A block-level agent might be reusable from one chip design to the next, but the prediction algorithm might change. Instead, agents push monitored traffic out of TLM ports and on to other listeners, be they scoreboards, functional coverage collectors, or other agents. We\'92ll discuss prediction more in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 11\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 .\
Sequencers communicate stimulus sequence items and responses to the driver via the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 seq_item_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the driver and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 seq_item_export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the sequencer. 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  has already made this connection for you:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void connect_phase(uvm_phase phase);\
      super.connect_phase(phase);\
      if(is_active)\
         drv.seq_item_port.connect(sqr.seq_item_export);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : connect_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ll talk about these ports and exports in the next chapter, but you should be aware that the ports, the driver, and the sequencer, are all parameterized classes. They all need to know what kind of stimulus item (called the request) the sequencer will be sending to the driver, and what kind of response item the driver will send back to the sequencer. Sometimes, a driver won\'92t have a data item to send back if for example the interface has one-way communication. In such a case, the driver will often just send back the request itself once it has completed sending it. Other times, the response will be embedded into the transaction. You\'92ll recall that we added the result field to our transaction for just such a purpose.\
So, the driver and sequencer need to be parameterized with our transaction item (the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  you created in the last chapter), and a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result_t
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  type that represents the result. Since we ran 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  above with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 -q
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  did not prompt us for the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reqType
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rspType
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  interactively, so we\'92ll have to fill those in ourselves.\
In the case of the ALU agent, the request and response types are the same thing for both the driver and sequencer: 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . The base class 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_driver
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  sets the default response type to be the same as the request type (like a default argument):\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class uvm_driver #(\uc0\u8232    type REQ = uvm_sequence_item, \
   type RSP = REQ\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 ) extends uvm_component;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 So you only need to provide the request type and the response type is automatically filled in:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls32\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class drv_c extends uvm_driver#(item_c);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And likewise in the sequencer:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls33\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class sqr_c extends uvm_sequencer#(item_c);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You also may have run into the fact that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  needs to be 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `included
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in both the sequencer and driver files. This requirement is because they now reference 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is now a dependency.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 7-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Instantiate the ALU agent in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg::env_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Compile and simulate to ensure you did it correctly.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Instantiating the ALU agent in the ALUTB environment first requires that you added the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file before the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file in your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 FLISTS 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 setting, because of the ALUTB\'92s dependency on the ALU package. \
Then instantiate an ALU agent in the Fields group:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls34\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alutb/alutb_env.sv
\f3\b0\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\up0 \strokec6    // field: alu_agent\
   // The ALU agent\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    alu_pkg::agent_c alu_agent;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Then add the following to its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls35\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alutb/alutb_env.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // create the ALU agent\
      uvm_config_db#(int)::set(this, "alu_agent", "is_active", is_active);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       alu_agent = alu_pkg::agent_c::type_id::create("alu_agent", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We have configured the ALU agent's 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 is_active
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field to match the one in the ALUTB environment. It is now time to learn about how configurations from the resource database trickle down to children components.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 All About Build Configurations\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In the following example, it is important to distinguish between the parent-child relationship of objects within the component hierarchy (i.e., an agent is the parent of a driver) versus the parent-child relationship of class inheritance (i.e., 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  derives from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ). To help make this clear, we\'92ll refer to 
\i \expnd0\expndtw0\kerning0
descendants 
\i0 \expnd0\expndtw0\kerning0
and 
\i \expnd0\expndtw0\kerning0
ancestors
\i0 \expnd0\expndtw0\kerning0
 to discuss class inheritance, versus 
\i \expnd0\expndtw0\kerning0
parents
\i0 \expnd0\expndtw0\kerning0
 and 
\i \expnd0\expndtw0\kerning0
children
\i0 \expnd0\expndtw0\kerning0
 when discussing component hierarchy.\
When a UVM component calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , it calls its ancestor\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function, and that ancestor calls its ancestor\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function, and so on, until the ancestor is the base class 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_component
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . There, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function looks in the configuration database for all of the fields defined by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros. It uses the component\'92s full-name in the hierarchy and the field\'92s name and type to match against items in the database. The field will eventually be set to the matching entry that was placed by the 
\i \expnd0\expndtw0\kerning0
highest
\i0 \expnd0\expndtw0\kerning0
 component in the hierarchy.\
The example hierarchy shows the order in which the functions are executed. At Step 1, only the test instance has been created and newed, and all other components do not exist yet.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 3__#$!@%!#__pastedGraphic.pdf \width8320 \height5840
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 4:
\b0 \expnd0\expndtw0\kerning0
 Build Phases Explained\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls36\ilvl0
\i0\fs24 \expnd0\expndtw0\kerning0
{\listtext	1.	}When UVM enters the build phase, the test\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function runs and it calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	2.	}The test then puts a value in a resource table that lives in the test that will later match against the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 field
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the driver, and gives it a value of 7.\
{\listtext	3.	}The test then creates the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance, which gets newed. All of its fields are set to default values and its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function runs. Its parent is a reference to the test. By creating the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  component, UVM adds this instance to a list of components that still need to run their 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	4.	}Later, UVM runs the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 \'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function and it also calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	5.	}The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  creates the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance. \
{\listtext	6.	}Later still, the agent\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function runs and it, too, calls
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	7.	}The agent puts a value of 6 in its resource table that will match the driver\'92s field.\
{\listtext	8.	}The driver is created.\
{\listtext	9.	}Upon creation, the field is given the default value of 5, and the driver\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function is then run.\
{\listtext	10.	}Finally, the driver\'92s build phase runs and it, too, calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Again, this is the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_component::build_phase() 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 function, and this is where all the work happens. It calls the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 apply_config_settings()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function, which is instructed by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field_int(field, UVM_ALL_ON)
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro to traverse upwards to find matching settings. The first one it finds will be the value of 6 supplied by its own parent, the agent. It then checks the agent\'92s parent, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , to see if it has a matching entry. It doesn\'92t, so it keeps going up to the test component, where it finds yet another matching entry which changes the value of the field to 7. Because the test has no parents, that will be the field\'92s final value.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
In addition to what was shown in this example is the power of using glob-style or regular expressions for either the hierarchy or the field name. Instead of specifying that the driver\'92s field gets a value of 7, the test could have specified that any components within the agent (including the monitor and sequencer) which also have a field named \'91field\'92 will also get the value of 7.\
This is accomplished instead with this call:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 uvm_config_db#(int)::set(this, \'93env.agent.*\'94, \'93field\'94, 7);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Or, it might say that any integers in the env with a field name starting with \'93fi\'94 will get a value of 7:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 uvm_config_db#(int)::set(this, \'93env.*\'94, \'93fi*\'94, 7);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 As you\'92ll see in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 12\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , this is how the base test distributes the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instances to 
\i \expnd0\expndtw0\kerning0
all
\i0 \expnd0\expndtw0\kerning0
 components within the hierarchy that asks for them:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // push the register block and the configurations to all blocks that ask for it\
      uvm_config_db#(uvm_object)::set(this, "*", "reg_block", reg_block);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_config_db#(uvm_object)::set(this, "*", "cfg",       cfg    );\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Care must be exercised, though, if you start instantiating other people\'92s components and they also happen to use field names that have names like 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but do not correspond to your testbench\'92s notion of what these objects represent. UVM offers some protection against this by also matching on a field\'92s type, but accidents are still possible.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 All About The Class Factory\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 3\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , you used the class factory to replace the standard clock driver instance with one of your own. The process is similar to the configuration example above. To replace components, you call one of the four available functions (shown below) to submit a class override to the factory, and later when any sub-component tries to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 create()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  a class of the base type, the factory searches its database and replaces it with the descendant class you specified.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth3415\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth5674\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Component Factory Functions
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Purpose
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3415\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5674\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 set_type_override_by_type
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Replace all classes of the base type with the descendant type.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3415\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5674\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 set_inst_override_by_type
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Replace only classes whose name matches a wildcard pattern.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3415\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5674\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 set_type_override
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same function as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_type_override_by_type
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but use strings for the class names.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth3415\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth5674\clftsWidth3 \clheight600 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 set_inst_override
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same function as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_inst_override_by_type
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but use strings for the class names
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\i\fs20 \expnd0\expndtw0\kerning0
Table 4:  Factory Functions\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
To replace components, you would call these functions during the build phase of a parent component requesting the override. One important difference between the configuration example, however, is that you may need to call the override function 
\i \expnd0\expndtw0\kerning0
before
\i0 \expnd0\expndtw0\kerning0
 calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . \
For example, if you wanted to override the default clock driver from your base test, it stands to reason that 
\b \expnd0\expndtw0\kerning0
you must request the override before creating the clock driver
\b0 \expnd0\expndtw0\kerning0
:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 set_type_override_by_type(cn_pkg::clk_drv_c::get_type(), clk_duty_cycle_c::get_type(), .replace(1));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 tb_clk_drv = cn_pkg::clk_drv_c::type_id::create("tb_clk_drv", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 However, if you want to cause the override in a sub-class of base-test, such as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 duty_cycle_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , you must perform the override 
\b \expnd0\expndtw0\kerning0
before
\b0 \expnd0\expndtw0\kerning0
 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , as we did in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 3\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 . This is because calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test_c::build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which will create the clock driver. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 set_type_override_by_type(cn_pkg::clk_drv_c::get_type(), clk_duty_cycle_c::get_type(), .replace(1));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 super.build_phase(phase);  // <-- calls base_test_c::build_phase and creates the clock driver.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you called it after 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , the clock driver would have already been created and your factory override request would be too late.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Factory Overrides on Non-Components\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Class factory overrides are not limited to just components, though. They do not rely on phases to work properly. You can create your class overrides on transactions, sequences, or any other UVM object. You can even do them after time zero. For example, you could enable sending corrupted CTX transactions after the configuration phase.\
So long as the factory override request is made before the create call, the override will hold.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 How To See Everything\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 At some point in your UVM career, you might want to do something with every single component. Or, you might want to print out all of the drivers named \'93Fred\'94. Whatever your strange inclinations, UVM offers a way to see everything in the component hierarchy.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is the globally visible instance of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_root
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Unfortunately, UVM does not adhere to our clever 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  naming conventions (let them wallow in their ignorance!). But, because 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is globally visible, you can refer to it from anywhere in the codebase. This is awfully nice, because it offers some nifty functions for perusing the hierarchy:\
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 find
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  method will return a handle to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_component
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  with the matching hierarchical name:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 function uvm_component find(string comp_match);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 find_all
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  method populates a list of components that match your query, and allows for 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 .
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ?
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  wildcards.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 function void find_all(string comp_match, \
                       ref uvm_component comps[$],\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6                        input uvm_component comp = null);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Finally, the function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 print_topology
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  can be used to print out the entire hierarchy to the logfile, starting from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Printing the topology is a handy thing to do at the start of simulation, after everything has been created. Because it is such a good idea, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 global_pkg::env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will do it for you, so long as your debug level is non-zero. You can also use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cnmake
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  command-line option (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 TOPO
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) to specify the depth of the tree to print, with the default being 4.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 cnmake sim DBG=10 TOPO=8\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this chapter, we learned all about components, their quasi-static nature, the component hierarchy, and how configurations trickle down from the top of the hierarchy. We also learned what goes into an agent and the purpose of all the different types of components. Finally, we discussed the class factory in more detail and a means to access or print all components.\
Next, it\'92s time to learn how components 
\i \expnd0\expndtw0\kerning0
talk
\i0 \expnd0\expndtw0\kerning0
 to one another, using Transaction Level Modeling.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 8: TLM Ports, Imps, and Exports\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 TLM 1.0 is the UVM equivalent of interface classes that one might use in C++ or Java. Compared to interface classes, TLM is a more formalized method of passing pointers to classes to call their functions. TLM ports simulate having hierarchical connections between components.\
Some of TLM\'92s important features are:\
\pard\tx20\tx200\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li180\fi-180\sl264\slmult1\sa240\pardirnatural\qj
\ls37\ilvl0{\listtext	\'95	}A TLM 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is always the 
\i \expnd0\expndtw0\kerning0
initiator
\i0 \expnd0\expndtw0\kerning0
 of the function call.\
{\listtext	\'95	}A TLM 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  (implementation) is always the 
\i \expnd0\expndtw0\kerning0
target
\i0 \expnd0\expndtw0\kerning0
 of the function call.\
{\listtext	\'95	}A TLM 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  provides pass-through functionality, to traverse different levels of hierarchy.\
{\listtext	\'95	}TLM provides one-to-one, many-to-one, or one-to-many calls.\
{\listtext	\'95	}TLM initiators can perform a get or a put. \
{\listtext	\'95	}Calls can be blocking (time-consuming tasks) or non-blocking (zero-time functions).\
{\listtext	\'95	}Analysis ports provide a one-to-many functionality.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 TLM Ports\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A TLM 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is instantiated as a parameterized class. Like all classes, they must be new\'92ed. It is unlikely that you\'92ll ever override these classes with the factory, but if you prefer the safety of calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ::create
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that\'92s ok, too. To put a transaction into the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , you call the port\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class producer_c extends uvm_component;\
   `uvm_component_utils(producer_c)\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    uvm_blocking_put_port #(item_c) put_port;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
   function new(string name, uvm_component parent);\
      super.new(name, this);\
   endfunction : new\
\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       put_port = new(\'93put_port\'94, this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
  \
   task run();\
      forever begin\
         item_c item = item_c::type_id::create(\'93my_item\'94, this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          
\f3\b0 \kerning1\expnd-2\expndtw-8
(#50ns) 
\f4\b \kerning1\expnd-2\expndtw-8
put_port.put(item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       end\
   endtask : run\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : producer_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM uses squares in component diagrams to represent ports:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 4__#$!@%!#__pastedGraphic.pdf \width3720 \height2120
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 5:
\b0 \expnd0\expndtw0\kerning0
 Ports\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\i0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 TLM Implementations (Imps)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is the target of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs16 \expnd0\expndtw0\kerning0
\up0 \super 
\fs24 \expnd0\expndtw0\kerning0
\nosupersub . You must instantiate the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  just as you did the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  
\i \expnd0\expndtw0\kerning0
and
\i0\b \expnd0\expndtw0\kerning0
 
\b0 \expnd0\expndtw0\kerning0
you must write the implementation function:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class consumer_c extends ovm_component;\
   `uvm_component_utils(consumer_c)\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    uvm_blocking_put_imp #(item_c, consumer_c) put_imp;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
   function new(string name, uvm_component parent);\
      super.new(name, this);\
   endfunction : new\
\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       put_imp = new(\'93put_imp\'94, this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    task put(item_c _item);\
      // do something with _item\
   endtask : put\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : consumer_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class is parameterized not only with the item type but also with the class\'92s type, so that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  knows which class contains the target implementation function.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \expnd0\expndtw0\kerning0
\up0 Imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  are represented with circles:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 5__#$!@%!#__pastedGraphic.pdf \width5780 \height1920
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 6:
\b0 \expnd0\expndtw0\kerning0
 Imps\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\i0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Connecting\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\b0\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 Ports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  are connected to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  at a higher level of the hierarchy during the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 connect_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . The reason this happens during the connect phase instead of during the build phase is because the two components you\'92re trying to connect may not have yet run their build phases. And if that\'92s the case, then they may not have created their 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  yet. \
The whole reason for having these separate phases at time zero is because all components in the system are 
\i \expnd0\expndtw0\kerning0
guaranteed
\i0 \expnd0\expndtw0\kerning0
 to have run all prior phases.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class env_c extends uvm_env;\
   `uvm_component_utils(env_c)\
   producer_c producer;\
   consumer_c consumer;\
  \
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
      producer = producer_c::type_id::create(\'93producer\'94, this);\
      consumer = producer_c::type_id::create(\'93consumer\'94, this);\
   endfunction : build_phase\
\
   virtual function void connect_phase(uvm_phase phase);\
      super.connect_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       producer.put_port.connect(consumer.put_imp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : connect_phase\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : env_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Connect calls are always called on the initiator\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , with the receiving 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  as the argument. This completes the diagram and allows the producer to call another class\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function with a single argument, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 6__#$!@%!#__pastedGraphic.pdf \width6820 \height2220
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 7:
\b0 \expnd0\expndtw0\kerning0
 Connecting Ports to Imps\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\i0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 TLM Exports\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 TLM 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  promote an implementation to a higher level in the hierarchy. From another  component\'92s point of view, they look exactly like an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but the real 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is buried someplace within the hierarchy. With 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , the external component need not know anything about the lower-level hierarchy.\
In the \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Figure 8\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0  below, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 comp2
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 subcomp2
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  both have 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that promote the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  which is buried within 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 leaf2
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  which makes the connection between 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 comp1
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 comp2
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  need not know the inner workings of either component.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 TLM Summary\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 To summarize:\
\pard\tx380\tx740\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\fi-360\ri360\sa240\pardirnatural\qj
\ls38\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}TLM has unidirectional interfaces of many forms. \
{\listtext	\'95	}Blocking ports allow time-consuming tasks to be called. \
{\listtext	\'95	}Non-blocking ports make zero-time function calls.\
{\listtext	\'95	}The flow of information may be 
\i \expnd0\expndtw0\kerning0
from
\i0 \expnd0\expndtw0\kerning0
 the port (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), or 
\i \expnd0\expndtw0\kerning0
to
\i0 \expnd0\expndtw0\kerning0
 the port (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ). \
{\listtext	\'95	}The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is 
\i \expnd0\expndtw0\kerning0
always
\i0 \expnd0\expndtw0\kerning0
 the initiator, and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is 
\i \expnd0\expndtw0\kerning0
always
\i0 \expnd0\expndtw0\kerning0
 the target.\
{\listtext	\'95	}Calls that peek do not consume the next available data.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 7__#$!@%!#__pastedGraphic.pdf \width9360 \height2800
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 8:
\b0 \expnd0\expndtw0\kerning0
 TLM Cheat-Sheet\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\i0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Imp Declarations\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You may have noticed something flawed about the consumer class example above. The presence of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_blocking_put_imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  requires that a task called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , accepting an argument of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , be present within the class. Astute observers would note that this precludes the class from having any other put 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Surely UVM doesn\'92t think we could live on one 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  alone!\
\page Fortunately, they don\'92t, and there is a way around this. As usual, UVM chooses macros to solve the problem:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `uvm_put_imp_decl(_monitored)\
`uvm_put_imp_decl(_driven)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
class consumer_c extends uvm_component; \
   
\f4\b \kerning1\expnd-2\expndtw-8
uvm_put_imp_monitored
\f3\b0 \kerning1\expnd-2\expndtw-8
#(item_c) monitored_imp;\uc0\u8232    
\f4\b \kerning1\expnd-2\expndtw-8
uvm_put_imp_driven
\f3\b0 \kerning1\expnd-2\expndtw-8
#(item_c) driven_imp;\uc0\u8232 \
   function void 
\f4\b \kerning1\expnd-2\expndtw-8
put_monitored
\f3\b0 \kerning1\expnd-2\expndtw-8
 (item_c t); \
      // receives puts coming into monitored_imp\
   endfunction\
\uc0\u8232    function void 
\f4\b \kerning1\expnd-2\expndtw-8
put_driven
\f3\b0 \kerning1\expnd-2\expndtw-8
(item_c t);\
      // receives puts coming into driven_imp\
   endfunction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : consumer_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  `uvm_put_imp_decl(_something)
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro creates a new class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_put_imp_something
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that allows you to create a function called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put_something()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . This class gives you the freedom to create all the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  you need. Preceding the argument with an underscore (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) allows you to avoid having to create the poorly-named function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 putsomething()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . \
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_*_imp_decl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros actually do create a new class for you. You\'92re probably tempted to use the macro just above your class definition, as in this example. However, there may be more than one class in your package that needs to implement a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  for your given transaction. Using the macro twice, though, just won\'92t do, because the compiler gets understandably cranky when a class is defined more than once. Coming up with a new name each time may not be suitable, either. \
Rather than use the macros in only one class file and depend on the build order working out for you, it is advisable to instead place these declarations in the package file.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Many-to-One and One-to-Many\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\b0\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 Ports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  implicitly support many-to-one. That\'92s because multiple ports can be connected to a single 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
When you hear 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 analysis_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , think
\i \expnd0\expndtw0\kerning0
 broadcast
\i0 \expnd0\expndtw0\kerning0
. Analysis ports permit one-to-many communication and in diagrams are represented with a diamond. These are often the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of choice for broadcasting information to an indeterminate number of listeners.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 8__#$!@%!#__pastedGraphic.pdf \width5120 \height3740
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 9:
\b0 \expnd0\expndtw0\kerning0
 Analysis Ports and Imps\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
We haven\'92t even set up our monitor yet, but we will want for it to broadcast all monitored transactions and result values that it sees to the rest of the world. So, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mon_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class will need an analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and the agent should also get one, too. This allows listeners to connect directly to the agent\'92s analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  without having to dig into the implementation to find out what component broadcasts stuff and what they are called. Providing a clean and consistent API from the agent helps to promote reuse.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 8-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Create separate 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 analysis_ports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the monitor and the agent to broadcast transactions and results to the rest of the world. Connect them together. You don\'92t have any code to test them yet, but make sure you can compile it.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
In the monitor, first declare the ports:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls39\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_mon.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // field: monitored_item_port\
   // All monitored transactions go out here\
   uvm_analysis_port #(item_c) monitored_item_port;\
\
   // field: monitored_result_port\
   // All monitored results go out here\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    uvm_analysis_port #(result_t) monitored_result_port;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Bonus points if you placed these in the TLM Ports group and used a name that ended in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , to comply with the coding standards 
\b \expnd0\expndtw0\kerning0
[Rec. 2.6-4]
\b0 \expnd0\expndtw0\kerning0
.\
Then, in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls40\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_mon.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       monitored_item_port = new("monitored_item_port", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       monitored_result_port = new("monitored_result_port", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You can put the exact same lines in the agent. 
\b0 \expnd0\expndtw0\kerning0
You also would need to remember to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `include
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file as it is now a dependency of these two files (just like with the driver and sequencer earlier).\
Finally, in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 connect_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the agent, you make the connection unconditionally (not dependent on 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 is_active
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), because the monitor will be present in all types of testbenches:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls41\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // connect to the monitor's analysis ports\
      mon.monitored_item_port.connect(monitored_item_port);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       mon.monitored_result_port.connect(monitored_result_port);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Broadcasting to a Listener\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now let\'92s write something out of the analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and create something to listen for it. 
\b \expnd0\expndtw0\kerning0
Take your test code from 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alu/tests/basic.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and move it to the 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the ALU monitor. 
\b0 \expnd0\expndtw0\kerning0
After creating a transaction, call the port\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function with the transaction as the argument. This will send it out the analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls42\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_mon.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task main_phase(uvm_phase phase);\
      byte unsigned stream[];\
      alu_pkg::item_c item;\
      alu_pkg::item_c unp_item;\
      \
      phase.raise_objection(this);\
\
      repeat(50) begin\
         item = alu_pkg::item_c::type_id::create("item");\
         item.randomize();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          monitored_item_port.write(item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          `cn_info(("Created ALU transaction: %s", item.convert2string()))\
         item.pack_bytes(stream);\
         `cn_info(("Bytes: %s", cn_pkg::print_ubyte_array(stream)))\
         unp_item = alu_pkg::item_c::type_id::create("unp_item");;         \
         unp_item.unpack_bytes(stream);\
         `cn_info(("Unpacked: %s", unp_item.convert2string()))\
         if(item.compare(unp_item) == 0)\
            `cn_err(("Miscompare!"))\
      end\
      \
      phase.drop_objection(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : main_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In the ALUTB environment, where the ALU agent is instantiated, create a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_subscriber
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , naming it 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item_subscriber
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 uvm_subscriber\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 A subscriber is a specialized UVM parameterizable component that comes pre-packaged with an 
\f3\fs22 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3 analysis_imp
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3  that can accept whatever object for which it is parameterized. All you need to do is fill in the 
\f3\fs22 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3 write()
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3  function.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 Here is how you create the subscriber component with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls43\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/vkits/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg subscriber -n alu_item_subscriber -f\
++ Creating alutb_alu_item_subscriber.sv\

\f4\b \kerning1\expnd-2\expndtw-8
alu_item_subscriber subscriber: Enter substitution for <description>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 
\f5\i \kerning1\expnd-2\expndtw-8
Listens for all monitored ALU transactions.
\f3\i0 \kerning1\expnd-2\expndtw-8
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 alu_item_subscriber subscriber: Enter substitution for <subscription_type>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 
\f5\i \kerning1\expnd-2\expndtw-8
alu_pkg::item_c
\f4\i0\b \kerning1\expnd-2\expndtw-8
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Take special note that we used the scope operator to specify that the transaction is coming from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , because this component will be a member of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 8-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Modify the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item_subscriber
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to print out the transactions that are written to it. Then, instantiate the component in the ALUTB environment and connect it to the ALU agent\'92s transaction analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Simulate and see that your subscriber is seeing all of the transactions. The subscriber uses an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 analysis_export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to which you will connect.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Monitors don\'92t often generate transactions, but this is just a temporary self-test. After removing some boilerplate code, the whole 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item_subscriber_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class would look like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls44\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alutb/alutb_alu_item_subscriber.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 // class: alu_item_subscriber_c\
// Print out all ALU transactions.\
class alu_item_subscriber_c extends uvm_subscriber#(alu_pkg::item_c);\
   `uvm_component_utils(alutb_pkg::alu_item_subscriber_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="alu_item_subscriber",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
    ////////////////////////////////////////////\
   // func: write\
   // Receives the alu_pkg::item_c\
   virtual function void write(alu_pkg::item_c t);\
      `cn_info(("Received this ALU transaction: %s", t.convert2string()))\
   endfunction : write\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : alu_item_subscriber_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And the ALUTB environment would also need to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `include
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_alu_item_subscriber.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file, instantiate and create the class as before, and then connect it during the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 connect_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls45\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alutb/alutb_env.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       alu_agent.monitored_item_port.connect(alu_item_subscriber.analysis_export);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If everything was done correctly, you should see your subscriber happily printing all the transactions it sees.\
Leave it in there for now but 
\b \expnd0\expndtw0\kerning0
remove the generated transactions from the monitor
\b0 \expnd0\expndtw0\kerning0
, since up next we\'92re going to write the real stimulus sequences.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this chapter we learned all about how different UVM components 
\i \expnd0\expndtw0\kerning0
talk 
\i0 \expnd0\expndtw0\kerning0
to one another with ports, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . We learned how to instantiate these TLM objects and how to connect them up. We also created a subscriber that can act as a benign listener. \
There are two other interesting aspects of TLM that were not covered here:\
\pard\tx380\tx740\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\fi-360\ri360\sa240\pardirnatural\qj
\ls46\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}TLM can be used to bridge across different languages. Thus, an analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  can send out all monitored transactions to a UVM subscriber or to a SystemC implementation...all without having to change the UVM source code.\
{\listtext	\'95	}TLM2 is new to UVM, but not new to the rest of the world. TLM2 offers ports that are bidirectional\'97called sockets. It also provides a way to generically model memory transactions using the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_tlm_generic_payload
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class. While the rest of UVM does not use TLM2 (yet!), later revisions of UVM will likely be driving towards it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 9: Beginning Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sequences are intended to drive the stimulus items to the driver. They are dynamic objects that are created and destroyed (as opposed to components, which are quasi-static). They can act as generators to create new stimulus items. They can create other sequences and form a protocol stack. They can last only a short amount of time to perform a few operations, or they can be procedural blocks like an interrupt handler that last the whole life of the simulation.\
The number and variety of use cases for sequences is fairly large, and their complexity may at first seem daunting to new users. This chapter is only the first on sequences, to keep the topic more digestible. In \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapters 14\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0  and \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 16\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , you will learn more details about sequences and sequencers.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 A Simple Generator\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Let\'92s create a simple sequence to generate some random transactions. 
\b \expnd0\expndtw0\kerning0
Be sure to first remove the generator code we placed in the monitor\'92s run phase. 
\b0 \expnd0\expndtw0\kerning0
\
Most sequences are short pieces of code, and as we will see later in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 14\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0  you can create a special library sequence that mixes and matches all (or some) of the sequences you write. For this purpose, it is often handy to put all of these sequences in one file called a sequence library file. Other sequences that you write may be larger and more specialized and may live in their own file.\
Create a sequence library with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Sequences expect to eventually propagate sequence items (like our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class) as requests to a driver, and to optionally receive sequence items as responses. Since we unified our result data into the transaction class, it is ok if they are one and the same:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/vkits/alu>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg seq_lib -n alu -f\
++ Creating alu_seq_lib.sv\

\f4\b \kerning1\expnd-2\expndtw-8
alu seq_lib: Enter substitution for <description>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 \

\f4\b \kerning1\expnd-2\expndtw-8
alu seq_lib: Enter substitution for <reqType>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 item_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 alu seq_lib: Enter substitution for <rspType>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 item_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Your sequence library now contains two pre-made classes for you. The first is a generic sequence called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and the second is a sequence \'93library\'94 called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lib_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . This special library sequence is an exerciser that randomly picks and drives sequences from those that are registered to it. 
\b \expnd0\expndtw0\kerning0
We will not need that now so comment it out. 
\b0 \expnd0\expndtw0\kerning0
We will discuss the library sequence further in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 14\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 .
\b \cf10 \expnd0\expndtw0\kerning0
\strokec10 \

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A sequence is a class with a special time-consuming task called a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Technically, it has a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_body()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task as well as a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 post_body()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task, but right now we\'92ll just use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task to drive in a transaction:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls47\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      item_c item = item_c::type_id::create("item");\
      start_item(item);\
      item.randomize();\
      finish_item(item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Step-by-step, this is what this task does:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls48\ilvl0{\listtext	1.	}Create a new transaction.\
{\listtext	2.	}Call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . This does a few things, but primarily waits until the sequencer is ready to send it.\
{\listtext	3.	}Now randomize it. By randomizing after we\'92ve waited for the sequencer to accept it, we\'92ve achieved 
\i \expnd0\expndtw0\kerning0
late binding
\i0 \expnd0\expndtw0\kerning0
. This allows us to add additional constraints, for example, based on the current conditions.\
{\listtext	4.	}Call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 finish_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . This pushes it to the sequencer upon which this sequence is operating.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
To see that the sequence is being driven to the driver, change the run phase of your ALU driver to get the next item, print it out, and then tell the sequencer that it is done:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls49\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    ////////////////////////////////////////////\
   // func: run_phase\
   virtual task run_phase(uvm_phase phase);\
      // constantly poll for new transactions, printing them out\
      forever begin\
         seq_item_port.get_next_item(req);\
         `cn_info(("Driving: %s", req.convert2string()))\
         seq_item_port.item_done(req);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : run_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now only one last thing remains:  You have to create the sequence and 
\i \expnd0\expndtw0\kerning0
start
\i0 \expnd0\expndtw0\kerning0
 it on the sequencer. There are multiple ways of doing this, but putting it in the basic test\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is the most straightforward for now:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls50\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    ////////////////////////////////////////////\
   // func: main_phase\
   virtual task main_phase(uvm_phase phase);\
      alu_pkg::alu_seq_c alu_seq = alu_pkg::alu_seq_c::type_id::create("basic_seq");\
      alu_seq.randomize();\
\
      phase.raise_objection(this);\
      `cn_info(("Starting alu_seq."))\
      alu_seq.start(alutb_env.alu_agent.sqr);\
      phase.drop_objection(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : main_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Be sure to 
\b \expnd0\expndtw0\kerning0
delete the original code that had previously been in the 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\b0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
Running the basic test should produce the desired results. When a sequence\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task is called, it will bind itself to the sequencer specified in its argument, and then call its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_start
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_body
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 post_body
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and finally its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 post_start
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  tasks.\
At this point, you\'92re probably a bit underwhelmed. After all, that\'92s an awful lot of code to write just to send one measly transaction, but things will get more interesting soon.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 `uvm_do Macros\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 For one thing, we can clean up our sequence a little bit. UVM provides a set of macros to create, randomize, and perform a sequence or sequence item from another sequence. These are the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros, and it is 
\i \expnd0\expndtw0\kerning0
very important
\i0 \expnd0\expndtw0\kerning0
 to know what each of them does before using them. But first, let\'92s shorten our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  body a bit:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls51\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task body();\
      item_c item;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_do(item)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Much shorter. 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  does pretty much everything we had before, including randomizing the sequence. Sometimes, you want to randomize your sequence item with constraints. In this case:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls52\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_do
\f4\b \kerning1\expnd-2\expndtw-8
_with
\f3\b0 \kerning1\expnd-2\expndtw-8
(item, 
\f4\b \kerning1\expnd-2\expndtw-8
\{ operation == MUL_A_B; alpha == 7; beta == 5; \}
\f3\b0 \kerning1\expnd-2\expndtw-8
)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 `uvm_do_with
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  takes a constraint block and applies it during the randomization call. Try running this code to ensure you get the correct results.\
Other times, you want to simply create the transaction, set it precisely, and then send it:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls53\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       
\f4\b \kerning1\expnd-2\expndtw-8
`uvm_create(item)
\f3\b0 \kerning1\expnd-2\expndtw-8
\
      item.operation = item_c::MUL_A_B;\
      item.alpha = 7;\
      item.beta = 5;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       
\f4\b \kerning1\expnd-2\expndtw-8
`uvm_send(item)
\f3\b0 \kerning1\expnd-2\expndtw-8
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This is less concise than the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_with
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  call, but it is more efficient because the transaction doesn\'92t go through the randomization process.\
UVM has other macro facilities to send things with a higher priority, to send them on a different sequencer (for sequences attached to virtual sequencers, to be discussed later), for randomizing and sending, and for combinations of all the above. 
\b \expnd0\expndtw0\kerning0
These macros can only be called from a sequence, not from within the component hierarchy.
\b0 \expnd0\expndtw0\kerning0
\
Learn what macros are available from the table below and use the right one.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth2806\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth6333\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Macro
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Purpose
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_create
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Calls 
\f3 \expnd0\expndtw0\kerning0
::create
\f0 \expnd0\expndtw0\kerning0
 on the given sequence or sequence item, and assigns it to this sequence\'92s sequencer.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Creates, starts, randomizes, and finishes the given sequence, on this sequence\'92s sequencer.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight311 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight311 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_pri
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3 \expnd0\expndtw0\kerning0
`uvm_do
\f0 \expnd0\expndtw0\kerning0
, but assigns a priority.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3 \expnd0\expndtw0\kerning0
`uvm_do
\f0 \expnd0\expndtw0\kerning0
, but randomizes with the given constraint block.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight620 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw40\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight620 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw40\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_pri_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3 \expnd0\expndtw0\kerning0
`uvm_do
\f0 \expnd0\expndtw0\kerning0
, but assigns a priority and randomizes with the given constraint block.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight620 \clbrdrt\brdrs\brdrw40\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight620 \clbrdrt\brdrs\brdrw40\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_create_on
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Calls 
\f3 \expnd0\expndtw0\kerning0
::create
\f0 \expnd0\expndtw0\kerning0
 on the given sequence, assigning it to this given sequencer.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_on
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Creates, starts, randomizes, and finishes the given sequence, on the given sequencer.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight311 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight311 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_on_pri
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3 \expnd0\expndtw0\kerning0
`uvm_do_on
\f0 \expnd0\expndtw0\kerning0
, but assigns a priority.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_on_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3 \expnd0\expndtw0\kerning0
`uvm_do_on
\f0 \expnd0\expndtw0\kerning0
, but randomizes with the given constraint block.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight620 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw40\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight620 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw40\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_do_on_pri_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3 \expnd0\expndtw0\kerning0
`uvm_do_on
\f0 \expnd0\expndtw0\kerning0
, but assigns a priority and randomizes with the given constraint block.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight620 \clbrdrt\brdrs\brdrw40\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight620 \clbrdrt\brdrs\brdrw40\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_send
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Calls start and finish on a previously created sequence, without randomization.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_send_pri
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Calls start and finish on a previously created sequence, without randomization, but with the specified priority.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_rand_send
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Calls start, randomize, and finish on a previously created sequence.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_rand_send_pri
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3 \expnd0\expndtw0\kerning0
`uvm_rand_send
\f0 \expnd0\expndtw0\kerning0
, but with the specified priority.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_rand_send_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3 \expnd0\expndtw0\kerning0
`uvm_rand_send
\f0 \expnd0\expndtw0\kerning0
, but randomizes with the given constraint block.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2806\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6333\clftsWidth3 \clheight619 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 `uvm_rand_send_pri_with
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The same as 
\f3 \expnd0\expndtw0\kerning0
`uvm_rand_send_with
\f0 \expnd0\expndtw0\kerning0
, but with the specified priority.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\i\b\fs20 \expnd0\expndtw0\kerning0
Table 5: 
\b0 \expnd0\expndtw0\kerning0
 `uvm_do Family of Macros\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\i0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Getting a Response\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Our driver doesn\'92t do much with it yet, but it will soon enough. For the sake of our future examples, though, let\'92s talk about how the driver would send back a response.\
The response that the driver sends back to the sequencer will end up in the sequence that called it when the sequence calls its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_response
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls54\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task body();\
      item_c item;\
      `uvm_create(item)\
      item.operation = item_c::MUL_A_B;\
      item.alpha = 7;\
      item.beta = 5;\
      `uvm_send(item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       get_response(rsp);\
      `cn_info((\'93Got response result: 0x%08X\'94, rsp.result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 What is 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rsp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ?  Well, a sequence has two pre-defined variables in its base class\'97
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 req
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rsp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 \'97which are of the request and response types, respectively. In our case, they are both transactions of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Let\'92s modify the ALU driver\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to send back a real result whenever it sees a multiply operation:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls55\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       forever begin\
         seq_item_port.get_next_item(req);\
         `cn_info(("Driving: %s", req.convert2string()))\
         if(req.operation == item_c::MUL_A_B)\
            req.result = result_t\'92(req.alpha * req.beta);\
         seq_item_port.item_done(req);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Again, in our ALU example, our response is just the request with the result field filled in. This is a common application, but other cases may be different. A response might be a different packet or transaction. But it must be of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and there\'92s no sense in creating a new one just to hold a 32-bit unsigned integer.\
With any luck, you should see your sequence returns the number 0x23:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 %I-(alu_seq_lib.sv: 51) [alutb_env.alu_agent.sqr.basic_seq] \{ 78ns\} Got response result: 0x00000023\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 9-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Spice things up a bit by adding a random count variable to your sequence. Constrain it to between 1 and 100, and perform that many random transactions, getting each one\'92s response. Also, rename your sequence to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , since 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  isn\'92t very descriptive. In addition to renaming it in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , you\'92ll also need to randomize it before calling its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.\
What happens if you don\'92t call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_response()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ?\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa160\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls56\ilvl0
\f4\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 // class: exer_seq_c\
// Runs <count> transactions\
class exer_seq_c extends uvm_sequence #(item_c, item_c);\
   `uvm_object_utils_begin(alu_pkg::exer_seq_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_field_int(count, UVM_ALL_ON | UVM_DEC)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: count\
   // The number of random transactions to perform\
   rand int count;\
   constraint reasonable_cnstr \{ count inside \{[1:100]\}; \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
\
   function new(string name="alu_seq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      item_c item;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       repeat(count) begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          `uvm_do(item)\
         get_response(rsp);\
         `cn_info(("Got response result: %08X", rsp.result))\
      end\
   endtask \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : exer_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you do not fetch the responses, the sequence fills up with responses and starts complaining about a response queue overflow. You can manage the depth of your sequence\'92s response queue by calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_response_queue_depth
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_response_queue_depth
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or you can turn off the error reporting with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 set_response_queue_error_report_disabled
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Most often, though, it is prudent to just get the responses.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Response Queue Handler\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sequences can also launch multiple requests at a time:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 fork\
   `uvm_do(item1)\
   `uvm_do(item2)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 join\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this case, the response for 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item2
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  could come 
\i \expnd0\expndtw0\kerning0
before
\i0 \expnd0\expndtw0\kerning0
 the response for 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item1
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Or, depending on your architecture, responses can come out-of-order by their very nature. As an alternative to calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_response(rsp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) for each request, you can set up a response handler.\
To do so, you create the function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 response_handler
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that will be called whenever a response comes in. Because this is a virtual function from the base sequence class, which doesn\'92t know what type of response to expect, the function will receive a generic 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which you can then 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 $cast
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to your own response type. To enable this function to be called, you call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 use_response_handler
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  with a value of 1. You can enable or disable this setting on-the-fly, although this may not be a good idea.\
For example:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class my_seq_c extends uvm_sequence#(item_c);\
   `uvm_object_utils(my_seq_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: outstanding_requests\
   // An assoc. array of all pending requests\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    item_c outstanding_requests[int];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name=\'94my_seq\'94);\
      super.new(name);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       use_response_handler(1);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : new\
\
   ////////////////////////////////////////////\
   // func: response_handler\
   // Matches ID of each oustanding request\
  
\f4\b \kerning1\expnd-2\expndtw-8
 virtual function void response_handler(uvm_sequence_item response);\
      item_c resp, request;\
\
      // cast the response to our transaction type\
      $cast(resp, response);\

\f3\b0 \kerning1\expnd-2\expndtw-8
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // look it up and compare\
      request = outstanding_requests[resp.id];\
      if(!request || !request.compare(resp))\
         `cn_err((\'93Response miscompare!\'94))\
      else\
         outstanding_requests.delete(resp.id];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : response_handler\
\
   ////////////////////////////////////////////\
   // func: body\
   // Launch 5 transactions\
   task body();\
      item_c item[5] = new[5];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       fork\
         foreach(item[x])\
            fork\
               automatic item_c this_item = item[x];\
               `uvm_do(this_item)\
               outstanding_requests[this_item.get_sequence_id()] = this_item;\
            join_none\
      join\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : my_seq_c   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \page There are some interesting constructs above that you may not have seen before:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    item_c outstanding_requests[int];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This declares an associative array (or hash, map, or dictionary, if you prefer) of transactions, keyed by an integer.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       use_response_handler(1);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This tells the sequence that its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 response_handler
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function should be called for each response that is received by this sequence.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // look it up and compare\
      request = outstanding_requests[resp.id];\
      if(!request || !request.compare(resp))\
         `cn_err((\'93Response miscompare!\'94))\
      else\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6          outstanding_requests.delete(resp.id);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sequence items come built-in with a unique 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 id
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field. The first line above gets the request from the associative array, using the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 id
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . The second line uses the short-circuit condition of the OR operator. It first checks to see if it was found and if not it prints an error. Otherwise, it checks to see if it mis-compares. The last line deletes the outstanding request from the associative array.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       fork\
         foreach(item[x]) begin\
            fork\
               automatic item_c this_item = item[x];\
               `uvm_do(this_item)\
               outstanding_requests[this_item.get_sequence_id()] = this_item;\
            join_none\
         end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       join\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This seemingly complicated bit of code sends 5 transactions in parallel, pushing each one to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 outstanding_requests
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  hash by its sequence id, which is a unique value that UVM sequencers assign to sequences to assist in their routing. The nested fork-join construct is explained in more detail in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Appendix B\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Complex Routines\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 At this point, sequences must seem pretty boring, but sequences get interesting when they do more than just one transaction. Our little ALU isn\'92t capable of too many exotic functions, but there\'92s enough there that we can do something more complicated.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf5 \expnd0\expndtw0\kerning0
\strokec5 Factorials\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Let\'92s create a sequence that performs the operation:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 9__#$!@%!#__pastedGraphic.pdf \width2400 \height220
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The first thing to do is create a new sequence. With 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 -c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will just give you the sequence class without the file header and you can cut-and-paste it into your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_lib.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/vkits/alu>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utg seq -n factorial -c\

\f4\b \kerning1\expnd-2\expndtw-8
factorial seq: Enter substitution for <reqType>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 
\f5\i \kerning1\expnd-2\expndtw-8
item_c
\f3\i0 \kerning1\expnd-2\expndtw-8
\

\f4\b \kerning1\expnd-2\expndtw-8
factorial seq: Enter substitution for <rspType>:
\f3\b0 \kerning1\expnd-2\expndtw-8
 
\f5\i \kerning1\expnd-2\expndtw-8
item_c
\f3\i0 \kerning1\expnd-2\expndtw-8
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural
\cf7 \kerning1\expnd-2\expndtw-8
\strokec7 class factorial_seq_c extends uvm_sequence #(item_c, item_c);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural
\cf8 \kerning1\expnd-2\expndtw-8
\strokec8    `uvm_object_utils_begin(alu_pkg::factorial_seq_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf9 \kerning1\expnd-2\expndtw-8
\strokec9    `uvm_object_utils_end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Our factorial sequence should have one random field, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 operand
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is the number for which we want to compute the factorial. Then, we\'92ll loop from 1 to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 operand
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , collecting the result response each time, and present the final answer. We should also squirrel away the answer in the class as a member field, so that the basic test can then print the final result.\
Here is the final sequence:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls57\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class factorial_seq_c extends uvm_sequence #(item_c, item_c);\
   `uvm_object_utils_begin(alu_pkg::factorial_seq_c)\
      `uvm_field_int(operand, UVM_ALL_ON)\
      `uvm_field_int(answer,  UVM_ALL_ON)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: operand\
   // The value to perform the factorial on\
   rand bit [15:0] operand;\
   constraint operand_cnstr \{ operand <= 9; \}\
   \
   // field: answer\
   // The final result\
   result_t answer = 1;\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="factorial_seq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   // Loop from 1..operand and multiply all the numbers together\
   virtual task body();\
      item_c item;\
      byte num;\
\
      for(num = 1; num <= operand; num++) begin\
         `uvm_do_with(item, \{ operation == MUL_A_B; alpha == num; beta == answer[15:0]; \})\
         get_response(rsp);\
         answer = rsp.result;\
         `cn_info(("num=%0d, answer=%0d", num, answer))\
      end\
      `cn_info(("%0d! = %0d", operand, answer))\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : factorial_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you\'92re a math whiz, you\'92ve already figured out that our ALU has a bit of a limitation. Since it can only take 16-bit operands, our largest factorial operand is a meager 9, and the result we keep must be constrained to those 16 bits. Nonetheless, it is a good example of how sequences can be used to convert multiple transactions into one larger transaction.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 9-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Modify your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to create and send in a factorial sequence with an operand of 9, and print the result. \
Instead of the variable name 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 answer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 factorial_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , change the name of the variable to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead. What happens?  How do you solve this problem?\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The first part of this should have been straightforward:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls58\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    ////////////////////////////////////////////\
   // func: main_phase\
   virtual task main_phase(uvm_phase phase);\
      alu_pkg::factorial_seq_c factorial_seq = new("factorial_seq");\
      factorial_seq.operand = 9;\
      phase.raise_objection(this);\
      factorial_seq.start(alutb_env.alu_agent.sqr);\
      `cn_info(("The factorial of 9 is %d", factorial_seq.answer))\
      phase.drop_objection(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : main_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The problem with naming the answer 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead is that it will conflict with the local name 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the transaction. When the constraint is applied, it is local to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class, which already has a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field. Thus, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta == result;
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  constraint refers to the transaction\'92s version of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Worse, because we left 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  uninitialized, your simulator may complain that there are X\'92s or Z\'92s in a constraint value.\
You might be tempted to use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 beta == this.result;
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to distinguish the two, but since the constraint block is in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  scope, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 this
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  also refers to the transaction and not the sequence.\
Fortunately, the architects of SystemVerilog anticipated this problem and created the 
\f4\b\fs22 \expnd0\expndtw0\kerning0
\up0 local::
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  scope operator
\b0 \expnd0\expndtw0\kerning0
. This does exactly what you want:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls59\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          `uvm_do_with(item, \{ operation == MUL_A_B; alpha == num; beta == 
\f4\b \kerning1\expnd-2\expndtw-8
local::
\f3\b0 \kerning1\expnd-2\expndtw-8
result[15:0]; \})\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 9-3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Develop the sequence 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 that creates a random array of words and add them up. To create a randomly sized array, it is always important to constrain the array\'92s size to a reasonable value, otherwise it will probably randomize itself to an extremely large number and crash the simulator.  Also, let\'92s keep each element in the array small (less than or equal to 100) so that we do not have to deal with overflows.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls60\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: data\
   // An array of words to be summed\
   rand bit [15:0] data[];\
\
   // keep it to a reasonable size\
   constraint data_cnstr \{ \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       data.size() inside \{[1:50]\};\
      foreach(data[x]) \{\
         data[x] inside \{[0:100]\};\
      \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now when we randomize our sequence, it will create a randomly sized array of random 16-bit words. To declare our data array as a UVM configuration field, we use the following macro:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls61\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_field_array_int(data, UVM_ALL_ON | UVM_DEC)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This line declares an array of 
\i \expnd0\expndtw0\kerning0
numbers
\i0 \expnd0\expndtw0\kerning0
. UVM\'92s field macros just lump all numbers as ints, they do not distinguish between bytes, ints, or 42-bit values. Declaring this field allows you to pack, unpack, and print it correctly (if you wanted to). \
Also, add the result as a field of the sequence:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls62\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: result\
   // The final answer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    result_t result;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Next, write the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 sequence to send transactions into the ALU that will sum the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 data
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  array.  \
Finally, modify the driver to accomodate any new instructions that you will be sending, and modify the basic test\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 to randomize and send your new sequence.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The solution below uses the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ACCUM
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operator to sum up all of the numbers.  It also makes sure that the previous result is clear by first calling the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 CLR_RES
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operator.  \
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls63\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class sum_array_seq_c extends uvm_sequence #(item_c, item_c);\
   `uvm_object_utils_begin(alu_pkg::sum_array_seq_c)\
      `uvm_field_array_int(data, UVM_ALL_ON | UVM_DEC)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: data\
   // An array of words to be summed\
   rand bit [15:0] data[];\
\
   // constraint: data_cnstr\
   // keep it to a reasonable size\
   // and use small numbers only\
   constraint data_cnstr \{ \
      data.size() inside \{[1:50]\};\
      foreach(data[x]) \{\
         data[x] inside \{[0:100]\};\
      \}\
   \}\
\
   // field: result\
   // The final answer\
   result_t result;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
\
   function new(string name="sum_array_seq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      item_c item;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_do_with(item, \{ operation == CLR_RES; \})\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       get_response(rsp);\
      foreach(data[x]) begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          `uvm_do_with(item, \{ operation == ACCUM; alpha == data[x]; \})\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          get_response(rsp);\
      end\
      result = rsp.result;\
      `cn_info(("Sum of this array = 0x%0x", result))\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : sum_array_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve also used SystemVerilog\'92s handy 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 foreach
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  construct. This neatly replaces iterators from C++ and creates two implicit variables: 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 x
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 data[x]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . 
\b \expnd0\expndtw0\kerning0
These implicit variables are local in scope only to the 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 foreach
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  block.\

\b0 \expnd0\expndtw0\kerning0
The changes to the driver\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  are straightforward.
\b \expnd0\expndtw0\kerning0
\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls64\ilvl0
\f4\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task run_phase(uvm_phase phase);\
      result_t prev_result;\
      \
      forever begin\
         seq_item_port.get_next_item(req);\
         `cn_info(("Driving: %s", req.convert2string()))\
         case(req.operation)\
            item_c::MUL_A_B:  req.result = result_t'(req.alpha * req.beta);\
            item_c::ACCUM:    req.result = result_t'(prev_result + req.alpha);\
            item_c::CLR_RES:  req.result = 0;\
         endcase\
         prev_result = req.result;\
         seq_item_port.item_done(req);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : run_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Sequencing other Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 So far, our little sequences have just been producing sequence items of our transaction type, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . But, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class is derived from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Therefore, 
\b \expnd0\expndtw0\kerning0
sequences can also 
\i \expnd0\expndtw0\kerning0
do
\i0 \expnd0\expndtw0\kerning0
 other sequences
\b0 \expnd0\expndtw0\kerning0
. This allows you to have layers of sequences.\
When you call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  (or any of its variants) on a sequence, things are just a little bit different. First of all, you don\'92t need to (in fact, you shouldn\'92t) call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_response
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . That\'92s because the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros recognize that you are using a sequence and they call their 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  tasks, instead of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . When
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  completes, your sequence is already done, and whatever response data that\'92s stored in the sequence is available for your inspection.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 9-4\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
With everything you\'92ve learned so far, this next one should present some fresh challenges. Use our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 factorial_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to provide a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_of_factorials_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that solves this equation:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 10__#$!@%!#__pastedGraphic.pdf \width3680 \height500
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is an implementation of the sum-of-factorials equation using the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  sequence. Hopefully yours looks similar:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls65\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class sum_of_factorials_seq_c extends uvm_sequence #(item_c);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_object_utils_begin(alu_pkg::sum_of_factorials_seq_c)\
      `uvm_field_int(op_x, UVM_ALL_ON | UVM_DEC)\
      `uvm_field_int(op_y, UVM_ALL_ON | UVM_DEC)\
      `uvm_field_int(result, UVM_ALL_ON | UVM_DEC)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // vars: op_x, op_y\
   // Operands for this summation function\
   rand bit [15:0] op_x;\
   rand bit [15:0] op_y;\
\
   constraint operands_cnstr \{ \
      op_x < op_y;\
      op_x inside \{[1:8]\};\
      op_y inside \{[1:8]\};\
   \}\
   \
   // field: result\
   // The final result\
   result_t result;\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="sum_of_factorials_array_seq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      int num;\
      bit [15:0] data[];\
      factorial_seq_c fact_seq;\
      sum_array_seq_c sum_seq;\
      int  idx;\
      \
      // fill the data array with all the factorials\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       data = new[(op_y - op_x + 1)];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       idx = 0;\
      for(num = op_x; num <= op_y; num++) begin\
         `uvm_do_with(fact_seq, \{ operand == num; \})\
         data[idx] = fact_seq.result;\
         idx++;\
      end\
\
      // now sum the array\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_create(sum_seq)\
      sum_seq.data = data;\
      `uvm_send(sum_seq)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       result = sum_seq.result;\
      `cn_info(("The sum of factorials from %0d to %0d is %0d.",\
                op_x, op_y, result))\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : sum_of_factorials_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \page A few important notes about this implementation:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       data = new[(op_y - op_x + 1)];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This is how you size a dynamic array\'97by new'ing it with the number of entries. Using a queue would be a nice alternative, but the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  expects a dynamic array of unsigned bytes, so that\'92s what we\'92ll give it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_create(sum_seq)\
      sum_seq.data = data;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_send(sum_seq)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We do not want to create a random sequence with random data. We want to use a very specific array, therefore we cannot use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Instead, we call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_create
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to perform both the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operation and to wait for the sequencer to accept it. Then, we assign the data array to our local array. Because it is an array, this is merely copying a reference and therefore does not have the overhead of copying each byte at a time. Finally, we call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_send
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to send it to the sequencer. When this call returns, the sequence has completed and we can fetch the answer.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Sequence Hierarchy\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Allowing sequences to \'91do\'92 other sequences is the basis of a sequence hierarchy. More complex examples might involve a complete protocol hierarchy. A hefty example is an independent TCP or UDP session, living inside IPv4 packets, driven into a device using SRIO messages, all for the sake of performing a compression operation.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i \expnd0\expndtw0\kerning0
What\'92s the point of all this?
\i0 \expnd0\expndtw0\kerning0
  The point is that the compression sequence does not need to know anything about the underlying sequences, which interface it went over, or how it was broken up into many packets over a long period of time. It just deals with sending in a compression request, and when it\'92s done, it has the compression result.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 11__#$!@%!#__pastedGraphic.pdf \width9360 \height3120
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 10: 
\b0 \expnd0\expndtw0\kerning0
Sequence Hierarchy\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\i0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 The Sequencer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Take a look at your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_sqr.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  sequencer file. Note that there\'92s really nothing in it. It is actually doing quite a bit, though. Where sequencers really rock is when they are handling multiple streams of stimulus at once. So far, we\'92ve been sending it one sequence at a time. Pretty boring. Let\'92s instead use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fork..join
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to start multiple sequences at the same time. Change your basic test\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to something more like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls66\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task main_phase(uvm_phase phase);\
      alu_pkg::sum_of_factorials_seq_c sof_seq = new("sof");\
      alu_pkg::sum_array_seq_c sum_array_seq = new("sum_array");\
      alu_pkg::exer_seq_c exer_seq = new("exer_seq");\
      \
      phase.raise_objection(this);\
      fork\
         begin\
            sof_seq.randomize();\
            `cn_info(("Starting:\\n%s", sof_seq.sprint()))\
            sof_seq.start(alutb_env.alu_agent.sqr);\
            `cn_info(("The sum-of-factorials from %0d to %0d is %d",\
                      sof_seq.op_x, sof_seq.op_y, sof_seq.result))\
         end\
\
         begin\
            sum_array_seq.randomize() with \{data.size() > 8; \};\
            `cn_info(("Starting:\\n%s", sum_array_seq.sprint()))\
            sum_array_seq.start(alutb_env.alu_agent.sqr);\
            `cn_info(("The sum is %0d", sum_array_seq.result))\
         end\
\
         begin\
            alu_pkg::factorial_seq_c fact_seq = new("fact_seq");\
            fact_seq.randomize();\
            fact_seq.start(alutb_env.alu_agent.sqr);\
         end\
      join\
      \
      phase.drop_objection(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : main_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fork..join
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  concept is one you\'92ll soon use a lot of. Here, we\'92ve spawned four separate threads that will start four separate randomized sequences on the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_env.alu_agent.sqr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  at the same time. The sequencer now has four sequence threads arbitrating for its attention. It has a built-in arbitrator that has several different modes of operation, shown in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Table 6\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 .\
The sequencer chooses to arbitrate among the sequences when the currently chosen sequence either waits for a delay or sends an item. When the sequence calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_item()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , it puts its hat in the ring to try to win the next arbitration, and the item\'92s priority and other factors will determine the winner. The arbitration occurs when the driver calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_next_item()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . If the sequence is chosen, then the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_item()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task finishes and the sequence\'92s thread takes over, performing randomization on the item, or whatever else you wish, and eventually sending it along to the driver.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth2735\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth6404\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Arbitration Type
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Purpose
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2735\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6404\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_FIFO
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Requests are granted in FIFO order (default)
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2735\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6404\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_WEIGHTED
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Requests are granted randomly by weight
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2735\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6404\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_RANDOM
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Requests are granted randomly
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2735\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6404\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_STRICT_FIFO
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Requests at highest priority granted in fifo order
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2735\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6404\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_STRICT_RANDOM
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Requests at highest priority granted in randomly
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2735\clftsWidth3 \clheight780 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth6404\clftsWidth3 \clheight780 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SEQ_ARB_USER
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Arbitration is delegated to the user-defined function, 
\f3 \expnd0\expndtw0\kerning0
user_priority_arbitration
\f0 \expnd0\expndtw0\kerning0
. That function will specify the next sequence to grant.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\i\b\fs20 \expnd0\expndtw0\kerning0
Table 6: 
\b0 \expnd0\expndtw0\kerning0
 Sequencer Arbitration Algorithms\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\b\fs24 \expnd0\expndtw0\kerning0
This interleaving of sequence items is the whole point of sequences and sequencers. 
\b0 \expnd0\expndtw0\kerning0
While they have other benefits, this is what turns generic operations into a tangled web of stimulus that is better at catching bugs than directed test cases are. \
Below is a more complex example of how sequencers and their sequences can be viewed. On the left is a hierarchy of independent sequences, each one minding its own business and doing its own thing. They can each 
\i \expnd0\expndtw0\kerning0
do
\i0 \expnd0\expndtw0\kerning0
 lower-level sequences. In the middle, the sequencer performs the arbitration and interleaving. On the rightmost edge is the random stream of transactions themselves.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 12__#$!@%!#__pastedGraphic.pdf \width9360 \height3400
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 11: 
\b0 \expnd0\expndtw0\kerning0
Sequencer Interleaving\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
And it does it all for free, which actually has two benefits:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls67\ilvl0{\listtext	1.	}First, you don\'92t have to write this complex arbitrator yourself, for every testbench, and for every transaction type.\
{\listtext	2.	}Second, these sequences essentially operate in a vacuum. They effectively separate the generation of stimulus from the underlying implementation, allowing you to focus on one thing at a time. Creating a sum-of-factorials sequence does not need to take into account how the factorial sequence was implemented.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Locking and Grabbing\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you now run your test, you\'92ll find that all your sequences are quite jumbled together. However, if you used your calculator to verify the output in the logfile, you\'92ll see this leads to a problem. In order to sum an array of values using the clear and accumulate operations, these sequences need to be atomic. Otherwise, the stored result value in the ALU will become mixed up with all the other calculations.\
A sequence can get exclusive access to its sequencer via 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lock
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 grab
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . When a sequence locks its sequencer, it first waits for it to win arbitration, and then it blocks other sequences until it calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 unlock
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 grab
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  does the same thing, but it prioritizes the lock so that it will win arbitration next so long as other sequences do not already have exclusivity on the sequencer. You would use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 grab
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lock
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  for higher priority sequences\'97such as an interrupt handler.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 9-5\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Change the sequence body of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to lock the sequencer before doing the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 CLR_RES
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operation and to unlock it after the last 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ACCUM
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  operation. Verify that your results are now correct.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The body of your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will now have this as its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls68\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task body();\
      item_c item;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       lock();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_do_with(item, \{ operation == CLR_RES; \})\
      get_response(rsp);\
      foreach(data[x]) begin\
         `uvm_do_with(item, \{ operation == ACCUM; alpha == data[x]; \})\
         get_response(rsp);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       unlock();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       result = rsp.result;\
      `cn_info(("Sum of this array = %0x:", result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sequences and sequencers offer dramatically more features than presented here. You\'92ll see more of them later. What we know now should suffice to provide enough interesting stimulus for the driver we\'92re about to write.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 10: Drivers and Monitors\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We already created the empty driver class way back in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 7\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 . In this chapter, we\'92re going to hook it up to the interface we created in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 6\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , receive requests from the sequencer, drive the transactions, collect the results, and send them back to the sequencer. Then we will create a monitor in the same way and use analysis ports to announce what happens on the interface.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Responsibilities of Drivers and Monitors\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 At their heart, drivers and monitors are really very simple: \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural
\cf3 \expnd0\expndtw0\kerning0
\strokec3 Drivers and monitors must operate at the 
\i \expnd0\expndtw0\kerning0
lowest level of atomicity
\i0 \expnd0\expndtw0\kerning0
 for the interface it serves. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 In our case, the ALU transaction cannot be divided up into smaller pieces, so that is the sequence item type that we developed in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 5\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 . Other interfaces allow for time-division multiplexing of cycles between larger transaction types. For example, a bus protocol in which packet data can be independently streamed from different ports should have as its sequence item the single clock cycle of data and not the packet.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural
\cf3 \expnd0\expndtw0\kerning0
\strokec3 A single agent should be designed for each \'93action\'94 on a bus.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 Often a bus protocol that is thought of as a single interface can contain multiple \'93actions\'94 happening at once. For example, data may flow in one direction while credits are returned in the other direction. These different actions should be separated into different agents, each with their own interfaces so that they can act independently. The data driver agent will receive credit notifications from the credit agent and drive data accordingly. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural
\cf3 \expnd0\expndtw0\kerning0
\strokec3 Drivers must never be responsible for deciding what to do next.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 Sequences and sequencers are excellent at arbitrating between multiple streams of data (such as the packet example above), at waiting on available resources (i.e. credits), and at randomly inserting idle cycles. Putting these smarts inside of a driver is a mistake that will become obvious when you learn more advanced sequencing techniques.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Fetching the Interface\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You\'92ll recall that during \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 6\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0  we instantiated the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the top-level testbench and pushed virtual references to its modports into the configuration database with the names 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::drv_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::mon_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . The suffix 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 _vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  indicates that it is a virtual interface 
\b \expnd0\expndtw0\kerning0
[Rule 2.5-1]
\b0 \expnd0\expndtw0\kerning0
.\
We are trying to make a reusable agent and the interfaces won\'92t always have those names, so let\'92s create a configuration string in the driver called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 intf_name
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls69\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class drv_c extends uvm_driver#(item_c);\
   `uvm_component_utils_begin(alu_pkg::drv_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_field_string(intf_name, UVM_ALL_ON)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   // field: intf_name\
   // The name of the virtual interface that we'll hook up to\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    string intf_name = "drv_vi";\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We use the macro 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field_string
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to declare this configuration field, so that it will auto-populate itself when its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is called. If no other classes have added this configuration to the database for this driver, then it will take the default name of \'93
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ,\'94 which is what we want in the first place. This is how you give a configuration its default value.\
Next, we need to declare the virtual interface as a field in the driver, so that it can access the signals:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls70\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: drv_vi\
   // Virtual interface to drive on\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual alu_intf.drv_mp drv_vi;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve placed this definition in the fields group, to let readers know that this is not something they\'92ll be touching. All they need to do is set the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 intf_name
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  string correctly. Also, the type of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  must match 
\b \expnd0\expndtw0\kerning0
exactly
\b0 \expnd0\expndtw0\kerning0
 what was used to store this interface in the database in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_tb_top
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `cn_set_intf(
\f4\b \kerning1\expnd-2\expndtw-8
virtual alu_intf.drv_mp
\f3\b0 \kerning1\expnd-2\expndtw-8
, "alu_pkg::alu_intf", "drv_vi", alu_i.drv_mp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This will give us access to the driver modport of this interface. Now it needs to be fetched from the interface.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 10-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Fetch the interface from the resource database and assign it to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . In the driver\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , call the interface\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reset()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function at the start of time, but keep the fake driver code that was there previously. \
You can also 
\b \expnd0\expndtw0\kerning0
remove
\b0 \expnd0\expndtw0\kerning0
 the call to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reset()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that we left in the testbench earlier:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    initial\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       alu_i.reset();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Afterwards, you should be able to simulate successfully.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Like the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_set_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro that was used earlier, there is a corresponding 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_get_intf
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls71\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
      // get the interface\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `cn_get_intf(virtual alu_intf.drv_mp, \'93alu_pkg::alu_intf\'94, intf_name, drv_vi)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The macro unrolls to this:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6      if(!uvm_resource_db#(virtual alu_intf.drv_mp)::get(\'93alu_pkg::alu_intf\'94, intf_name, drv_vi))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          `cn_fatal(("%s virtual interface not present.", intf_name))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note that it is important to flag a fatal error if the interface is not found, because that would indicate a configuration error, and there is no purpose in continuing. The call to get the interface must take place 
\i \expnd0\expndtw0\kerning0
after
\i0 \expnd0\expndtw0\kerning0
 the call to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  because if it happened before then the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 intf_name
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable would not have been updated by the database.\
Your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  should now look like this to ensure that the assertions in the interface do not fire.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls72\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task run_phase(uvm_phase phase);\
      result_t prev_result;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       drv_vi.reset();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural
\cf7 \kerning1\expnd-2\expndtw-8
\strokec7       // constantly poll for new transactions, printing them out\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural
\cf8 \kerning1\expnd-2\expndtw-8
\strokec8       forever begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf9 \kerning1\expnd-2\expndtw-8
\strokec9          seq_item_port.get_next_item(req);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Getting the Next Item\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 As you saw in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 9\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , drivers have a built-in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 seq_item_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  through which the sequencer pushes 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_items
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . It is a special 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_seq_item_pull_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that is parameterized to your request and response types. Like the sequences, the driver also has built-in fields 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 req
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rsp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  corresponding to its current request and response. \
To get the next request, you call a blocking task :  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 seq_item_port.get_next_item(req);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It will return when the next request is available. Or, you can call the function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 try_next_item(req)
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to see if one is available in zero-time.\
Our ALU design operates in a pull-mode. The driver attempts to fetch the next item from the sequencer, and the sequencer\'92s arbitration scheme selects a sequence, and so on. Both driver and sequencer are also offered in push-mode, where the sequencer pushes sequence items to the driver. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Driving a Transaction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There are myriad approaches to doing this, but we went through the exercise of learning how to pack and unpack transactions, so we might as well use that method. \
UVM\'92s current packing algorithms are offered in three flavors: give me a list of bits, give me a list of bytes, and give me a list of ints (32-bit numbers). Since this is the fun part, you can do it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 10-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Write a task in the driver to fetch and drive transactions. Name it 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 driver
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and change the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task to reset the interface and to call this task.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Hint: \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
You can use the following algorithm:\
\pard\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li540\fi-180\sl264\slmult1\pardirnatural\qj
\ls73\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Call the interface\'92s reset function, to ensure that X\'92s do not get into the design.\
\pard\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li540\fi-180\pardirnatural\qj
\ls73\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Run forever:\
\pard\tx720\tx1080\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li1080\fi-720\pardirnatural\qj
\ls74\ilvl1{\listtext	1.	}Get the next transaction.\
{\listtext	2.	}Pack the transaction into an array of bytes.\
{\listtext	3.	}For each byte:\
\pard\tx1080\tx1440\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li1440\fi-1080\pardirnatural\qj
\ls74\ilvl2
\f6 \expnd0\expndtw0\kerning0
{\listtext	\uc0\u10020 	}
\f0 \expnd0\expndtw0\kerning0
Wait 1 clock cycle on the interface.\
\ls74\ilvl2
\f6 \expnd0\expndtw0\kerning0
{\listtext	\uc0\u10020 	}
\f0 \expnd0\expndtw0\kerning0
Assert the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  line only if this is the very first cycle.\
\ls74\ilvl2
\f6 \expnd0\expndtw0\kerning0
{\listtext	\uc0\u10020 	}
\f0 \expnd0\expndtw0\kerning0
Drive the byte of data.\
\pard\tx720\tx1080\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li1080\fi-720\pardirnatural\qj
\ls74\ilvl1{\listtext	4.	}Wait 1 clock, then clear the bus.\
{\listtext	5.	}Wait for the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ready
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  line to go high.\
{\listtext	6.	}Fetch the result from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  bus.\
{\listtext	7.	}Assign the result to the original request\'92s result field.\
\pard\tx720\tx1080\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li1080\fi-720\sa240\pardirnatural\qj
\ls74\ilvl1\expnd0\expndtw0\kerning0
{\listtext	8.	}Call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_done
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and send back the original request.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The challenge here was probably dealing with the clocking block. While it may make for extra typing here, clocking blocks are worth the effort if the clock edges may change or if you later want to add sampling delays. Clocking blocks in an interface define what the sampling clock edge is, so the notion of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 @(posedge clk)
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  has been abstracted away. If an interface suddenly became a dual-data rate interface, the only place you would need to change any code would be in the clocking block.\
They also eliminate race conditions between the verification environment and the RTL, because they have a default sampling delay of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 #1STEP
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . \
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls75\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_drv.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // func: driver\
   // Drive transactions by packing into an array of bytes, then sending two 4-bit cycles\
   // for each byte. Then wait for the response and send it back.\
   task driver();\
      byte unsigned stream[];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
      @(posedge drv_vi.drv_cb.rst_n);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       forever begin\
         seq_item_port.get_next_item(req);\
\
         req.pack_bytes(stream);\
         foreach(stream[x]) begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             @(drv_vi.drv_cb);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             drv_vi.drv_cb.ctl <= (x == 0)? 1'b1 : 1'b0;\
            drv_vi.drv_cb.dat <= stream[x];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          end\
\
         // wait 1 clock, then clear the bus\
         @(drv_vi.drv_cb);\
         drv_vi.reset();\
         \
         // wait for result\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          @(posedge drv_vi.drv_cb.ready);\
         req.result = drv_vi.drv_cb.result;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          seq_item_port.item_done(req);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : driver\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you happened to leave the checker in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , then hopefully the test still passes. \
A few notes on the above design:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             @(drv_vi.drv_cb);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Because of the clocking block, the method to wait 1 clock is to just wait on the clocking block.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             drv_vi.drv_cb.ctl <= (x == 0)? 1'b1 : 1'b0;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6             drv_vi.drv_cb.dat <= stream[x];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The virtual interface that the driver has is a modport of an existing interface. Recall that this modport, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_mp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , has only two features:  
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_cb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reset
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    modport drv_mp(clocking drv_cb,\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6                   import reset);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Therefore, all signal accesses (both read and write) must take place through the clocking block, which also specifies the direction (input or output) that the driver is permitted to access. There is no such signal as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi.dat
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . There is only 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_vi.drv_cb.dat
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . The same can be said for 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rst_n
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          @(posedge drv_vi.drv_cb.ready);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6          req.result = drv_vi.drv_cb.result;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Notice that because of the clocking block, we are not concerned about a race condition between 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ready
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .  Both signals are only examined on the positive edge of the clock, so the its positive edge is not perceived by the verification environment until the point shown in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Figure 12\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 13__#$!@%!#__pastedGraphic.pdf \width3560 \height3260
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 12:
\b0 \expnd0\expndtw0\kerning0
 Sample point due to clocking block.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\i0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Monitoring Activity\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 As its name implies, the monitor is a component that watches the interface. It checks for any protocol violations and collects all activity it sees, broadcasting these as transactions to all listeners through an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 analysis
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 _
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Unlike the driver and the sequencer, a monitor is always present in an agent whether it is active or not.\
The monitor in this agent will look very much like the driver, except the exact opposite. Instead of watching the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 drv_cb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  clocking block, it will watch the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mon_cb; 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 instead of getting transactions from the sequencer, it will broadcast the ones that it sees; and instead of packing and driving transactions, it will collect data and unpack it into a transaction.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 10-3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Write the ALU monitor. Use the hints below if you need to.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Hint: \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
As with the driver, we must start by making sure we get the interface. Then, set up the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to launch two tasks: 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fork..join_any
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  construct so that the tasks are disabled on reset.\
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task should be straightforward: constantly wait for the rising edge of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ready
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal, and broadcast the result bus out the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitored_result_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  by calling its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function.\
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task is a little bit trickier. Because the protocol offers no end-of-transaction signal, it must be inferred from the operation. Wait for the rising edge of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , grab the data, and based on the operation that\'92s being driven, collect the correct number of data cycles in a dynamic array of bytes. Report an error if the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal goes high on any cycle other than the first one.\
When that\'92s done, you should be able to create a new transaction, unpack those bytes into it, and write it out of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitored_item_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . You might also want to add debug messages to see what it\'92s doing.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is one possible implementation of the ALU monitor, with some explanations following:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls76\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_mon.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `include "alu_item.sv"\
\
// class: mon_c\
// Monitors an ALU bus and reports activity.\
class mon_c extends uvm_monitor;\
   `uvm_component_utils_begin(alu_pkg::mon_c)\
      `uvm_field_string(intf_name, UVM_ALL_ON)\
   `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   // field: intf_name\
   // The name of the virtual interface that we'll hook up to\
   string intf_name = "mon_vi";\
\
   //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // field: monitored_item_port\
   // All monitored transactions go out here\
   uvm_analysis_port #(item_c) monitored_item_port;\
\
   // field: monitored_result_port\
   // All monitored results go out here\
   uvm_analysis_port #(result_t) monitored_result_port;\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: mon_vi\
   // Virtual interface to monitor\
   virtual alu_intf.mon_mp mon_vi;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="mon",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
      // get the interface\
      `cn_get_intf(virtual alu_intf.mon_mp, "alu_pkg::alu_intf", intf_name, mon_vi)\
\
      monitored_item_port = new("monitored_item_port", this);\
      monitored_result_port = new("monitored_result_port", this);\
   endfunction : build_phase\
\
   ////////////////////////////////////////////\
   // func: run_phase\
   virtual task run_phase(uvm_phase phase);\
      forever begin\
         @(posedge mon_vi.mon_cb.rst_n);\
\
         fork\
            monitor_item();\
            monitor_result();\
            @(negedge mon_vi.mon_cb.rst_n);\
         join_any\
\
         `cn_info(("Stopping monitor due to reset."))\
         disable fork;\
      end\
      \
   endtask : run_phase\
\
   ////////////////////////////////////////////\
   // func: monitor_item\
   // Watch and broadcast the transactions on the bus\
   virtual task monitor_item();\
      int num_clocks;\
      byte unsigned data[];\
      item_c item;\
\
      forever begin\
         // wait for the rising edge of the control\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          @(posedge mon_vi.mon_cb.ctl);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
         // determine how many clocks are in this item\
         case(mon_vi.mon_cb.dat)\
            // 5-cycle transactions\
            item_c::ADD_A_B, item_c::SUB_A_B, item_c::SUB_B_A,\
            item_c::MUL_A_B, item_c::DIV_A_B, item_c::DIV_B_A : \
               num_clocks = 5;\
\
            // 3-cycle transactions\
            item_c::INC_A, item_c::INC_B, item_c::ACCUM : \
               num_clocks = 3;\
\
            // 1-cycle transactions\
            item_c::CLR_RES : \
               num_clocks = 1;\
\
            default:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6                `cn_err(("Unknown operation type: %02X", mon_vi.mon_cb.dat))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          endcase            \
\
         // collect the data for each cycle\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          data = new[num_clocks];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          for(int clk=0; clk < num_clocks; clk++) begin\
            data[clk] = mon_vi.mon_cb.dat;\
            @(mon_vi.mon_cb);\
            if(mon_vi.mon_cb.ctl == 1)\
               `cn_err(("The CTL signal is high during a transaction that should have been %0d clocks.", num_clocks))\
         end\
\
         // create the transaction, unpack into it, and write it out the monitored_item_port\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          item = item_c::type_id::create("mon_item");\
         item.unpack_bytes(data);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          `cn_info(("Monitored: %s", item.convert2string()))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          monitored_item_port.write(item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       end\
   endtask : monitor_item\
   \
   ////////////////////////////////////////////\
   // func: monitor_result\
   // Monitor the ready and result signal and broadcast it out the monitored_result_port\
   virtual task monitor_result();\
      forever begin\
         @(posedge mon_vi.mon_cb.ready);\
         `cn_info(("Monitored Result: %08X", mon_vi.mon_cb.result))\
         monitored_result_port.write(mon_vi.mon_cb.result);\
      end\
   endtask : monitor_result\
   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : mon_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A few explanations are in order:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          @(posedge mon_vi.mon_cb.ctl);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Here, we are waiting for the positive edge of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal. Because of the clocking-block, there is no concern that this event will be triggered on the rising edge of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  but before the DUT drives the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 dat
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  lines. Why is that?  Because the event will sample on the clock specified by the clocking block\'97in this case, the positive edge of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . If the clocking block had specified the negative edge of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , you would find that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 posedge
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  event triggers on the negative edge of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 clk
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , even though the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal is driven on the rising edge.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6                `cn_err(("Unknown operation type: %02X", mon_vi.mon_cb.dat))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A key element to any monitor is protocol checking. The interface itself already checks for X\'92s. Here, we ensure that only legal values are specified on the first cycle. Later, we check that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal does not go high any other time during the transaction. And, at the end of the transaction, we guarantee that the data collected has a legal format because it can successfully unpack. If the unpack were to fail, it would report an error for us.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          data = new[num_clocks];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you\'92re coming from a C/C++ background, you might be wary by this line, because there are no free or delete operators, and this sits in a forever loop. This code looks like a memory leak, but it\'92s not. SytemVerilog has automatic garbage-collection, so when nobody else is referencing this data, it gets freed automatically. As it happens, this data is local in scope to this task, and it is copied byte-by-byte into the transaction during the unpack operation. Therefore, the bytes pointed to by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 data
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable will have zero references the next time the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 data
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable is newed.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          item = item_c::type_id::create("mon_item");\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Like the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 data
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable is local in scope to the task, and we keep creating new ones. Are these also garbage-collected when the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable creates a new one?  Well, yes and no. If nobody were listening on the analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , then they would be garbage collected. In this testbench, though, we have the monitor broadcasting to the agent, which broadcasts to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_item_subscriber_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class we implemented in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 8\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 . This subscriber doesn\'92t hold onto the transaction, though. It merely prints it out, so these transactions will be garbage collected. Other subscribers may store them in a scoreboard, or some other temporary location, and their reference count will not go to zero, so they will not be freed.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          item.unpack_bytes(data);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 unpack_bytes
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function is used in the same manner as the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pack_bytes
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function we used in the driver. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 unpack_bytes
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function will report an error on its own if it is unsuccessful, and it returns an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 int
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  which is the number of bits that were unpacked. We won\'92t need this information, though, so we don\'92t look at it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          monitored_item_port.write(item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Here we are writing that transaction out of the analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Elsewhere, we write the result value out of the other monitored result analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Since these are connected to the agent\'92s analysis ports, they will likewise be broadcast out of the agent.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task run_phase(uvm_phase phase);\
      forever begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          @(posedge mon_vi.mon_cb.rst_n);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
         fork\
            monitor_item();\
            monitor_result();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             @(negedge mon_vi.mon_cb.rst_n);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          join_any\
\
         `cn_info(("Stopping monitor due to reset."))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          disable fork;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Because your drivers and monitors should be resilient enough to handle reset conditions,  the run phase handles these by disabling each of the outstanding tasks and looping back again. \
However, this algorithm can be improved upon. The paper entitled \'93{\field{\*\fldinst{HYPERLINK "http://cafp01.caveonetworks.com/mrwest/SNUG2013/ma4_hunter_paper.pdf"}}{\fldrslt \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Reset Testing Made Simple with UVM Phases}}\'94 discusses this topic in more detail, and the design patterns in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Appendix D\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0  use these best practices already.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Drivers and monitors are a snap in SystemVerilog because of all the built-in constructs like events, queues, dynamic and associative arrays, and easy signal access. Hooking them up the UVM way wasn\'92t too difficult, either. Users should first consider the design patterns presented in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Appendix D\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 11: Writing a Predictor\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve been so focused on creating, driving, and monitoring the stimulus that we haven\'92t bothered to check if it is correct or not. We\'92ll be getting to reading and writing CSRs in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 12\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , so for now consider the K and C values to be 1 and 0, respectively.\
UVM offers a variety of options when constructing your predictor. Some are more appropriate than others, depending on the nature of the prediction being made.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Monitor Prediction\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 For such a small testbench, you are probably tempted to put all of the prediction in the monitor. And for something this simple, that decision is probably justified. Typically, though, this is not such a great idea. Separating the low-level pin details and interface protocol checking from the higher-level prediction algorithms is often considered the best practice.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Comparators\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM offers several built-in comparator components that operate as simplistic versions of the PW scoreboard. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_in_order_comparator
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_in_order_built_in_-comparator
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_in_order_class_comparator
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  all compare two streams of data objects, both of the same type. This may be useful in situations where what goes in must come out, but for most applications probably will not be sufficient. \
One place where these comparators can be useful is as an agent 
\i \expnd0\expndtw0\kerning0
self-check
\i0 \expnd0\expndtw0\kerning0
. Placing a comparator in the agent between the driver and the monitor ensures that both components are in sync with one another.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 14__#$!@%!#__pastedGraphic.pdf \width5980 \height3180
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 13:
\b0 \expnd0\expndtw0\kerning0
 UVM Comparators\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_algorithmic_comparator
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  offers similar functionality, but is parameterized to work with different transaction classes as the two streams and also takes a class that is used to transform the first class into the predicted second class.\
This sounds perfect for our ALU, which would have transaction sequences going in one 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and results going in the other, with a simple math function in between to predict expected results. What could be easier?\
Unfortunately, the class that UVM 1.1d offers has one small bug\'97it cannot take an integer type as one of the streams. We would have to enclose the result value into a separate results class containing just a 32-bit value. This limitation is not overwhelming, though.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Scoreboards\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Scoreboards are usually the avenue of choice when it is impractical to predict precisely what the design will do in all situations. Scoreboards can raise the level of abstraction to foresee what should happen to a transaction or series of transactions. They are often employed in the networking world where transactions can be broken into small pieces and re-assembled in a seemingly arbitrary manner. Here, the intermediate answers of the model are unimportant but ensuring that the final answer is correct is the most practical course of action. \
UVM provides a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_scoreboard
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class, but it might interest you to know that in UVM 1.1 that class is just an empty component and serves no useful purpose. (As a matter of fact, so are the agent, environment, test, and a variety of other UVM classes). The reasons these \'93empty\'94 classes exist are that they help identify the purpose of the derived class you\'92re creating and they serve as placeholders for future functionality that may come along someday.\
If the nature of your prediction algorithm suggests a scoreboard, this is the component you should create. Pipe monitored requests and responses into the scoreboard component via TLM interfaces and use some of SystemVerilog\'92s handy data types such as queues or associative arrays and away you go. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Reference Modeling\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A reference model is a component that receives the same input as the DUT and performs the same algorithms, providing the expected result to the testbench. Reference modeling is usually chosen when the behavior of the DUT is very well understood and unlikely to evolve during the course of development. Processor environments often use reference models to run the same instruction code and predict what the processor should do on every clock cycle.\
The ALU\'92s static algorithm and it\'92s one-at-a-time operation is perfect for the reference model approach.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 11-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Instantiate an ALU predictor (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pred_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) that derives from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_component
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the ALU agent and provide it with two analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , one taking an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and the other taking a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result_t
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  value. Use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_analysis_imp_decl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros to permit you to create both 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  functions.\
Hook up the predictor\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to the monitors ports as shown in the following diagram and fire away.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 15__#$!@%!#__pastedGraphic.pdf \width5420 \height2940
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 14:
\b0 \expnd0\expndtw0\kerning0
 Connecting the Predictor\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Hopefully this was not too challenging for you. As discussed in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 8\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , these imp declarations can be placed in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls77\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_pkg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    //----------------------------------------------------------------------------------------\
   // Group: Imp Declarations\
\
   `uvm_analysis_imp_decl(_item)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_analysis_imp_decl(_result)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The predictor is straightforward:  receive the monitored item, calculate the expected result, and when one arrives make a comparison.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls78\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `include \'93alu_item.sv\'94\
\
class pred_c extends uvm_component;\
   `uvm_component_utils(pred_c)\
   //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // field: monitored_item_imp\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    uvm_analysis_imp_item #(item_c, pred_c) monitored_item_imp;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
   // field: monitored_result_imp\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    uvm_analysis_imp_result #(result_t, pred_c) monitored_result_imp;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: result\
   // The result of the monitored transaction is stored here and checked with the received result\
   result_t result = 0;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="pred", \
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
      monitored_item_imp = new("monitored_item_imp", this);\
      monitored_result_imp = new("monitored_result_imp", this);\
   endfunction : build_phase\
\
   ////////////////////////////////////////////\
   // func: write_item\
   // Accepts ALU transactions and sets the next expected result\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void write_item(item_c _item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       case(_item.operation)\
         item_c::ADD_A_B :  result = _item.alpha + _item.beta;\
         item_c::SUB_A_B :  result = _item.alpha - _item.beta;\
         item_c::SUB_B_A :  result = _item.beta  - _item.alpha;\
         item_c::MUL_A_B :  result = _item.alpha * _item.beta;\
         item_c::DIV_A_B :  result = _item.alpha / _item.beta;\
         item_c::DIV_B_A :  result = _item.beta  / _item.alpha;\
         item_c::INC_A   :  result = _item.alpha + 1;\
         item_c::INC_B   :  result = _item.beta  + 1;\
         item_c::CLR_RES :  result = 0;\
         item_c::ACCUM   :  result += _item.alpha;\
      endcase\
\
      `cn_dbg(30, ("Calculated result %08X on item: %s", result, _item.convert2string()))\
   endfunction : write_item\
\
   ////////////////////////////////////////////\
   // func: write_result\
   // Called when a result is monitored\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void write_result(result_t _result);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       if(_result != result)\
         `cn_err(("Actual result: %08X != Expected result: %08x",\
                  _result, result))\
   endfunction : write_result\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : pred_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Perhaps by now your only real challenge was having multiple 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  appear in a component. This required the declaration macros, the new 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_analysis_imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  types that these macros created, and the naming of your implementation functions 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write_result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Device Reference Modeling\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It won\'92t always be the case, but sometimes your predictor behaves very much like the DUT itself. Sometimes it is a C or SystemC reference model; or the RTL hasn\'92t actually been written yet and you\'92d like something to test against; or you want to try some early performance modeling to prove the architecture; or you want to run very fast sims without the RTL to test that your functional coverage is adequate.\
Whatever your reasoning, sometimes you want a 
\i \expnd0\expndtw0\kerning0
device reference model
\i0 \expnd0\expndtw0\kerning0
. The predictor designed above is an excellent candidate for that.\
In order to create a device reference model, we need to conditionally change the architecture of the ALU agent to something more like this diagram:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 16__#$!@%!#__pastedGraphic.pdf \width4120 \height3260
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 15: 
\b0 \expnd0\expndtw0\kerning0
Device Reference Modeling\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
We could modify our predictor to contain a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 seq_item_port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  just like the driver, so that it can accept transactions. Then, in the main or run phase, we could have it get the next item, calculate the result just as it was doing before, and send it back to the sequencer as a response. We would also want to add analysis ports that broadcast the transactions and results as if a monitor were present. And we could have it wait for a computational delay that models the real hardware. \
The rest of the verification environment is completely isolated from this change, and for all intents and purposes the RTL might as well be present.\
How much practical use this method would be is a matter of debate. But in this testbench, it is so easy that it begs to be written.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 11-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Modify the ALU predictor to behave like a device reference model when a configuration field 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 dev_ref_model
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is set. Modify the ALU agent to connect itself like a reference model when its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 dev_ref_model
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field is set. \
Create a new test, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 dev_ref_model_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that turns these bits on.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
You may need to reset the ALU interface at time zero in the testbench to avoid its x-checkers.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_agent_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  modifications are fairly straightforward:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls79\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_field_int(dev_ref_model, UVM_ALL_ON)\
	...\
   // field: dev_ref_model\
   // When set to 1, the predictor operates in reference mode and the monitor/driver are not enabled\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    bit dev_ref_model = 0;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In the build phase, ensure that the predictor\'92s value of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 dev_ref_model
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  matches the agent\'92s by default. This way, the test(s) only have to modify the agent.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls80\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_config_db#(int)::set(this, "pred", "dev_ref_model", dev_ref_model);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Also, don\'92t create either the driver or the monitor when in reference model mode:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls81\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       if(!dev_ref_model)\
         mon = mon_c::type_id::create("mon", this);\
      if(is_active) begin\
         if(!dev_ref_model)\
            drv = drv_c::type_id::create("drv", this);\
         sqr = sqr_c::type_id::create("sqr", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The connect phase should match the TLM connections of the diagram.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls82\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void connect_phase(uvm_phase phase);\
      super.connect_phase(phase);\
\
      if(!dev_ref_model) begin\
         // the same connections as before\
      end else begin\
         // as a reference model\
         pred.seq_item_port.connect(sqr.seq_item_export);\
         pred.monitored_item_port.connect(monitored_item_port);\
         pred.monitored_result_port.connect(monitored_result_port);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : connect_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The changes needed to the predictor are shown below in boldface:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls83\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class pred_c extends uvm_component;\
   `uvm_component_utils_begin(pred_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_field_int(dev_ref_model, UVM_ALL_ON)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_component_utils_end\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: dev_ref_model\
   // When set, operates in reference model mode\
   bit dev_ref_model = 0;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \
   //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // field: monitored_item_imp\
   uvm_analysis_imp_item #(item_c, pred_c) monitored_item_imp;\
\
   // field: monitored_result_imp\
   uvm_analysis_imp_result #(result_t, pred_c) monitored_result_imp;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: seq_item_port\
   // As a reference model, pulls transactions from the sequencer\
   uvm_seq_item_pull_port #(item_c) seq_item_port;\
\
   // field: monitored_item_port\
   // As a reference model, drives out the transactions that were "driven"\
   uvm_analysis_port #(item_c) monitored_item_port;\
\
   // field: monitored_result_port\
   // As a reference model, drives out the results that were "seen"\
   uvm_analysis_port #(result_t) monitored_result_port;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: result\
   // The result of the monitored transaction is stored here and checked with the received result\
   result_t result = 0;\
\
   // field: \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="pred", \
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       if(dev_ref_model) begin\
         seq_item_port = new("seq_item_port", this);\
         monitored_item_port = new("monitored_item_port", this);\
         monitored_result_port = new("monitored_result_port", this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       end else begin\
         monitored_item_imp = new("monitored_item_imp", this);\
         monitored_result_imp = new("monitored_result_imp", this);\
      end\
      \
   endfunction : build_phase\
\
  
\f4\b \kerning1\expnd-2\expndtw-8
 ////////////////////////////////////////////\
   // func: main_phase\
   task main_phase(uvm_phase phase);\
      if(dev_ref_model) begin\
         item_c item;\
         forever begin\
            seq_item_port.get_next_item(item);\
\
            `cn_dbg(30, ("Dev_Ref_Model: %s", item.convert2string()))\
\
            // create a delay that models the transmission of the transaction\
            #5ns;\
            monitored_item_port.write(item);\
            \
            // calculate result\
            write_item(item);\
\
            // create a delay that models the ALU calulation speed\
            #15ns;\
\
            // send back the result\
            write_result(result);\
            item.result = result;\
            seq_item_port.item_done(item);\
            monitored_result_port.write(result);\
         end\
      end\
   endtask : main_phase\

\f3\b0 \kerning1\expnd-2\expndtw-8
   \
   ////////////////////////////////////////////\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural
\cf7 \kerning1\expnd-2\expndtw-8
\strokec7    // func: write_item\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural
\cf8 \kerning1\expnd-2\expndtw-8
\strokec8    // Accepts ALU transactions and sets the next expected result\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf9 \kerning1\expnd-2\expndtw-8
\strokec9    virtual function void write_item(item_c _item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The big change is the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which now looks similar to the one in the driver. We could modify it to choose different delays based on the transaction type, or we could pull in the virtual interface that the driver uses and wait on clock edges instead.\
You already know how to create the test, but just in case you\'92ve forgotten, it\'92s here:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls84\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/dev_ref_model.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `include \'93basic.sv\'94\
\
// class: dev_ref_model_test_c\
// Test the ALU using the predictor as a reference model\
class dev_ref_model_test_c extends basic_test_c;\
   `uvm_component_utils(dev_ref_model_test_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="test",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
      uvm_config_db#(int)::set(this, "alutb_env.alu_agent", "dev_ref_model", 1);\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // reset the interface to avoid x-checkers\
      alutb_tb_top.alu_i.reset();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : dev_ref_model_test_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note that we are able to reset the interface directly from the test because tests do not live in packages. The testbench is global in scope and signals or interfaces may be peeked or poked in tests as much as you wish.\
A simpler alternative to this approach would be to leave the ALU agent largely the same, but disconnect the RTL from the interface. Allow the driver to drive the transaction onto the interface and the monitor to see it. Then when the monitor tells the predictor that a transaction occurred, have the predictor drive the result directly onto the interface some time later. This approach leads to fewer changes to the code, but incurs the overhead of having a driver and monitor and dissociates itself from operating only at the transaction level.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM offers a variety of choices for simple prediction schemes. TLM interfaces provide a lot of flexibility and can allow you to run without RTL at all\'97provided you plan ahead. Ultimately, though, prediction algorithms can be simple because of the rich set of aggregate data types and other functions that are available in the SystemVerilog language.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 12: Configuration Registers\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The CSRs that are specific to this testbench are shown in the description of the ALUTB testbench. There, you\'92ll find a CSR titled 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 CONST
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and it contains a read/writable field called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 K_VAL
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Let\'92s write a test that specifically configures that CSR field to a value between 9 and 20.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Register Organization\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 17__#$!@%!#__pastedGraphic.pdf \width8640 \height4320
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 16:
\b0 \expnd0\expndtw0\kerning0
 Register Organization\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
We should first understand where this register exists in the environment hierarchy. This picture shows that the test component instantiates two objects: 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . 
\i \expnd0\expndtw0\kerning0
Cfg
\i0 \expnd0\expndtw0\kerning0
 classes will be described in more detail in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 13\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 . The test then has the cfg class\'92s instance of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  
\i \expnd0\expndtw0\kerning0
reference
\i0 \expnd0\expndtw0\kerning0
 the one in the test (dashed lines represent handle assignments). Because it is a reference, there is only one instance of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the simulation, and no extra memory is consumed. This is accomplished with the following code in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb/tests/base_test.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // create the random configurations\
      cfg = alutb_pkg::cfg_c::type_id::create("cfg");\
\
      // create reg_block\
      if(reg_block == null) begin\
         reg_block = alu_csr_pkg::reg_block_c::type_id::create("reg_block", this);\
         reg_block.configure(null, "alutb_tb_top.dut_wrapper.dut");\
         reg_block.build_phase(phase);\
         reg_block.lock_model();\
      end\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // set configuration's reference to reg_block\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       cfg.reg_block = reg_block;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is derived from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and inside of this lives the registers and/or register files. To understand this better, let\'92s observe the following definitions from the UVM 1.1 Reference Manual:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Register Block\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 A register block represents a design hierarchy. It can contain registers, register files, memories and sub-blocks. A block has one or more address maps, each corresponding to a physical interface on the block.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Register Address Map\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 An address map is a collection of registers and memories accessible via a specific physical interface. Address maps can be composed into higher-level address maps.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Register File\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 A register file is a collection of register files and/or registers used to create regular repeated structures. Register files are usually instantiated as arrays.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Register\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 A register represents a set of fields that are accessible as a single entity. A register may be mapped to one or more address maps, each with different access rights and policy.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Register Adapter\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 This class defines an interface for converting between the generic register operation (
\f3\fs22 \cf11 \expnd0\expndtw0\kerning0
\up0 \strokec11 uvm_reg_bus_op)
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3  and a specific bus transaction.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 In short, when you hear \'93Register Block\'94 think design hierarchy (such as ALU, PCIE, etc.). When you hear \'93Address Map\'94 think interface (such as CTX, AMBA, or PCIE). When you hear \'93Register File\'94 think of repeatable structures such as per-port statistics registers, or physical and virtual functions.\
In our simple testbench, the register block contains the registers in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  block. The registers should always be auto-generated by a script, but ours is already located for you in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/reg/gen/alu_csr_pkg.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . It contains the register classes and the register block.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 References for Everyone!\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 As is usually the case, many different components and objects will want to be able to access the CSRs and the testbench\'92s configuration class. As we saw in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 7\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , UVM\'92s configuration database gives us a way to push references with minimal code. We accomplish this in the following manner:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls85\ilvl0{\listtext	1.	}Put the register block into the configuration database with the field name \'93
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\'94  Push it to all components by setting the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 inst_name
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  argument to \'93
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 *
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 \'94. If you have more than one register block in your testbench, then you may have to be more targeted.\
{\listtext	2.	}For any component that needs access to the register block, instantiate a field of that type with the name \'93
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\'94  Use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros to declare this field as a member of this component. It is best to give it a flag of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_REFERENCE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , so that it is not printed out multiple times in the topology report.\
{\listtext	3.	}Each component will get a reference to this one instance when it calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
The base test uses this method to push both its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field to any component that wishes to see them with this bit of code:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // push the register block and the configurations to all blocks that ask for it\
      uvm_config_db#(uvm_object)::set(this, "*", "reg_block", reg_block);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_config_db#(uvm_object)::set(this, "*", "cfg",       cfg);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Configuring Your Block\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You\'92d be excused if you missed it while flipping through the reference manual, but UVM\'92s register block class contains a nice little function called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 update()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . What this function does is perform the 
\i \expnd0\expndtw0\kerning0
minimum
\i0 \expnd0\expndtw0\kerning0
 number of CSR writes to get the CSRs in the DUT to match the testbench\'92s register block. So, the process of randomizing and configuring a block\'92s CSRs is straightforward:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls86\ilvl0{\listtext	1.	}Randomize the register block. All of the CSR registers and fields are declared as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rand
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  member fields, and the register block is declared as a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rand
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class, so randomizing the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will randomize all of the register fields.\
{\listtext	2.	}Call 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block.update()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , preferably during the configure phase.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
That was easy. Maybe too easy. It turns out that UVM will write the CSRs in an arbitrary order
\fs16 \expnd0\expndtw0\kerning0
\super 
\fs24 \expnd0\expndtw0\kerning0
\nosupersub . Maybe that\'92s what works for your block (it works great for the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), but it might require a more complicated configuration routine than that.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Configuration Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In such a case, you can create a configuration sequence and set it as the 
\i \expnd0\expndtw0\kerning0
default sequence
\i0 \expnd0\expndtw0\kerning0
 (see \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 14\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 ) of a given sequencer in your environment. The registers themselves 
\i \expnd0\expndtw0\kerning0
also
\i0 \expnd0\expndtw0\kerning0
 have a task called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 update()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and by calling this it will perform the CSR write (if and only if one is needed).\
Register blocks and registers also have a corresponding task called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mirror()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  which will perform CSR reads to get the environment\'92s version of the registers to match the one in the DUT. The mirror function can optionally perform automatic checking.\
For example, imagine that before writing the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 CONST
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  register, you wanted to also read from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 RESULT
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  register to ensure that it contains the correct reset value. Such a sequence body might use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mirror
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function to perform automatic checking and would be as simple as the following:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 task body();\
   uvm_status_e status;\
   uvm_reg_data_t value;\
\
   // read from the RESULT register\
   reg_block.RESULT.mirror(status, UVM_CHECK);\
   if(status != UVM_OK)\
      `cn_err((\'93Read from RESULT resulted in a status of %s\'94, status))\
\
   // now write the CONST CSR\
   reg_block.CONST.update(status);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Or, perhaps your DUT has many registers but two special registers need to be configured first before all the rest:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 task body();\
   // configure special registers first\
   reg_block.SPECIAL_REG0.update(status);\
   reg_block.SPECIAL_REG1.update(status);\
\
   // configure all the rest\
   reg_block.update(status);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The above relies upon the fact that calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 update
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  on the register block will not write to the special registers again, because they no longer need to be written.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 The kval Test\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Let\'92s put all of this together and try to accomplish the goals of this chapter. Then we\'92ll take a look at how all of it worked.\
Create a test class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 kval_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and extend it from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class. In it, add this constraint:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls87\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/kval.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    constraint kval_cnstr \{\
      reg_block.CONST.K_VAL.value inside \{[9:20]\};\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Up until now the CSRs have contained their innocuous values, due to this constraint in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg::cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // Constrain K_VAL and C_VAL to both be innocuous\
   constraint innocuous_cnstr \{\
      reg_block.CONST.K_VAL.value == 1;\
      reg_block.CONST.C_VAL.value == 0;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If we were to run this test now there would be a conflict in the constraints that the simulator would be unable to solve. Go ahead and try it.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 12-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
You could eliminate this problem by removing this constraint altogether. How could you fix it 
\i \expnd0\expndtw0\kerning0
without
\i0 \expnd0\expndtw0\kerning0
 removing the constraint or altering the configuration class?\
Naturally, 
\b \expnd0\expndtw0\kerning0
your test will fail
\b0 \expnd0\expndtw0\kerning0
 because your predictor doesn\'92t know anything about the K or C configurations, yet. We\'92ll deal with that in a little bit.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Your first instinct may have been to use the factory. In that case, you could derive a class from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg::cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and in its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function set the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 constraint_mode
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 innocuous_cnstr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to zero. \
However, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance is accessible from the test. So as long as you turn off the constraint before the configuration class is randomized, then the constraint will not be applied. How you do that, though, is the hard part. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void build_phase(uvm_phase phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       cfg.innocuous_cnstr.constraint_mode(0);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you do this, you\'92ll find that the 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance hasn\'92t been created yet
\b0 \expnd0\expndtw0\kerning0
, so you\'92re trying to access a NULL object.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       cfg.innocuous_cnstr.constraint_mode(0);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you do this, you\'92ll find that the base test\'92s build phase has already randomized the knob. 
\b0 \expnd0\expndtw0\kerning0
This cannot be moved to the connect or end-of-elaboration phases, because it is necessary to randomize it in the build phase so that the rest of the components will build based on any configurations that might appear in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
Fortunately, the base test was designed to solve this problem. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  randomization takes place in a virtual function called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 randomize_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which you can override to do something before or after the randomization. So, in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 kval_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls88\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/kval.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    ////////////////////////////////////////////\
   // func: randomize_cfg\
   // Turn off the innocuous constraint\
   virtual function void randomize_cfg();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       cfg.innocuous_cnstr.constraint_mode(0);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       super.randomize_cfg();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : randomize_cfg \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 How It All Works\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 How did the register block know how to create CTX reads and writes for us?  How does it know that the register isn\'92t being written by some other interface instead?\
The answer to these questions lie in the register block, the register maps, and the register adapters.\
Investigate the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_csr_pkg::reg_block_c::build()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function (in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/reg/gen/alu_csr_pkg.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), which configures and builds each of the CSRs and builds an address map. The address map will be assigned a reference to the CTX\'92s sequencer and register adapter by the testbench.\
This happens in the base tests\'92s connect phase. Here, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctx_pkg::reg_adapter_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class is assigned to the register block\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 csr_map
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . It will be these classes that turn generic read and write transactions that the UVM register model knows about into the CTX reads and writes that we need.\
The UVM 1.1 Class Reference and the User\'92s Guide (section 5.5) have plenty more detail on all of these.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Question\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Why couldn\'92t the register adapter have been specified in the register block rather than in the base test?\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Answer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Associating a CSR with an interface is a testbench function. In a full-chip testbench, these CSRs might not use the CTX to be written because that might be an internal interface. The writes might, instead, come from an external bus. Thus, this code does not belong in the vkit, which is meant for code that can be re-used at higher levels.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Fixing Our Predictor\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Fixing the predictor to be CSR aware should be straightforward, as the predictor just needs to know the CSR values at the time it makes the prediction. Instantiate the register block in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pred_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and make it a configurable reference:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls89\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_component_utils_begin(pred_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_field_object(reg_block,   UVM_REFERENCE)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_field_int(dev_ref_model,      UVM_ALL_ON)\
   `uvm_component_utils_end\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: reg_block\
   // Auto-generated Register Block\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa160\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    alu_csr_pkg::reg_block_c reg_block;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Problem 12-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Now modify the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function to consider both the K and C values that are present in the register block.\
Your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 kval
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  test should now PASS.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Take special note of the fact that we get the current values from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_reg_field
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  objects by looking at their 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 value
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls90\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void write_item(item_c _item);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       bit [7:0] k_val = reg_block.CONST.K_VAL.value;\
      bit [7:0] c_val = reg_block.CONST.C_VAL.value;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       \
      case(_item.operation)\
         item_c::ADD_A_B :  result = k_val * (_item.alpha + _item.beta) + c_val;\
         item_c::SUB_A_B :  result = k_val * (_item.alpha - _item.beta) + c_val;\
         item_c::SUB_B_A :  result = k_val * (_item.beta  - _item.alpha) + c_val;\
         item_c::MUL_A_B :  result = k_val * (_item.alpha * _item.beta) + c_val;\
         item_c::DIV_A_B :  result = k_val * (_item.alpha / _item.beta) + c_val;\
         item_c::DIV_B_A :  result = k_val * (_item.beta  / _item.alpha) + c_val;\
         item_c::INC_A   :  result = k_val * (_item.alpha + 1) + c_val;\
         item_c::INC_B   :  result = k_val * (_item.beta  + 1) + c_val;\
         item_c::CLR_RES :  result = 0;\
         item_c::ACCUM   :  result += _item.alpha;\
      endcase\
\
      `cn_dbg(30, ("Calculated result %08X on item: %s", result, _item.convert2string()))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : write_item\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Also note that when this function runs, it will fetch the predicted values based on the most recently completed CSR write. If a field is marked as being volatile, it means that it may change values between accesses (like a status register or a statistics counter).\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Register Callbacks\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There are many scenarios where you would want the environment to be alerted whenever  a read or a write occurs on a CSR. Here are just a few:\
\pard\tx380\tx740\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\fi-360\ri360\sa240\pardirnatural\qj
\ls91\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Aliased registers. When one register is written, another register takes a new value.\
{\listtext	\'95	}Expecting interrupts. When a CSR is written, the write may conditionally cause an interrupt that needs to be expected.\
{\listtext	\'95	}Soft resets. Writing a CSR causes a software reset, and some agents and predictors must be reset, too.\
{\listtext	\'95	}Writes to the registers on-the-fly cause predictions to shift accordingly.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
For cases such as these, you want to use a register callback. Register callbacks follow the same pattern that other callbacks in UVM follow:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls92\ilvl0{\listtext	1.	}Derive a class from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_reg_cbs
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	2.	}Fill in the tasks and/or functions that supply the code you want to run.\
{\listtext	3.	}Instantiate your callback class somewhere in the environment.\
{\listtext	4.	}Register your callback class on the CSR(s) that it should apply to.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
You may register multiple callback classes or multiple instances of a callback class on a given CSR. The following is an example of a callback that prints the read value anytime the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 RESULT[SOR]
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field is read from.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls93\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_result_reg_cb.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 // class: alu_result_reg_cb_c\
class alu_result_reg_cb_c extends uvm_reg_cbs;\
   `uvm_object_utils(alu_result_reg_cb_c)\
\
   //-------------------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="alu_result_reg_cb");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: post_read\
   // Print to the logfile anytime the RESULT CSR is read from.\
   virtual task post_read(uvm_reg_item rw);\
      `cn_info(("Read from RESULT: %08X", rw.value[0]));\
   endtask : post_read\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : alu_result_reg_cb_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Then, the callback class is created and registered with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 RESULT
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  CSR any place and at any time in the environment.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls94\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          alu_result_reg_cb_c alu_result_reg_cb;\
         alu_result_reg_cb = alu_result_reg_cb_c::type_id::create("alu_result_reg_cb");\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6          uvm_reg_cb::add(reg_block.RESULT, alu_result_reg_cb);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Built-In Register Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 For free, UVM\'92s register package includes a variety of register test sequences to completely exercise the CSR and memory space. These sequences can be the basis of your very first tests of a block to ensure that all CSR bugs are discovered and fixed. What\'92s more, the sequences will automatically adapt to changes to the CSRs over time without any need to be modified.\
The available sequences test the DUT\'92s ability to withstand resets, bit-bashing, shared accesses (registers that can be accessed by more than one interface), memory walking patterns, and back-door HDL accesses.\
Each sequence can be configured via the UVM resource database to turn on or turn off testing of specific CSRs or blocks.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Register Accesses\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The register model holds 3 different values for each register field:  the desired value, the mirrored value, and the reset value.  The desired value is the value that will be written the next time the register\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 update
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  method is run. The mirror reflects the value that the environment expects the register to be currently holding (this value obeys various access policies that a register can have, such as Write-1-to-Clear).\
The following table summarizes the most commonly needed methods for accessing the values of registers and their fields.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth4023\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf13 \clbrdrr\brdrs\brdrw20\brdrcf13 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth5113\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf13 \clbrdrb\brdrs\brdrw20\brdrcf13 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 What You Want to Do
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Code That Does It
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat1 \clwWidth3943\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf13 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat1 \clwWidth5033\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf13 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Write a new value to a register
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 reg_block.REG.write(status, new_value);
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat1 \clwWidth3943\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat1 \clwWidth5033\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Write a new value to a field (unless it already has that value)
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 reg_block.REG.FIELD.set(new_value);\
reg_block.REG.update(status);
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat1 \clwWidth3943\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat1 \clwWidth5033\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Write a value to a field (regardless of its current contents)
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 reg_block.REG.FIELD.write(status, \
                          new_value);
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat1 \clwWidth3943\clftsWidth3 \clheight260 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat1 \clwWidth5033\clftsWidth3 \clheight260 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 View the 
\i \expnd0\expndtw0\kerning0
desired
\i0 \expnd0\expndtw0\kerning0
 value of a register field
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 future_value = reg_block.REG.FIELD.get();
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat1 \clwWidth3943\clftsWidth3 \clheight660 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat1 \clwWidth5033\clftsWidth3 \clheight660 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Constrain a register field before randomization
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 constraint my_cnstr \{\
   reg_block.REG.FIELD.value == my_val;\
\}
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat1 \clwWidth3943\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat1 \clwWidth5033\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Read from a register, update the mirrored value, and get the actual value that was read
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 reg_block.REG.read(status, value);
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat1 \clwWidth3943\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat1 \clwWidth5033\clftsWidth3 \clheight480 \clbrdrt\brdrs\brdrw20\brdrcf12 \clbrdrl\brdrs\brdrw20\brdrcf12 \clbrdrb\brdrs\brdrw20\brdrcf12 \clbrdrr\brdrs\brdrw20\brdrcf12 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Read a register and view the mirrored contents of a field
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 reg_block.REG.mirror(status);\
reg_block.REG.FIELD.value;
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\i\b\fs20 \expnd0\expndtw0\kerning0
Table 7:
\b0 \expnd0\expndtw0\kerning0
  Common Register Methods\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\i0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM\'92s register package offers significantly more functionality than what is presented here. UVM also has backdoor accesses, FIFO-like CSRs, memories, indirect registers, and more. But the information presented in this lesson should provide a baseline for future lessons where these CSRs will be used.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 13: CFG Classes and Writing Tests\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 When an environment is written properly, writing tests to hit specific regions of the design or areas of concern is merely a matter of adjusting a few variables, tweaking a few configurations, or creating a few factory overrides. The base test instantiates everything, but all of the other tests should be easy to write.\
In an environment, there are two types of configurations:  testbench build configurations and random knob configurations.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Testbench Build Configurations\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 Many components have configuration fields that can be set by higher-level components. These configuration fields are determined and set (using 
\f3\fs22 \cf11 \expnd0\expndtw0\kerning0
\up0 \strokec11 uvm_config_db::set
\f0\fs24 \cf3 \expnd0\expndtw0\kerning0
\up0 \strokec3  calls) at time zero and are used to control the build process.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Random Knob Configurations\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 These are set at time zero and other randomized values are generated dynamically during the simulation based on their values. They are used to control stimulus or component behaviors.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 We have been using the first type since \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 11\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 . When we told the predictor to act as a reference model, we used this call:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_config_db#(int)::set(this, "alutb_env.alu_agent", "dev_ref_model", 1);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 dev_ref_model
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is a configuration field of an ALU agent that trickles down to the same configuration field in its predictor.\
Since this model is so familiar by now we\'92re not going to spend the rest of this chapter discussing it, but suffice to say testbench build configurations are one way that you can write a test that manipulates the environment to help achieve the test\'92s goals.\
The rest of this chapter will discuss random knob configurations.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Cfg Classes\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There are many places in a vkit where you can put random variables. Transactions, drivers, agents, sequences...all of the classes we\'92ve discussed so far can have random variables that change how they behave from one run to the next, and that\'92s part of the problem:  if you\'92re writing a predictor that needs to be aware of all of these different values, then the predictor must have references to each of these components to have visibility into these values.\
The solution is that a vkit defines a 
\i \expnd0\expndtw0\kerning0
cfg
\i0 \expnd0\expndtw0\kerning0
 class which contains all of its random settings. Each component within that vkit needing access holds a handle to it. The cfg class is created and randomized by the base test before the environment is built so that the random configurations can subsequently influence the testbench configuration.\
The base test doles out the handles to the various cfg classes to all applicable sub-components using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_config_db#(uvm_object)::set
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  calls. The cfg class also contains handles to any register blocks associated with the vkit, so that CSR configurations and other random environment variables can have constraints upon one another. Now the vkit components can access their associated register blocks through their cfg handles.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Ted and Fred\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Imagine this hypothetical testbench environment:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls95\ilvl0{\listtext	1.	}The testbench contains two DUTs, Ted and Fred. It likewise has two environments from different vkits:  
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ted_env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fred_env
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . \
{\listtext	2.	}Ted contains a CSR which dictates the depth of Ted\'92s FIFO. This value dictates how many credits Ted can have. The Ted environment contains a common credit agent with a random variable, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 max_credits
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	3.	}Fred needs to know how many credits Ted has to determine which data rate he can be programmed for.\
{\listtext	4.	}The test-writer wants to have some tests run at the highest possible data rate, while others can be left unconstrained.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 18__#$!@%!#__pastedGraphic.pdf \width7320 \height6640
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 17:
\b0 \expnd0\expndtw0\kerning0
 Hierarchical CFG Classes \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
To summarize the order in which all of these objects and components are built:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls96\ilvl0{\listtext	1.	}The base test instantiates and creates its own cfg class which in turn creates the underlying 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ted_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fred_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  classes.\
{\listtext	2.	}The base test creates, builds, and configures the Ted\'92s register block.\
{\listtext	3.	}It then assigns the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ted_reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to the handle within the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg.ted_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class.\
{\listtext	4.	}The base test then randomizes the cfg class in a virtual function called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 randomize_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Derived tests can change the cfg class constraints, manipulate the cfg class by overriding 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 randomize_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or create derived cfg classes and use the factory, just as we did in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 kval
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  test from \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 12\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 . Randomizing the cfg class also randomizes the register blocks.\
{\listtext	5.	}The base test populates the configuration database with handles to the cfg classes, such that the build phases of later components will automatically pull them in.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_config_db#(uvm_object)::set(this, "ted_env", "cfg", cfg.ted_cfg);\
      uvm_config_db#(uvm_object)::set(this, "fred_env", "cfg", cfg.fred_cfg);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_config_db#(uvm_object)::set(this, \'93ted_env.cr_agent\'94, \'93cfg\'94, cfg.ted_cfg.cr_cfg);\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls97\ilvl0
\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 {\listtext	1.	}The base test finally creates the Ted and Fred environments, as per the environment\'92s architecture and the results of randomizing the cfg class.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
UTG\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  template does some of this automation for you by providing hints for where everything should go. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Hierarchical Constraints\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
{\field{\*\fldinst{HYPERLINK "http://livepage.apple.com/"}}{\fldrslt 
\b0\fs24 \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Figure 17}}
\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0  showed how the component hierarchy of this hypothetical environment is mirrored by the cfg hierarchy. It is frequently desirable to cascade constraints in a similar manner. In this example, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ted_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  must constrain the CSR containing Ted\'92s FIFO depth to be equal to the credit agent\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 max_credits
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field. And the testbench must coordinate these credits with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 data_rate
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fred_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
The example below shows how the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ted_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class coordinates the CSR value and its own credit agent\'92s cfg class.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls98\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/ted/ted_cfg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class cfg_c extends uvm_object;\
   `uvm_object_utils_begin(ted_pkg::cfg_c)\
      `uvm_field_object(reg_block, UVM_REFERENCE)\
      `uvm_field_object(cr_cfg, UVM_REFERENCE)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: reg_block\
   // Register block for this environment\
   rand reg_block_c reg_block;\
\
   // var: cr_cfg\
   // Credit config class\
   rand cr_pkg::cfg_c cr_cfg;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // constraint: credits_cnstr\
   // Ensure that FIFO depth and credits are in sync\
   constraint credits_cnstr \{\
      reg_block.FIFO_CFG.DEPTH.value == cr_cfg.max_credits;\
   \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural
\cf7 \kerning1\expnd-2\expndtw-8
\strokec7    //----------------------------------------------------------------------------------------\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural
\cf8 \kerning1\expnd-2\expndtw-8
\strokec8    // Group: Methods\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf9 \kerning1\expnd-2\expndtw-8
\strokec9    function new(string name="cfg");\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The testbench must also ensure coordination between Ted\'92s credits and Fred\'92s data rates, so the following constraint might be placed in the testbench\'92s cfg class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls99\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // constraint: rate_credit_cnstr\
   // Coordinate the number of credits with Fred's ability to send\
   constraint rate_credit_cnstr \{\
      ted_cfg.cr_cfg.max_credits < 64              -> fred_cfg.data_rate == fred_pkg::MIN_RATE;\
      ted_cfg.cr_cfg.max_credits inside \{[65:255]\} -> fred_cfg.data_rate == fred_pkg::MED_RATE;\
      ted_cfg.cr_cfg.max_credits > 255             -> fred_cfg.data_rate == fred_pkg::MAX_RATE;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Finally, the test-writer wants one test that always uses Fred\'92s maximum data rate, so the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 max_data_rate_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class might simply contain this constraint:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls100\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // constraint: max_data_rate_cnstr\
   // Constrain Fred to operate at the highest possible data rate\
   constraint max_data_rate_cnstr \{\
      cfg.fred_cfg.data_rate == fred_pkg::MAX_RATE;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Right now, we do not have multiple cfg classes in our simple 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  testbench, but we will later when we get to \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 15\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 . For now, it\'92s time that we had more control over the K and C values that we\'92ve been operating with.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 13-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
The ALUTB package already contains a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class that, admittedly, doesn\'92t do a whole lot just yet. We\'92re going to add some constraints to it to modify the CSR values of K and C during the configuration phase and attempt to hit a wide swath of values. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Remove the 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 innocuous_cnstr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  constraint from 
\f4\fs22 \expnd0\expndtw0\kerning0
\up0 alutb_pkg::cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .
\b0 \expnd0\expndtw0\kerning0
 Create a configuration variable in the ALUTB 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class that permits values of K and C to be within the following values. By default, constrain the knob to always choose 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 INNOCUOUS
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  mode:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth1490\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clcbpat2 \clwWidth1190\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth1030\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clcbpat2 \clwWidth1030\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Setting
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 K
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 C
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Frequency
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1490\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1190\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 INNOCUOUS
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 1
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 20%
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1490\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1190\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 SMALL
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 2..5
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 2..10
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 50%
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1490\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1190\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 LARGE
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 6..50
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 11..128
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 15%
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1490\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1190\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 XLARGE
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 51..255
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 129..255
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 5%
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth1490\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx2160
\clvertalt \clshdrawnil \clwWidth1190\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx6480
\clvertalt \clshdrawnil \clwWidth1030\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 UNLIMITED
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 1..255
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 0..255
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 10%
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Table 8:
\b0 \expnd0\expndtw0\kerning0
  K and C Value Distribution Constraints\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
Then, write a test called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that varies the knob settings according to the frequencies shown above. You should find that it passes consistently.\
You will also need to fix the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 kval_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  reference to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 innocuous_cnstr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
After removing the ALU base constraints, you start by creating an enumerated type that represents the knob. By placing this type in the configuration class, you do not pollute the namespace of the environment. This should go at the top of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls101\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alutb/alutb_cfg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class cfg_c extends uvm_object;\
   //----------------------------------------------------------------------------------------\
   // Group: Types\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // enum: alu_const_knob_e\
   // Used to constrain the K and C values for ALU\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    typedef enum \{ INNOCUOUS, SMALL, LARGE, XLARGE, UNLIMITED \} alu_const_knob_e;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Alternatively, you could place this in a file that contain\'92s all of the types for this vkit.\
Then, you create a random instance of your new enumerated type, and constrain it to the value 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 INNOCUOUS
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls102\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alutb/alutb_cfg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_object_utils_begin(alutb_pkg::cfg_c)\
      `uvm_field_object(reg_block, UVM_REFERENCE)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_field_enum(alu_const_knob_e, alu_const_knob, UVM_ALL_ON)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   // field: reg_block\
   // Register block for this environment\
   rand alu_csr_pkg::reg_block_c reg_block;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: alu_const_knob\
   // Constrains the K_VAL and C_VAL\
   rand alu_const_knob_e alu_const_knob;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    constraint const_knob_cnstr \{ alu_const_knob == INNOCUOUS; \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note the syntax of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_field_enum
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro requires that you provide the type as the first argument. Now add implication constraints to K and C that match the table:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls103\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alutb/alutb_cfg.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // constrain K_VAL based on alu_const_knob\
   constraint kval_cnstr \{\
      alu_const_knob == INNOCUOUS -> (reg_block.CONST.K_VAL.value == 1);\
      alu_const_knob == SMALL     -> (reg_block.CONST.K_VAL.value inside \{[2:5]\});\
      alu_const_knob == LARGE     -> (reg_block.CONST.K_VAL.value inside \{[6:50]\});\
      alu_const_knob == XLARGE    -> (reg_block.CONST.K_VAL.value inside \{[51:255]\});\
      alu_const_knob == UNLIMITED -> (reg_block.CONST.K_VAL.value inside \{[0:255]\});\
   \}\
   \
   // constrain C_VAL based on alu_const_knob\
   constraint cval_cnstr \{\
      alu_const_knob == INNOCUOUS -> (reg_block.CONST.C_VAL.value == 0);\
      alu_const_knob == SMALL     -> (reg_block.CONST.C_VAL.value inside \{[2:10]\});\
      alu_const_knob == LARGE     -> (reg_block.CONST.C_VAL.value inside \{[11:128]\});\
      alu_const_knob == XLARGE    -> (reg_block.CONST.C_VAL.value inside \{[129:255]\});\
      alu_const_knob == UNLIMITED -> (reg_block.CONST.C_VAL.value inside \{[0:255]\});\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class uses a distribution constraint to randomize the knob. Notice that you can add a constraint 
\i \expnd0\expndtw0\kerning0
through
\i0 \expnd0\expndtw0\kerning0
 the class instance hierarchy. This is essential. If you couldn\'92t do this in SystemVerilog, the only other way to do it would be by extending the class with another one that contained the constraint, and then overriding that type using the factory. You\'92ll find this method to be a lot less typing.\
Here is the complete 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls104\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/exer.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 // class: exer_test_c\
// Turns on all possible values of K_VAL and C_VAL\
class exer_test_c extends basic_test_c;\
   `uvm_component_utils(exer_test_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
   constraint const_knob_cnstr \{\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       cfg.alu_const_knob dist \{ alutb_pkg::cfg_c::INNOCUOUS :/ 20,\
                                alutb_pkg::cfg_c::SMALL     :/ 50,\
                                alutb_pkg::cfg_c::LARGE     :/ 15,\
                                alutb_pkg::cfg_c::XLARGE    :/ 5,\
                                alutb_pkg::cfg_c::UNLIMITED :/ 10\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       \};\
   \}\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="alu_exer",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: randomize_cfg\
   // Disable the const_knob_cnstr in cfg\
   virtual function void randomize_cfg();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       cfg.const_knob_cnstr.constraint_mode(0);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       super.randomize_cfg();\
   endfunction : randomize_cfg\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : exer_test_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  test now creates its own 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 const_knob_cnstr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  constraint and turns off the one in the cfg class. Because the enumerated type is local to the scope of the configuration class, (which is local to the scope of the ALUTB package), you need to use the scoping operator twice.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 \page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural
\cf2 \expnd0\expndtw0\kerning0
\strokec2 Collecting Functional Coverage\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now, a short interlude on running exercisers and collecting functional coverage. Of course, we write constrained random tests so that the constraint solver can find interesting scenarios for us, and it is important to know that your tests are doing what you think they are doing. To do this, it is important that we run as many tests as possible. The tool for this is 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 srand
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
Try running the following:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls105\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 srand -m 20 -c 100 -a SVFCOV=8 --nopbs tests/exer.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This command will run your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  test 100 times, with 20 being sent to the simulation farm in parallel, and it will collect functional coverage on CSR values.\
When it\'92s complete, you can run the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 covmrg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to merge the simulation results and inspect the functional coverage that you collected:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 covmrg\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Test Overrides\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sometimes you want to create a sequence for a semi-directed test case. Perhaps you want to create an error case that you don\'92t want intermingling with your other sequences. Or you want your driver to behave differently for a single test.\
Once again, this is where the factory comes in. It is common practice to create a derived class of something else in the environment and place it in the test file, then use a factory override for that test only.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 13-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Create a new test, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 div0_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that sets the denominator of a divide operation to zero 50% of the time. Do this by overriding the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  with a new transaction type, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 div0_item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . \
Also, have the basic test\'92s main phase also launch an instance of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . See what happens.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is one solution to the problem:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls106\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/div0.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `include "basic.sv"\
\
//****************************************************************************************\
// class: div0_item_c\
// Causes a divide-by-zero on 50% of all divide operations\
class div0_item_c extends alu_pkg::item_c;\
   `uvm_object_utils(div0_item_c)\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    constraint protocol_cnstr \{\
      (operation == DIV_A_B) -> beta dist \{ 0 :/ 50,\
                                            [1:'hffff] :/ 50\};\
      (operation == DIV_B_A) -> alpha dist \{ 0 :/ 50,\
                                            [1:'hffff] :/ 50\};\
      (operation == SUB_A_B) -> alpha > beta;\
      (operation == SUB_B_A) -> beta > alpha;\
   \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="div0_item");\
      super.new(name);\
   endfunction : new\
endclass : div0_item_c\
\
//****************************************************************************************\
// class: div0_test_c\
// Uses the div0_item_c class instead\
class div0_test_c extends basic_test_c;\
   `uvm_component_utils(div0_test_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="div0_test",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       set_type_override_by_type(alu_pkg::item_c::get_type(), div0_item_c::get_type());\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : div0_test_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Some notes:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    constraint protocol_cnstr \{\
      (operation == DIV_A_B) -> beta dist \{ 0 :/ 50,\
                                            [1:'hffff] :/ 50\};\
      (operation == DIV_B_A) -> alpha dist \{ 0 :/ 50,\
                                            [1:'hffff] :/ 50\};\
      (operation == SUB_A_B) -> alpha > beta;\
      (operation == SUB_B_A) -> beta > alpha;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The constraint 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 protocol_cnstr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  needs to have the same name as the base class. 
\b \expnd0\expndtw0\kerning0
Constraints act like virtual methods
\b0 \expnd0\expndtw0\kerning0
:  if the derived class has one that is the same name, it takes precedence. This changes the constraints to have a zero in the denominator 50% of the time for division operations. Note how we\'92ve used the distribution constraint on top of an implication constraint. It was also necessary to put the subtraction constraints in because we cannot partially override a constraint block.\
And finally, the factory override method should now be familiar to you:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       set_type_override_by_type(alu_pkg::item_c::get_type(), div0_item_c::get_type());\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If your first inclination was to only perform the factory override 50% of the time, there\'92s really no effective way to do that. Using constraints and overriding all transactions is the way to go.\
If you did everything correctly your test may PASS, but you should find that the RTL puts X\'92s out as the result. Congratulations!  You\'92ve found your first bug. The designer agrees and decides to use a denominator of one whenever a zero is seen instead.\
You can patch the RTL with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utut
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  script, like this:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa160\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 utut fix 1
\f1\b\fs24 \cf14 \expnd0\expndtw0\kerning0
\up0 \strokec14 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 Question
\f1 \cf14 \expnd0\expndtw0\kerning0
\up0 \strokec14 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0 \cf0 \expnd0\expndtw0\kerning0
\up0 \strokec0 If you wrote your predictor\'92s checker in the same way as the solution from \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 11\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , there\'92s a problem in there someplace. Can you find it and fix it? \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Hint:
\b0 \expnd0\expndtw0\kerning0
 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
Look in the logfile. It is a problem that also plagues designers.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Answer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Only if you looked at your logfile would you likely find the problem. It\'92s that the predictor we wrote also doesn\'92t have the fix and is calculating the result to be X, but the result is no longer X and yet the test still passes. What\'92s going on here?\
There are actually two problems. The first is that the predictor is predicting X, and the second is that it is not flagging an error. \
If you recall, our comparison took place in the TLM 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write_result()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void write_result(result_t _result);\
      if(_result != result)\
         `cn_err(("Actual result: %08X != Expected result: %08x",\
                  _result, result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : write_result\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Here, we\'92ve used an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 if
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  statement, and one of the operands is an X. Just as in RTL, verification people have to beware that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 if
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  statement does not propagate an X. The above test will not succeed, and no error gets printed.\
Of course, we need to modify the calculations to now match the RTL, but we want to make sure that we don\'92t miss this issue again next time.\
To fix this you could use the triple-equals construct:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls107\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       if(_result !== result)\
         `cn_err(("Actual result: %08X != Expected result: %08x",\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6                   _result, result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Or, you could use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 assert
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  statement which does not have the same affliction as the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 if
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  statement:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls108\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       assert(_result == result) else\
         `cn_err(("Actual result: %08X != Expected result: %08x",\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6                   _result, result))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And to fix the ALU predictor\'92s computation of the correct result, you would change the two division cases as follows:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls109\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_pred.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          item_c::DIV_A_B :  result = k_val * (_item.alpha / (_item.beta? _item.beta : 1)) + c_val;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6          item_c::DIV_B_A :  result = k_val * (_item.beta  / (_item.alpha? _item.alpha : 1)) + c_val;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 \page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural
\cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 While the rest of our jobs may be overly complicated, 
\i \expnd0\expndtw0\kerning0
writing tests should be kept simple
\i0 \expnd0\expndtw0\kerning0
. Each vkit should have a policy class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which may or may not contain other cfg classes. The highest-level cfg class is instantiated in the base test. Each cfg instance is distributed to its components through the configuration database. \
Tests can be created with the template generator and extended from the base test, or any other test. Tests merely tweak some configurations and knobs, or perform a factory override or two. \
Thousands of test runs are used to hit corner cases using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 srand
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and functional coverage should be analyzed frequently with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 covmrg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 14: Advanced Sequences I\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Sequences and sequencers are so involved, they deserve three separate chapters!  This chapter will discuss how to better launch sequences to get a more random mix of traffic, how we can use the resource database to configure sequences, and what a persistent sequence is.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Default Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 So far we\'92ve seen two methods that we can use to launch sequences onto a sequencer. From a component, we can create a sequence and call its start task, with a reference to the sequencer as an argument. From another sequence, we can have it launch a different sequence by calling one of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macros.\
A third way that you can launch sequences is by calling the sequencer\'92s task 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 execute_item()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  with an instance of the sequence. This isn\'92t a whole lot different from calling the sequence\'92s start task, so there\'92s not much gain here.\
There\'92s a fourth way as well. When any of a sequencer's run-time phases is started, its function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 start_phase_sequence()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is run. If there is a configuration item in the database called \'93
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 default_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 \'94 for this sequencer\'92s phase, then that sequence is run automatically.\
For example, to automatically launch a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  during the main phase, you would put this in your test\'92s build phase:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 uvm_config_db#(uvm_object_wrapper)::set(this, "alutb_env.alu_agent.sqr.main_phase", \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6                                         "default_sequence", alu_pkg::sum_array_seq_c::type_id::get());\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This will create, randomize, and launch a sequence of this type for you when the main phase starts. If you want a very specific instance of a sequence to run, then the call is slightly different:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       alu_pkg::sum_of_factorials_seq_c sof_seq = new("sof");\
      sof_seq.randomize() with \{op_x == 1; op_y == 5;\};\
      uvm_config_db #(uvm_sequence_base)::set(this, "alutb_env.alu_agent.sqr.main_phase", \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6                                               "default_sequence", sof_seq);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Here, notice that we did not just \'91set\'92 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 op_x
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 op_y
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . We needed to randomize it for this to work, because UVM will randomize it for us if it hasn\'92t already been randomized, which would then squash our settings.\
Regardless of the method you choose, you\'92re probably wondering where all the benefit is. Sure, it allows you to use the configuration database to start these sequences, but it only allows us to launch one sequence per phase. What good is that?\
Well, if that sequence is one that happens to launch many other sequences, then it can be used to concisely do a whole lot more than what our basic test\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  currently does. That\'92s where library sequences come into play.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Library Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Before we get too far into library sequences, it should be mentioned that these are new to UVM 1.1 and are not considered \'93production-level\'94. As such, they are also not particularly well documented yet, either.\
A library sequence is a sequence that picks a random sequence, launches it, then picks another, and another, and another, until a specified count is reached. This is an ideal method for creating highly random stimulus as it allows you to create a new sequence to test some feature, write a test that focuses on that sequence, and then add it to one or more library sequences to see how well it works with others. \
You might recall that when you created 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_lib.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , it created a class called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lib_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and we had you comment it out. Those few lines of code are a library sequence. You can create as many library sequences as you wish and each library can hold as many sequences as you wish. To place a sequence into a library, you use the macro `
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_add_to_seq_lib
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . For example, to add our factorial sequence to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lib_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  library, you would add the following to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 factorial_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls110\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class factorial_seq_c extends uvm_sequence #(item_c, item_c);\
   `uvm_object_utils_begin(alu_pkg::factorial_seq_c)\
      `uvm_field_int(operand, UVM_ALL_ON)\
      `uvm_field_int(result,  UVM_ALL_ON)\
   `uvm_object_utils_end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_add_to_seq_lib(factorial_seq_c, lib_seq_c);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This macro must specify the type of the sequence and which library you want it to go into. A sequence can call this macro more than once to be placed into different libraries. You can create different library sequences to mix different types of sequences. Your test can then set a library sequence as the default sequence for a particular phase, such as the main phase.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 14-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Add all of the sequences you've created so far to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lib_seq_c 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 library sequence.\
Clear out the main phase of your basic test, and instead launch your new library sequence as the default sequence for the main phase. Remember to uncomment the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lib_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
To launch the sequences from your basic test, you should have altered its build phase as follows.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls111\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6     virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_config_db#(uvm_object_wrapper)::set(this, "alutb_env.alu_agent.sqr.main_phase", \
                                              "default_sequence", alu_pkg::lib_seq_c::type_id::get());\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 You would also either need to move the library sequence to the top of the file, or create a forward-declaration of the library sequence:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls112\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 typedef class lib_seq_c;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 When you run this test, you should see 10 different random sequences chosen. Of course, most of those sequences spawn other sequences and sequence items, so a lot more traffic will be seen.\
Now all of your tests that derive from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_test_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will run your library sequence by default.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Library Sequence Configuration\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Our library sequence only runs 10 random sequences, and it is always random. Maybe you want a more interesting pattern to choose from?  Once again, UVM uses the policy class pattern to help out.\
The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence_library_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class is the policy class that you can use to customize your library sequence. It offers three different options: 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 selection_mode
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 min_random_count
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 max_random_count
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
The min and max random count options do just what you think. When the sequence starts, it chooses a random number between these two numbers, and then sends that many sequences.\
\page The selection mode is an enumerated type that offers you four choices as to how sequences will be chosen:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth2525\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth4630\clftsWidth3 \clheight220 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 uvm_sequence_lib_mode
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural\qc

\f1\b\fs18 \cf1 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec1 Method
\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2525\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4630\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 UVM_SEQ_LIB_RAND
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Select randomly (default)
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2525\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4630\clftsWidth3 \clheight280 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs22 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 UVM_SEQ_LIB_RANDC
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Random cyclic selection
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2525\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4630\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 UVM_SEQ_LIB_ITEM
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Send only items. Does not send sequences.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clshdrawnil \clwWidth2525\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx4320
\clvertalt \clshdrawnil \clwWidth4630\clftsWidth3 \clheight240 \clbrdrt\brdrs\brdrw20\brdrcf0 \clbrdrl\brdrs\brdrw20\brdrcf0 \clbrdrb\brdrs\brdrw20\brdrcf0 \clbrdrr\brdrs\brdrw20\brdrcf0 \clpadt40 \clpadl40 \clpadb40 \clpadr40 \gaph\cellx8640
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 UVM_SEQ_LIB_USER
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell 
\pard\intbl\itap1\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Applies a user-defined selection algorithm.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \cell \lastrow\row
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Table 9:
\b0 \expnd0\expndtw0\kerning0
  Library Sequence Selection Modes\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
Random cyclic is a term we haven\'92t used so far in this tutorial. This term tells SystemVerilog to choose randomly from a list of items, but don\'92t choose an item again until the list has been exhausted.\
Sending only sequence items (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_SEQ_LIB_ITEM
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) is a very useful scenario. Essentially, the library sequence will just send random transaction items, ignoring whatever sequences you put into it. Sequence items, though, get responses. And unfortunately, if you choose this selection mode, you will find that the library sequence\'92s response queue fills up. To manage this, you would need to implement a response handler function that was described in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 9\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 .\
The user-defined algorithm has you create a function (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 select_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ) that returns an unsigned integer between zero and its argument, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 max
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . At your disposal is the member field 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sequences
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is a queue of all the different sequences in the library, stored as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_object_wrapper
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  classes. Calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get_type_name()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  on each member gives the sequence\'92s name as a string. The following example shows how you might distribute sequences in a library unevenly. The function 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 select_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  returns an index into the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sequences
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  queue that specifies which sequence to choose next.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls113\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class lib_seq_c extends uvm_sequence_library #(item_c);\
   `uvm_object_utils(alu_pkg::lib_seq_c)\
   `uvm_sequence_library_utils(lib_seq_c)\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: selector\
   // Distributes sequence selection unevenly when UVM_SEQ_LIB_USER is used\
   rand int unsigned selector;\
   constraint selector_cnstr \{ selector dist \{ 0 :/ 40, 1 :/ 20, 2 :/ 10, 3 :/ 30 \}; \}\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="seq_lib");\
      super.new(name);\
      init_sequence_library();\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: select_sequence\
   virtual function int unsigned select_sequence(int unsigned max);\
      randomize(selector);\
      return selector;\
   endfunction : select_sequence\
   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : lib_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Library sequences offer several more features that allow you to modify the list of sequences dynamically, such as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 add_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 remove_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 add_typewide_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which allows you to add a sequence type to all your library sequences at one time.\
To assign an instance of a library sequence configuration class to a library sequence from a test, you push it into the configuration database:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls114\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void build_phase(uvm_phase phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // create the configuration object\
      uvm_sequence_library_cfg lib_cfg = uvm_sequence_library_cfg::type_id::create("lib_cfg");\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       \
      super.build_phase(phase);\
\
      // run lots of sequences!\
      lib_cfg.min_random_count = 2500;\
      lib_cfg.max_random_count = 5000;\
      \
      uvm_config_db#(uvm_object_wrapper)::set(this, "alutb_env.alu_agent.sqr.main_phase", \
                                              "default_sequence", alu_pkg::lib_seq_c::type_id::get());\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // set library configuration\
      uvm_config_db#(uvm_sequence_library_cfg)::set(this, "alutb_env.alu_agent.sqr.main_phase",\
                                                    "default_sequence.config", lib_cfg);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
   endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Persistent Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A persistent sequence is one that starts during some phase (at time zero, perhaps) and remains active for the remainder of the simulation. Why would you want such a thing?\
Well, we know that a sequencer can have multiple active sequences, so it\'92s not as though your persistent sequence is the only thing happening. Typically, your sequence will wait some period of time, or wait for some event to happen, and then will spring into action. Here are a few possible examples of persistent sequences:\
\pard\tx380\tx740\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\fi-360\ri360\sa240\pardirnatural\qj
\ls115\ilvl0\expnd0\expndtw0\kerning0
{\listtext	\'95	}Random Read Sequence:  Picks a random register to safely read, reads it, then waits for a random period of time before doing it over again.\
{\listtext	\'95	}Interrupt Handler:  Waits for some interrupt event to occur, locks down the sequencer, and begins the process of discovery, reporting, and clearing of interrupts.\
{\listtext	\'95	}Sequence Adapter:  Let\'92s say that you had one sequencer that was spitting out messages and was feeding requests into your ALU agent for mathematical operations. The writer of that agent doesn\'92t know about our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class, so is sending their own sequence items that need to be converted into 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\expnd0\expndtw0\kerning0
The ALU model has a second CSR called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 RESULT
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . This CSR has a 32-bit read-clear field called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 SOR
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  which contains the sum of all results since it was last read. We\'92re going to add a sequence that reads and clears the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 RESULT
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  register every time we believe that it should exceed 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 32\'91h100_000
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and we will check to ensure that it does.\
Here\'92s how we\'92ll do it:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls116\ilvl0{\listtext	1.	}Pipe all monitored results into the ALU sequencer and put each one in a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_tlm_analysis_fifo
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	2.	}Run a sequence starting at time zero that pulls from the FIFO and accumulates the expected SOR value.\
{\listtext	3.	}If the expected SOR value exceeds 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 32\'91h100_0000
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , then read the CSR to clear it.\
{\listtext	4.	}Ensure that the SOR field read a value greater than 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 32\'91h100_0000
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	5.	}Clear the expected SOR value that\'92s been accumulated so far.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
There are a whole slew of new concepts above. \
The first one is the FIFO, which is a handy TLM construct. It is a parameterized object that can connect directly to any analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and offers a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task to let you pull objects out one at a time. It also has zero-time functions 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 try_put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 try_get
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
The next concept is having the sequence pull from its sequencer\'92s FIFO. How can a sequence get a handle to a FIFO in the sequencer?  Better yet:  how will it read from a CSR?  \
The answer is sequencer references.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Sequencer References\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequence
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  base class comes built-in with a reference back to the sequencer it is running on. This reference is called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 m_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Unfortunately, because it is declared in the base class as being of the type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_sequencer_base
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , it\'92s not very useful by itself. After all, the base class doesn\'92t have a FIFO of results.\
\page But, we could create our own reference and cast the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 m_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  back to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::sqr_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that we know it to be, like this:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    sqr_c my_sqr;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    $cast(my_sqr, m_sequencer);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It turns out that this is a pretty common thing to do, so UVM automated it. We have written plenty of sequences so far that haven\'92t needed to reference the sequencer, so it is an optional macro that you add to the class:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_declare_p_sequencer(sqr_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This macro call creates a reference, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that points to our sequencer and knows what kind it is.\
Previously, all of our sequences were detached from the component hierarchy. If we wanted to interact with any other components in the environment, we were out of luck. But the 
\f4\b\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  handle 
\i \expnd0\expndtw0\kerning0
anchors
\i0 \expnd0\expndtw0\kerning0
 our sequence into the hierarchy
\b0 \expnd0\expndtw0\kerning0
. This allows us to do 
\i \expnd0\expndtw0\kerning0
lots
\i0 \expnd0\expndtw0\kerning0
 of nifty new things with sequences.\
In addition to the tiny bit of overhead, the only drawback to declaring a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  handle with the macro is that now our sequence can only be run on this specific sequencer type.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Sequences can be run on different sequencers?!?!
\b0 \expnd0\expndtw0\kerning0
  Yes, they can. And they often do. That\'92s a topic we\'92ll explore some more in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 16\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 . Meantime, let\'92s see how this would all fit together. \
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 14-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Creating a persistent sequence to handle the sum of results register is somewhat complicated at first, so we\'92ll do it in stages. \
Add a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_tlm_analysis_fifo
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to your sequencer that accepts items of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 result_t
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Connect it to the analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  from the monitor via an analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
Your agent will now look like this (unless it is in device reference model mode):\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 19__#$!@%!#__pastedGraphic.pdf \width6040 \height3560
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 18:
\b0 \expnd0\expndtw0\kerning0
 Instantiating an Analysis FIFO\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
An analysis FIFO receives items just like an analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but you do not have to create a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 write
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function to receive them. Instead, any running task can receive the items at its leisure. To add the FIFO to the sequencer:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls117\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // field: monitored_result_exp\
   // An export to connect to the FIFO\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    uvm_analysis_export#(result_t) monitored_result_exp;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: monitored_result_fifo\
   // A FIFO that holds monitored results\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    uvm_tlm_analysis_fifo #(result_t) monitored_result_fifo;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Notice that we created an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  as the exposed user interface to outside classes, and declared the FIFO as one of this component\'92s fields. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is the exposed socket that users plug into, but the FIFO is what is behind the wall--an implementation detail that can change at any time.\
As with any other component you need to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  your FIFOs and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls118\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       monitored_result_exp = new("monitored_result_exp", this);\
      monitored_result_fifo = new(\'93monitored_result_fifo\'94, this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Finally, connect the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to the FIFO\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 analysis_export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls119\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void connect_phase(uvm_phase phase);\
      super.connect_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       monitored_result_exp.connect(monitored_result_fifo.analysis_export);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : connect_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Connecting to the monitor\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the agent should also be straightforward:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls120\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_agent.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       if(!dev_ref_model) begin\
         if(is_active) begin\
            drv.seq_item_port.connect(sqr.seq_item_export);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             mon.monitored_result_port.connect(sqr.monitored_result_exp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Within the agent, you could connect the monitor\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  directly to the sequencer\'92s FIFO, and skip the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 analysis_export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  altogether. But it is considered more programmer-friendly to hide the implementation details within the sequencer and expose only an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 export
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Handling Cyclical Dependencies\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In the next problem, you\'92re going to write a sequence that declares its sequencer using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_declare_p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . We\'92re also going to start it from that very sequencer. This will create a cyclical dependency, because they both must know about each other.\
Fortunately, SystemVerilog supports forward references and late binding. Simply adding a forward declaration of the sequencer above your sequences in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_seq_lib.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  tells the compiler: \'93It\'92s ok, I know what I\'92m doing here.\'94\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls121\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 // Forward declaration of sequencer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 typedef class sqr_c;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now the compiler sees the
\f3\fs22 \expnd0\expndtw0\kerning0
\up0  `uvm_declare_p_sequencer(sqr_c)
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and knows that 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sqr_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  refers to some class, which will later be declared.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 14-3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Let\'92s write our persistent sequence, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sor_clr_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . It should constantly try to pull results from its sequencer\'92s FIFO and accumulate them. Hold off on actually performing the CSR read for now. When the sum reaches or exceeds the value 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 \'91h100_0000
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , announce with a print that it is time to read the CSR. Then clear your accumulated value.\
Have the sequencer itself start this sequence. Run the basic test to ensure that everything is ship-shape.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Here is the sequence that does the job:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls122\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class sor_clr_seq_c extends uvm_sequence#(item_c);\
   `uvm_object_utils(alu_pkg::sor_clr_seq_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    `uvm_declare_p_sequencer(sqr_c)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="sor_clr_seq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      result_t accum_result = 0;\
      result_t new_result;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       forever begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          // get the next monitored transaction and add it to the accumulated results\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          p_sequencer.monitored_result_fifo.get(new_result);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          accum_result += new_result;\
         `cn_dbg(30, ("accum_result = %8X", accum_result))\
\
         if(accum_result >= 32'h100_0000) begin\
            `cn_info((\'93Time to read the RESULT CSR!\'94))\
            // clear out accum_result\
            accum_result = 0;\
         end\
      end\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : sor_clr_seq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The solution declares the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  handle using the macro. It runs in a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 forever
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  loop and calls 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 get
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to fetch the latest result from the sequencer\'92s FIFO, using our 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  handle.\
And here is how the sequence is launched from the sequencer\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls123\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task run_phase(uvm_phase phase);\
      sor_clr_seq_c sor_clr_seq = sor_clr_seq_c::type_id::create("sor_clr_seq");\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       sor_clr_seq.start(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : run_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 When you start a sequence, you have to give it a handle to the sequencer that it is supposed to run on, which just like in C++ is represented by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 this
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  field.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 14-4\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Now replace your print statement with the actual read of the CSR. Follow that up with a check that ensures that the sum actually does exceed 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 \'91h100_0000
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . How do you go about accessing the CSR from a sequence?\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b \expnd0\expndtw0\kerning0
Hint:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Declare either cfg or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the sequencer.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
If you did all of that correctly, it\'92s entirely possible that your test will fail. We\'92ll discuss why it might fail and what can be done about it soon, but first a solution.\
The CSR register blocks and files are all within the component hierarchy. So to use these, the sequence will have to reach down into its own sequencer via the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  handle. We were able to get the register block in the predictor, so we should be able to do that here, too. Start by declaring the register block in the sequencer:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls124\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: reg_block\
   // Auto-generated Register block\
   alu_csr_pkg::reg_block_c reg_block;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Declare it as a field so that it will be auto-populated during the build phase:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls125\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_sqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_field_object(reg_block, UVM_REFERENCE)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Now that the register block is in the sequencer the sequence can easily access it. Here is what was done to its 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 body
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task. All of the changes are in bold:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls126\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task body();\
      result_t accum_result = 0;\
      result_t new_result;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_status_e status;\
      uvm_reg result_reg = p_sequencer.reg_block.RESULT;\
      uvm_reg_data_t sor_value;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       \
      forever begin\
         // get the next monitored transaction and add it to the accumulated results\
         p_sequencer.monitored_result_fifo.get(new_result);\
         accum_result += new_result;\
         `cn_dbg(30, ("accum_result = %8X", accum_result))\
\
         if(accum_result >= 32'h100_0000) begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             result_reg.read(status, sor_value);\
\
            // ensure status was ok\
            if(status == UVM_NOT_OK) begin\
               `cn_err(("Unable to read from RESULT register."))\
            end else begin\
               // ensure that current value exceeds 'h100_0000\
               `cn_dbg(30, ("SOR read as %08X", sor_value))\
               if(sor_value < 'h100_0000)\
                  `cn_err(("Read from RESULT[SOR] but its value was %08X", sor_value))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6                   \
               // clear out accum_result\
               accum_result = 0;\
            end\
         end\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \
We\'92ve been using them all along, but it\'92s worth repeating:  SystemVerilog uses implicit handles all over the place. This bit of code doesn\'92t create anything new, it just assigns a handle to the register:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_reg result_reg = p_sequencer.reg_block.RESULT;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If instead of calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 read
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  you called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mirror
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and then look at the CSR\'92s value, you would have seen a value of zero, which is not the value that was read. This is because the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 mirror
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task performs the read, then updates its expected value of the CSR. Because it\'92s declared as read-clear (\'93RC\'94), it will now be zero.\
Calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 read
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , though, actually gives you the value that was read. And, it is always safe to check that the status of the read was OK.\
Now if you did all of this correctly your test may still fail\'97under the right circumstances\'97with an error like this one:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 %E-(_alu_seq_lib.sv:___312)_[alutb_env.alu_agent.sqr.sor_clr_seq_]_\{__1008ns\} Read from RESULT[SOR] but its value was 000215b3\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 How is it that we did not read out something greater than 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 \'91h100_0000
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ?\
The answer lies in the ordering of sequences and the way the RTL was written. We submitted a read to the sequencer that handles CTX transactions, but these take a certain amount of time to occur. In the meantime, other ALU traffic is going on. If a read happens in the exact same cycle that a new result occurs, then the SOR field will not go to zero, but will go to the value of the new result, which is what you would want in an accumulating CSR. Because the reads take an indeterminate amount of time, multiple results may have been put into the FIFO before the first read completes, and has cleared out the CSR value. Then, your sequence reads all of these FIFO entries in zero time and quickly accumulates beyond the threshold, but is now out of sync with the real value.\
The solution to this problem is to stop the sequencer from issuing new ALU traffic while a CTX read is happening. Previously, we had called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 lock()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 unlock()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to give our sequence exclusive access. But, locking a sequencer actually isn\'92t even fast enough, because lock can be preempted by other traffic\'97potentially 
\i \expnd0\expndtw0\kerning0
lots
\i0 \expnd0\expndtw0\kerning0
 of other traffic. When our sequence needs to read from the CSR, it needs to do so before any more ALU requests go through. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 grab()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ungrab()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  functions will do the trick, because these are prioritized over all other traffic. \
Also, because the read consumes time, it is possible that any sequences which had launched prior to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 grab()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  would now have their results in the results FIFO. These should be cleared out, too. Otherwise our accumulated result will not be correct.\
If you add these to your sequence just before and just after the read, you will find that your test now passes. Below is the complete solution:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls127\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task body();\
      result_t accum_result = 0;\
      result_t new_result;\
      uvm_status_e status;\
      uvm_reg result_reg = p_sequencer.reg_block.RESULT;\
      uvm_reg_data_t sor_value;\
      \
      forever begin\
         // get the next monitored transaction and add it to the accumulated results\
         p_sequencer.monitored_result_fifo.get(new_result);\
         accum_result += new_result;\
         `cn_dbg(30, ("accum_result = %8X", accum_result))\
         \
         if(accum_result >= 32'h100_0000) begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             grab();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             result_reg.read(status, sor_value);\
            \
            // ensure status was ok\
            if(status == UVM_NOT_OK) begin\
               `cn_err(("Unable to read from RESULT register."))\
            end else begin\
               // ensure that current value exceeds 'h100_0000\
               `cn_dbg(30, ("SOR read as %08X", sor_value))\
               if(sor_value < 'h100_0000)\
                 `cn_err(("Read from RESULT[SOR] but its value was %08X", sor_value))\
               \
               // clear out accum_result\
               accum_result = 0;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6                // empty out FIFO in case any have been added since the read started\
               p_sequencer.monitored_result_fifo.flush();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             ungrab();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          end\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Sequence Configurations\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Let\'92s say that we didn\'92t always want to perform the read on such a specific value as 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 \'91h100_0000
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . Maybe we want to make our sequence 
\i \expnd0\expndtw0\kerning0
configurable
\i0 \expnd0\expndtw0\kerning0
.\
We can configure components through the configuration database, so why not sequences as well?  Well, 
\b \expnd0\expndtw0\kerning0
sequences don\'92t have a build phase like components do
\b0 \expnd0\expndtw0\kerning0
, so they don\'92t benefit from the magic call to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 super.build_phase()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  to automatically populate their configurable fields.\
You could use the UVM 
\i \expnd0\expndtw0\kerning0
resource
\i0 \expnd0\expndtw0\kerning0
 database and put explicit set and get calls in your code, like this set in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  of the basic test: \
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls128\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/alutb/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_resource_db#(alu_pkg::result_t)::set("alu_pkg::sor_clr_seq", "trigger_value", 'h300_0000);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And then by placing the get call in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sor_clr_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls129\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/alu/alu_seq_lib.sv  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6      trigger_value = uvm_resource_db#(result_t)::get_by_name("alu_pkg::sor_clr_seq",\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6                                                               "trigger_value").read();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 While this works, these calls are not very attractive. Alternatively, you can have this trigger value be a field in your cfg class and populate that class in the sequencer. Using the cfg class gives you a simple and consistent method for setting variables and configurations for your sequences and provides you with all of the randomization benefits.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We\'92ve only really just scratched the surface of what sequences and sequencers are capable of?  Wait until they\'92re 
\i \expnd0\expndtw0\kerning0
virtualized
\i0 \expnd0\expndtw0\kerning0
!\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 15: A New Testbench\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 It shouldn\'92t surprise you that our ALU module doesn\'92t live all by itself. All block-level testbenches are to be reused in a higher level environment, and the ALU is no different. Fortunately, the ALU subsystem isn\'92t a whole lot more complicated, and most of the work has already been done for you. Integrating your ALU vkit with another vkit in a new testbench is the objective of this chapter.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 The ALU Framer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 20__#$!@%!#__pastedGraphic.pdf \width5900 \height3920
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 19:
\b0 \expnd0\expndtw0\kerning0
 The Complete ALU Block\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
This diagram shows the complete ALU block, which consists of the unit you have been verifying, together with its cousin the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 framer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  block. ALU results are pushed into the framer\'92s FIFO one at a time. A frame length (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frame_len
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , valid on the clock cycle in which 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frame_len_val
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is high) is specified to the framer. When the depth of the FIFO reaches the frame length, all of the results are pushed out as a complete frame, one 32-bit result word at a time. The framer can only accept one frame length request at a time. Once the frame has been completed, a new frame length can be specified.\
The FIFO is 32 quadwords deep, the maximum length of a frame. If it begins to fill up, a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frame_bp
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  signal will be asserted high, indicating that no more ALU transactions should be sent.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Creating the FRM Testbench\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The objective of this chapter is merely to create the new testbench. Fortunately, a script will get you most of the way there. And, the framer vkit is already available to you in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/frm
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
But first, let\'92s see what the environment will look like by the time we\'92re done. We\'92re going to look at it using the topology report that you may have seen at the beginning of your logfiles. You can set the depth of the topology report from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cnmake\'92s TOPO
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  command-line argument.\
Some lines have been deleted for the sake of brevity:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 -----------------------------------------------------------------------------------------------------\
Name                                        Type       Size  Value                                    \
-----------------------------------------------------------------------------------------------------\
<unnamed>                         uvm_root               -   @162                                     \
   uvm_test_top                   basic_test_c           -   @596                                     \
      env                         frm_pkg::env_c         -   @669                                     \
         alu_agent                alu_pkg::agent_c       -   @738                                     \
            drv                   alu_pkg::drv_c         -   @761                                     \
            mon                   alu_pkg::mon_c         -   @753                                     \
            monitored_result_port uvm_analysis_port      -   @919                                     \
            monitored_item_port   uvm_analysis_port      -   @910                                     \
            pred                  pred_c                 -   @948                                     \
            sqr                   alu_pkg::sqr_c         -   @787                                     \
            item_logger           vm_component           -   @931                                     \
         frm_agent                frm_pkg::agent_c       -   @712                                     \
            drv                   frm_pkg::drv_c         -   @1134                                    \
            mon                   frm_pkg::mon_c         -   @1126                                    \
            sqr                   frm_pkg::sqr_c         -   @1160                                    \
         ctx_agent                ctx_pkg::agent_c       -   @724                                     \
         cfg                    frm_pkg::cfg_c       -   @622                                     \
         reg_block                alutb_pkg::reg_block_c -   @623                                     \
      global_env                  global_pkg::env_c      -   @614                                     \
         watchdog                 global_pkg::watchdog_c -   @2790                                    \
      tb_clk_drv                  clk_drv_c              -   @683                                     \
      cfg                       frm_pkg::cfg_c       -   @622                                     \
         reg_block                alutb_pkg::reg_block_c -   @623                                     \
      reg_block                   alutb_pkg::reg_block_c -   @623                                     \
         CONST                alu_const_reg_c            -   @629                                     \
            C_VAL                 uvm_reg_field          ...  RW CONST[7:0]=8'h2a (Mirror: 8'h00) \
            K_VAL                 uvm_reg_field          ...  RW CONST[15:8]=8'h67 (Mirror: 8'h00)\
            RSVD0                 uvm_reg_field          ...  RO CONST[63:16]=48'h000000000000    \
         RESULT               alu_result_reg_c           -   @634                                     \
            SOR                   uvm_reg_field          ...  RC RESULT[31:0]=32'h00000000        \
            RSVD0                 uvm_reg_field          ...  RO RESULT[63:32]=32'h00000000       \
         ctx                      uvm_reg_map            -   @625                                     \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 -----------------------------------------------------------------------------------------------------\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 UVM\'92s handy topology report is an easy way to see the structure of the testbench, how random configurations were chosen, and what the values of all the CSRs will be after configuration.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 UVM New Testbench (untb)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Like 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 untb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  script will generate a lot of the boilerplate code for you. It\'92s quite easy to use:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif>
\f3\b0 \kerning1\expnd-2\expndtw-8
 untb frm\
++ Creating Testbench verif/frm\
++ Creating frm_tb_top.sv\
++ Creating base_test.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 ++ Creating basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 That was simple. Unfortunately, there\'92s still quite a bit of work to do before you\'92ll be able to run it.\
The script creates the standard 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 Makefile
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , flists, the top-level testbench, and the base test and basic test. The first thing to do is add the vkits this testbench will need. You\'92ll want to change the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 Makefile
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  so that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 FLISTS
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable is set like this:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls130\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/frm/Makefile\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 FLISTS= verif/vkits/cn/cn.flist \\\
	verif/vkits/global/global.flist \\\
	verif/vkits/sps/sps.flist \\\
	verif/vkits/csr_cn/csr_cn.flist \\\
	verif/vkits/reg/reg.flist \\\
	verif/vkits/ctx/ctx.flist \\\
	verif/vkits/alu/alu.flist \\\
	verif/vkits/frm/frm.flist \\\
	verif/frm/frm.flist \\\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 	verif/frm/rtl.flist\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Also, remove the following line from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 Makefile
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 TB_XDIRS = ../regs\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 16-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Modify the top-level testbench, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_tb_top.sv:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls131\ilvl0
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 {\listtext	1.	}Create all interfaces.\
{\listtext	2.	}Copy the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_wrapper.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alutb
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  testbench and modify it to have the frame interface as an input. Wire the frame interface up to the ALU.\
{\listtext	3.	}Remove the lines from 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_wrapper.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that clear the frame signals.\
{\listtext	4.	}Add the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_wrapper.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  path to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
{\listtext	5.	}Copy the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 rtl.flist
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  file from the one in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/alutb 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 since both testbenches will be using the same RTL.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
You will also need to make some changes to the base test:\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls132\ilvl0{\listtext	1.	}The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  will be the same as the one in the ALU testbench.\
{\listtext	2.	}The CTX interface names must be assigned.\
{\listtext	3.	}The register block must be tied to the CTX register adapter (see the ALUTB base test\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 connect_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ).\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
The testbench won\'92t do much just yet, but you should be able to compile and run it without any trouble.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
In the top level testbench, you need to instantiate the CTX interface, the ALU interface, and the ALU wrapper. You also need to push the interfaces into the configuration database.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls133\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/frm/frm_tb_top.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: ctx_i\
   // The <ctx_intf> instance.\
   ctx_intf ctx_i(.clk(tb_clk), .rst_n(tb_rst_n));\
\
   // field: alu_i\
   // The <alu_intf> instance\
   alu_intf alu_i(.clk(tb_clk), .rst_n(tb_rst_n));\
\
   //----------------------------------------------------------------------------------------\
   // Group: DUT\
   // (Instantiate the DUT and other modules here)\
   alu_wrapper alu_wrapper(/*AUTOINST*/\
                           // Interfaces\
                           .ctx_i               (ctx_i),\
                           .alu_i               (alu_i),\
                           .frm_i               (frm_i),\
                           // Inputs\
                           .tb_clk              (tb_clk),\
                           .tb_rst_n            (tb_rst_n));\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Procedural Blocks\
   function void pre_run_test();\
      `cn_set_intf(virtual cn_clk_intf    , "cn_pkg::clk_intf" , "tb_clk_vi", tb_clk_i);\
      `cn_set_intf(virtual cn_rst_intf    , "cn_pkg::rst_intf" , "tb_rst_vi", tb_rst_i);\
      `cn_set_intf(virtual ctx_intf.drv_mp, "ctx_pkg::ctx_intf", "ctx_vi"   , ctx_i.drv_mp);\
      `cn_set_intf(virtual ctx_intf.mon_mp, "ctx_pkg::ctx_intf", "ctx_vi"   , ctx_i.mon_mp);\
      `cn_set_intf(virtual alu_intf.drv_mp, "alu_pkg::alu_intf", "drv_vi"   , alu_i.drv_mp)\
      `cn_set_intf(virtual alu_intf.mon_mp, "alu_pkg::alu_intf", "mon_vi"   , alu_i.mon_mp)\
      `cn_set_intf(virtual frm_intf.drv_mp, "frm_pkg::frm_intf", "drv_vi"   , frm_i.drv_mp);\
      `cn_set_intf(virtual frm_intf.mon_mp, "frm_pkg::frm_intf", "mon_vi"   , frm_i.mon_mp);\
   endfunction : pre_run_test\
   \
   // func: Reset Busses\
   initial begin\
      alu_i.reset();\
      frm_i.reset();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    end \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In the base test, the register block comes not from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 csr_frm_pkg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_csr_pkg::reg_block_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . In its build phase, you need to set the interface name for the CTX interface:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls134\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/frm/tests/base_test.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // set CTX interface name\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_config_db#(string)::set(this, "env.ctx_agent",    "intf_name",    "ctx_vi");\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 And in the connect phase, this ties the register block to the CTX environment:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls135\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/frm/tests/base_test.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       if(reg_block.get_parent() == null) begin\
         ctx_pkg::reg_adapter_c ctx_adapter = \
            ctx_pkg::reg_adapter_c::type_id::create("ctx_reg_adapter", , get_full_name());\
         reg_block.csr_map.set_sequencer(env.ctx_agent.sqr, ctx_adapter);\
         reg_block.csr_map.set_auto_predict(1);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Chapter 16: Advanced Sequences II\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Virtual sequencers solve the important problem of how to create a sequence that controls more than one agent at a time. We will discuss these as well as more exotic uses of sequences such as adapter sequences.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Virtual Sequences and Sequencers\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We know that a sequencer arbitrates among sequences and forwards sequence items\'97usually to a driver. Virtual sequencers are just a little bit different.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Virtual Sequencer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa160\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 A virtual sequencer is one that does not send sequence items. Instead, it holds references to other sequencers and forwards sequences onto those sequencers. Virtual sequencers are not parameterized with a request or response type.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\fi360\sl264\slmult1\sa160\pardirnatural

\b \cf3 \expnd0\expndtw0\kerning0
\strokec3 Virtual Sequence\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li720\ri1440\sl264\slmult1\sa240\pardirnatural

\b0 \cf3 \expnd0\expndtw0\kerning0
\strokec3 A virtual sequence is any sequence that is running on a virtual sequencer. It may push sequence items or other sequences, but it always pushes them to a sequencer that is referenced by the virtual sequencer on which it is running.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
\cf0 \expnd0\expndtw0\kerning0
\strokec0 The current 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_pkg::env_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  environment contains the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but does not contain the virtual sequencer (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 vsqr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ). Our goal is to create this sequencer, and then run virtual sequences on it that are capable of touching both agents.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 21__#$!@%!#__pastedGraphic.pdf \width3600 \height4180
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 20:  
\b0 \expnd0\expndtw0\kerning0
The Virtual Sequencer in the Framer Environment\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
As can be seen from the diagram, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 vsqr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  component references the individual sequencers in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . These are referred to as its subsequencers. The references should be set during the environment\'92s connect phase. You can also add the register block to the virtual sequencer, in case any of the sequences running on it need to access CSRs.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 16-1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Create the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_pkg::vsqr_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  component using 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  (with the template named 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 vsqr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), populate the references to the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  sequencers, and the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reg_block
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance, and instantiate it within 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_pkg::env_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
Uncomment the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/frm/frm_vseq_lib.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and set it as the default sequence for the virtual sequencer\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  in the basic test.\
\page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f3\b0\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  provides most of what you need. All that needs to be done is add the references.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls136\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/frm/frm_vsqr.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 `include \'93frm_sqr.sv\'94\
\
// class: vsqr_c\
// Virtual sequencer holding references to frm_sqr and alu_sqr\
class vsqr_c extends uvm_sequencer;\
   `uvm_component_utils_begin(frm_pkg::vsqr_c)\
      `uvm_field_object(frm_sqr,         UVM_REFERENCE)\
      `uvm_field_object(alu_sqr,         UVM_REFERENCE)\
      `uvm_field_object(reg_block,       UVM_REFERENCE)\
   `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Sequencer references\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: frm_sqr\
   sqr_c frm_sqr;\
\
   // field: alu_sqr\
   alu_pkg::sqr_c alu_sqr;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: reg_block\
   // alutb register block (reference to the one in cfg)\
   alu_csr_pkg::reg_block_c reg_block;\
      \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="vsqr",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : vsqr_c   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Note that 
\b \expnd0\expndtw0\kerning0
the build phase is not used to create the subsequencers
\b0 \expnd0\expndtw0\kerning0
.\
In the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_pkg::env_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , the virtual sequencer is instantiated in the usual manner and the connect phase is used to perform the assignments. If either of the sequencers are not present (which would happen if either agent were accidentally set to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 UVM_PASSIVE
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), then a fatal error is reported:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls137\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/frm/frm_env.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void connect_phase(uvm_phase phase);\
      super.connect_phase(phase);\
\
      if(!frm_agent.sqr || !alu_agent.sqr)\
         `cn_fatal(("frame_agent.sqr or alu_agent.sqr are not present!"))\
\
      vsqr.frm_sqr = frm_agent.sqr;\
      vsqr.alu_sqr = alu_agent.sqr;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : connect_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 \page And the basic test is modified to launch the basic virtual sequence:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls138\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/frm/tests/basic.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
      uvm_config_db#(uvm_object_wrapper)::set(this, "env.vsqr.main_phase",\
                                              "default_sequence", \
                                              frm_pkg::basic_vseq_c::type_id::get());\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase
\f1\b\fs24 \cf14 \expnd0\expndtw0\kerning0
\up0 \strokec14 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\fs28 \cf2 \expnd0\expndtw0\kerning0
\up0 \strokec2 Virtual Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Virtual sequences are generally only different from other sequences in three ways. \
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls139\ilvl0{\listtext	1.	}First, they launch their sequences and sequence items using the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_on
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  family of macros, specifying the reference to the sequencer on which to launch the item as their second argument. \
{\listtext	2.	}Second, in order to refer to their sequencer\'92s subsequencers they must call the macro 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_declare_p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . \
{\listtext	3.	}Third, library sequences do not support virtual sequences (as of UVM 1.1). However, a pattern for library virtual sequences is provided for you in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Appendix D\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj
Let\'92s examine the virtual sequence in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_vseq_lib.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . The body task uses a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 fork..join
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  construct to simultaneously send two different sequences to two different sequencers. One is a frame item, and another is an instance of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::exer_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls140\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/frm/frm_vseq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class basic_vseq_c extends uvm_sequence;\
   `uvm_object_utils(frm_pkg::basic_vseq_c)\
   `uvm_declare_p_sequencer(vsqr_c)\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="basic_vseq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      frame_c frame;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       alu_pkg::exer_seq_c alu_exer_seq;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // create and randomize to see how many ALU transactions to send\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_create_on(frame, p_sequencer.frm_sqr)\
      frame.randomize();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `cn_info(("Sending this frame: %s", frame.convert2string()))\
      \
      fork\
         begin : send_frame\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             `uvm_send(frame);\
            get_response(rsp);\
            `cn_info(("Frame completed: %s", rsp.convert2string()))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          end\
         \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          `uvm_do_on_with(alu_exer_seq, p_sequencer.alu_sqr, \{ count == frame.frame_len; \})\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       join\
\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : basic_vseq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Some explanations are below:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       alu_pkg::exer_seq_c alu_exer_seq;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Instead of creating our own sequence which runs a number of random ALU transactions, we can just re-use sequences from other vkits that this vkit is aware of.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `uvm_create_on(frame, p_sequencer.frm_sqr)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6       frame.randomize();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We want to randomize the frame ourselves so that we know how many ALU transactions to send in. Since a sequence\'92s sequencer must be determined at the time of its creation, UVM provides the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_create_on
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro. Because we declared the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable with 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_declare_p_sequencer
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that is how we reference the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frm_sqr
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instance.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             `uvm_send(frame);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Since the frame has already been created and randomized, we do not use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_on
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but instead we just want to launch it. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             get_response(rsp);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6             `cn_info(("Frame completed: %s", rsp.convert2string()))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 We sent in an object derived from sequence item (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 frame_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), so we need to get the response. In this agent, the response frame will not return until the frame with all its data has been pushed out of the framer block.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          `uvm_do_on_with(alu_exer_seq, p_sequencer.alu_sqr, \{ count == frame.frame_len; \})\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Here, we are doing a sequence, specifying the non-virtual sequencer to do it on, and supplying the correct count of ALU transactions to run. UVM offers the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_on_with
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro for just such an occasion.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Problem 16-2\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
Nothing about the framer block says that the frame length has to be specified before or after the ALU transactions associated with it. In the file 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/vkits/frm_vseq_lib.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , write a virtual sequence called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_delay_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that varies which one comes first. \
Then, write another sequence, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , that executes a random number of these. Set this as the default sequence of the test in 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 verif/frm/tests/basic.sv
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
See if you can find anything wrong with the simulation.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural

\b \expnd0\expndtw0\kerning0
Solution\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \expnd0\expndtw0\kerning0
This implementation of 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_delay_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  randomizes a signed integer between -100ns and 100ns. If the random delay is positive, it delays the frame first. If it is negative, it delays the ALU sequence instead.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls141\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/frm/frm_vseq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class basic_delay_vseq_c extends uvm_sequence;\
   `uvm_object_utils(frm_pkg::basic_delay_vseq_c)\
   `uvm_declare_p_sequencer(vsqr_c)\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // frame_delay_ns\
   // Delay of sending the frame, with respect to starting the ALU transactions\
   // If frame_delay_ns is negative, then send the frame first, otherwise, send transactions first\
   rand int frame_delay_ns;\
   constraint frame_delay_cnstr \{ frame_delay_ns inside \{[-100:100]\}; \}\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="basic_delay_vseq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      frame_c frame;\
      alu_pkg::exer_seq_c alu_exer_seq;\
      \
      // create and randomize to see how many ALU transactions to send\
      `uvm_create_on(frame, p_sequencer.frm_sqr)\
      frame.randomize();\
\
      `cn_info(("Sending this frame: %s", frame.convert2string()))\
      \
      fork\
         begin\
            if(frame_delay_ns > 0)\
               #(frame_delay_ns * 1ns);\
            `uvm_send(frame);\
            get_response(rsp);\
            `cn_info(("Frame completed: %s", rsp.convert2string()))\
         end\
\
         begin\
            if(frame_delay_ns < 0)\
               #((-frame_delay_ns) * 1ns);\
            `uvm_do_on_with(alu_exer_seq, p_sequencer.alu_sqr, \{ count == frame.frame_len; \})\
         end\
      join\
\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : basic_delay_vseq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The exerciser sequence is a virtual sequence because it is running on a virtual sequencer. But it only launches sequences of type 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 basic_delay_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which run on the same sequencer as it does. So it does not need to use 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_do_on
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , and does not need to refer to any of the subsequencers.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls142\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/frm/frm_vseq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class exer_vseq_c extends uvm_sequence;\
   `uvm_object_utils_begin(frm_pkg::exer_vseq_c)\
      `uvm_field_int(count, UVM_ALL_ON | UVM_DEC)\
   `uvm_object_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // field: count\
   // The number of basic_vseq to do\
   rand int count;\
   constraint count_cnstr \{ count inside \{[20:100]\}; \}\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="exer_vseq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      basic_delay_vseq_c vseq;\
      `cn_info((\'93Transmitting %0d frames.\'94, count))\
      repeat(count)\
         `uvm_do(vseq)\
   endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : exer_vseq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Everything about this test should seem to work. There is a problem, though. While your sequence prints that it is transmitting a certain number of frames, it will probably actually send fewer than that (or none at all).\
The problem is that the main phase of the simulation can end during the body of your sequence, and your sequence will never complete. That\'92s because UVM does not implicitly wait for a component\'92s default sequence to finish before moving on to the next phase. After all, it might be a persistent sequence that never ends.\
We\'92ll discuss this in more detail in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Appendix A\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 . In the meantime, you can solve this problem by having the sequence explicitly raise and drop the phase\'92s objection. Do this by adding the following code to your 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exer_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls143\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}verif/vkits/frm/frm_vseq_lib.sv\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task body();\
      basic_delay_vseq_c vseq;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `cn_seq_raise\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `cn_info((\'93Transmitting %0d frames.\'94, count))\
      repeat(count)\
         `uvm_do(vseq)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `cn_seq_drop\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Adapter Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 With the example of virtual sequences, we have seen how block-level sequences can be re-used in higher-level testbenches by continuing to be run on the same sequencers for which they were designed. But what if, upon moving up to the full-chip level, you wanted to operate the same sequences on a different sequencer?\
At a higher level your ALU agent may be passive, and the stimulus to the ALU block is instead fed by another RTL block. But, you\'92ve gone to a lot of trouble creating sequences that stimulate the ALU just the way you like them, why should you have to re-do them for a different interface?  This is where adapter sequences can help.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf5 \expnd0\expndtw0\kerning0
\strokec5 One-to-One\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A simple example would be a feeder block that received CTX write transactions that were then converted to ALU transactions. The objective would be to use the ALU stimulus that was already created for its block-level testbench in this higher-level testbench. To accomplish this, an ALU agent\'92s sequencer could be directed to feed its ALU transactions stream to a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instantiated inside a feeder agent\'92s sequencer instead of its own driver. On this sequencer is running an adapter sequence which is a persistent sequence that constantly pulls from the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  just as a driver would. It then converts each transaction to the correct CTX transaction type, and drives them out its own sequencer.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 22__#$!@%!#__pastedGraphic.pdf \width6820 \height4140
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 21:  
\b0 \expnd0\expndtw0\kerning0
Using an Adapter Sequence\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
This works well when there is a one-to-one correlation between the sequence items. In this case, an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is directly converted to a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctx_pkg::item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . And, the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 alu_pkg::result_t
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is converted to a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 ctx_pkg::item_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\page The basic algorithm for the adapter sequence\'92s body would be as follows, where creation and conversion is done in an algorithm called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 convert_to_ctx
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls144\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    task body();\
      alu_pkg::item_c alu_item;\
\
      forever begin\
         p_sequencer.alu_item_port.get_next_item(alu_item);\
         
\f4\b \kerning1\expnd-2\expndtw-8
convert_to_ctx
\f3\b0 \kerning1\expnd-2\expndtw-8
(item, alu_item);\
         `uvm_send(item);\
         alu_item.result = read_result();\
         p_sequencer.alu_item_port.item_done(alu_item);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs24 \cf5 \expnd0\expndtw0\kerning0
\strokec5 One-to-Many\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Alternatively, what if the feeder block took several CTX transactions to perform one ALU transaction?  The feeder block might hypothetically operate by writing the A value to one CSR, the B value to another CSR, and the operation type to a third CSR. An adapter sequence would also be the right choice here, as it would merely send three outbound CTX transactions for every one ALU transaction.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf5 \expnd0\expndtw0\kerning0
\strokec5 Many-to-One\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 A more complex example is one that has a many-to-one mapping of sequence items. The feeder block instead might receive CTX transactions that write a block of data into it, and then an CTX request that starts summing all of the numbers to be summed, with a polling mechanism to indicate when the transaction is complete.\
We already have a sequence that sums an array. It even checks the final result for us. But it transmits multiple transactions that need to be lumped into one transaction. The adapter sequence would have to be smart enough to know how to do this, and that may not be practical. Thought must be given to how and where complex scenario prediction should take place. In this example, an adapter sequence may not be the right solution, and putting the prediction within the sequence may have been a mistake because it would not be reusable in the higher-level testbench.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 \page \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural
\cf2 \expnd0\expndtw0\kerning0
\strokec2 Conclusion\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 In this chapter, we learned the important concept of virtual sequences and sequencers. We also saw how adapter sequences can be re-used to take a sequence that resides on one interface and drive it on the next. \
Congratulations!  This concludes the final chapter. The material presented here offers a template that applies to a very specific\'97and rather simplistic\'97device under test. The scenarios for which you later apply these lessons will be more complex and very different from this one, but hopefully what is presented here will help steer you towards a clear path.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix A: Phases and Heartbeats\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The global environment contains both a watchdog timer and a heartbeat monitor. Together with UVM\'92s phase objections, these components work together to ensure that simulation jobs are not running away needlessly.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Watchdog Timer\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The watchdog timer will issue a fatal error when the simulation time exceeds the specified watchdog time, which can be set on a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cnmake
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  command-line:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 verif/alutb>
\f3\b0 \kerning1\expnd-2\expndtw-8
 cnmake sim UTEST=basic --wdog 300000\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Watchdog times are always specified in nanoseconds.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Phase Objections\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Phase objections exist to ensure that your various independent components do not get ahead of one another. It would be inappropriate to start sending packets into a DUT before reset was complete, for example. \
Each of UVM\'92s run-time phases ends immediately when all phase objections have been dropped. 
\b \expnd0\expndtw0\kerning0
Any task that was spawned during the phase but is still active will immediately be killed.
\b0 \expnd0\expndtw0\kerning0
\
The heartbeat monitor works in concert with a well-constructed environment which raises and drops objections in the correct manner. Where and when your objections take place depend on the current phase.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 23__#$!@%!#__pastedGraphic.pdf \width4960 \height9060
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 22:  
\b0 \expnd0\expndtw0\kerning0
UVM Phases\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\i0\b\fs24 \cf5 \expnd0\expndtw0\kerning0
\strokec5 Reset Phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  package contains a standard reset driver component, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 cn_pkg::rst_drv_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . This  driver may be instantiated and configured to provide a simple reset on a single reset line. When this standard driver is used, it will manage the raising and dropping of the reset phase\'92s objections for you.\
If you decide to create your own reset driver, this phase\'92s objection must be raised at the beginning of the phase, and be dropped once the reset is complete.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf5 \expnd0\expndtw0\kerning0
\strokec5 Configuration Phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 As discussed in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 12\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , the configuration phase may be as simple as calling 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 register_block.update()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , or as complicated as you wish it to be. Like the reset phase, objections should be raised at the beginning and dropped at the end.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf5 \expnd0\expndtw0\kerning0
\strokec5 Main Phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The main phase is substantially different from both the reset and configuration phases. The purpose of the main phase is to launch sequences that inject sequence items into the DUT. The main phase does not necessarily wait for the completion of these items, it merely lasts as long as it takes to send these items to the drivers.\
Therefore, the main phase should end once all sequence items have been launched. Where these objections are raised and dropped depends entirely on how your sequences are launched.\
If your main phase is creating and starting your sequences directly, then you must raise and drop the objections once they are complete. In \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 9\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , your first sequence was started in this manner:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls145\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task main_phase(uvm_phase phase);\
      alu_pkg::alu_seq_c alu_seq = new("basic_seq");\
      \
      phase.raise_objection(this);\
      `cn_info(("Starting alu_seq."))\
      alu_seq.start(alutb_env.alu_agent.sqr);\
      phase.drop_objection(this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : main_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Alternatively, you may launch your sequences as the default sequence of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 main_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . In \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 14\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 , this is how you launched the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sum_array_seq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 :\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls146\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 uvm_config_db#(uvm_object_wrapper)::set(this, "alutb_env.alu_agent.sqr.main_phase", \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6                                         "default_sequence", alu_pkg::sum_array_seq_c::type_id::get());\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 When a sequence is launched in this manner, a field in the sequence called 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 starting_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is set to the current phase. Otherwise, this field is 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 null
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 . In either the sequence\'92s body, or in pre- and post-body tasks, you can use this field to raise and drop the objection:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls147\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task pre_body();\
      if(starting_phase)\
         starting_phase.raise_objection();\
   endtask : pre_body\
\
   virtual task post_body();\
      if(starting_phase)\
         starting_phase.drop_objection();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : post_body\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Since you never know when a sequence is going to be configured to be a default sequence, you would have to add these tasks to every sequence you write. A recommended procedure is to create a base sequence that contains this code, and then derive all of your other sequences from it.\
You can also use the macros 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_seq_raise
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `cn_seq_drop
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  as shown in \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Chapter 16\cf0 \expnd0\expndtw0\kerning0
\ulnone \strokec0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf5 \expnd0\expndtw0\kerning0
\strokec5 Shutdown Phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The shutdown phase is the DUT\'92s opportunity to finish responding to all of the stimulus that was previously driven into it. This phase should end once all of the stimulus has 
\i \expnd0\expndtw0\kerning0
completed
\i0 \expnd0\expndtw0\kerning0
. This is usually decided by a predictor whose scoreboards are empty, a monitor or driver awaiting responses, etc. Only components that can determine this information should be raising and dropping the shutdown phase\'92s objection.\
The following is a typical pattern for a predictor\'92s shutdown phase:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls148\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task shutdown_phase(uvm_phase phase);\
      if(scoreboard.size()) begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          phase.raise_objection(this, $sformatf("Waiting for %0d responses.", scoreboard.size()));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          while(scoreboard.size())\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6             @(response_received);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          phase.drop_objection(this, "All responses complete.");\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : shutdown_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The phase only raises an objection if there are outstanding packets, otherwise it does nothing. As shown here, an event must have been defined which is triggered whenever a response is received.\
Once the shutdown phase is complete, your simulation will move to the extract and check phases.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b \cf5 \expnd0\expndtw0\kerning0
\strokec5 Extract and Check Phases\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The extract phase precedes the check phase and provides higher-level components with the opportunity to pull information from lower-level components in order to complete its prediction process. \
The check phase is your environment\'92s last chance to say whether or not the simulation passed or failed. This is where scoreboards must be checked to be empty, credits must be completed, etc.\
These phases are not run-time phases. They are zero-time functions whose objections need not be raised or dropped. They are mentioned here because as you will see in the next section, it is important that your predictive components report errors during the check phase for any final conditions. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Deadlock Checking\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Deadlock
\i0 \expnd0\expndtw0\kerning0
 is when stimulus has gone into the DUT, but responses are not coming out. How long to wait before deciding that it will never come out is a function of your DUT and your environment. When a simulation is deadlocked, it should immediately exit and report a failure. It is also helpful to report what the environment is still waiting for.\
The global environment\'92s heartbeat monitor, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 global_pkg::heartbeat_mon_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , is the configurable component that is responsible for detecting a deadlock scenario. During the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 end_of_elaboration
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phase, components that are responsible for tracking responses from the DUT (i.e. monitors, predictors, subscribers, etc.) register themselves with the heartbeat monitor. Then, after reset has completed, the heartbeat monitor periodically checks to ensure that 
\i \expnd0\expndtw0\kerning0
at least one
\i0 \expnd0\expndtw0\kerning0
 registered component has seen some form of activity from the DUT (the heartbeat). The length of time between these checks is called the 
\i \expnd0\expndtw0\kerning0
sample time
\i0 \expnd0\expndtw0\kerning0
. The monitor will obey the 
\i \expnd0\expndtw0\kerning0
longest
\i0 \expnd0\expndtw0\kerning0
 sample time required by all registered components.\
If no activity was seen during the last sample time, the simulation is considered deadlocked. In that scenario, all run-time phases are immediately halted, and the simulation proceeds to the extract, check, and final phases, where your environment has an opportunity to report what activity is still expected of the DUT. This is called a 
\i \expnd0\expndtw0\kerning0
phase jump
\i0 \expnd0\expndtw0\kerning0
.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 24__#$!@%!#__pastedGraphic.pdf \width9360 \height2140
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 23:  
\b0 \expnd0\expndtw0\kerning0
Deadlock Phase Jump\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
The art of getting the heartbeat monitor to work properly for your environment lies in determining which components must be registered, and how long the sample time should be. Your registered monitors will probably have different needs from one another. For example, AMBA responses might come out just a few clocks after the request, whereas a complex algorithmic unit such as a video encoder might take 50,000ns before a response comes out. \
Each component registers itself and its required sample time during the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 end_of_elaboration
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phase using a standard macro:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls149\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void end_of_elaboration_phase(uvm_phase phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       `global_add_to_heartbeat_mon(7000ns)\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : end_of_elaboration_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 When a response to 
\i \expnd0\expndtw0\kerning0
stimulus
\i0 \expnd0\expndtw0\kerning0
 is seen from the DUT, then your component indicates a heartbeat with another macro. It is important to distinguish between responses to stimulus and responses to random traffic, such as random CSR reads.\
The ALU monitor\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task would add this functionality:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls150\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual task monitor_result();\
      forever begin\
         @(posedge mon_vi.mon_cb.ready);\
         if(waiting_for_result == null)\
            `cn_err(("Monitored Result does not match any outstanding transaction."))\
         \
         `cn_info(("Monitored Result: %08X", mon_vi.mon_cb.result));\
         monitored_result_port.write(mon_vi.mon_cb.result);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          `global_heartbeat("Result seen")\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          waiting_for_result = null;\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endtask : monitor_result\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The ALU monitor\'92s check phase should report an error if it is still waiting for a response:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls151\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void check_phase(uvm_phase phase);\
      super.check_phase(phase);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       if(waiting_for_result != null)\
         `cn_err(("Monitor is currently waiting for a result to transaction: %s", \
                  waiting_for_result.convert2string()))\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : check_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Both of these methods use the variable 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 waiting_for_result
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , which is a reference to the outstanding request and would be set by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 monitor_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task.\
Note that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 utg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  script does 
\b \expnd0\expndtw0\kerning0
not
\b0 \expnd0\expndtw0\kerning0
 do this for you. You will need to add these heartbeats and checks yourself.\
By default, the heartbeat monitor starts in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_configuration
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phase, but it can be configured to start during 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_reset
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  or 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_main
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instead. It stops at the beginning of  the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 post_shutdown
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phase.\
You can use the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 post_shutdown
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  phase to perform any end-of-run testing, such as reading statistics CSRs, etc.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa180\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix B: Common Recipes\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Implementing a Watchdog\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Often, you will want to send something into the DUT and ensure that it completes within a \'93reasonable\'94 amount of time. Otherwise, you want to report an error. Depending on your scenario, this may be measured in nanoseconds, clocks, or some other triggering event. \
A simple method to do this is as follows:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls152\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 fork\
   do_something();\
   begin\
      #(5000ns);\
      `cn_error((\'93Watchdog timeout!\'94))\
   end\
join_any\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 disable fork;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Either the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_something()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task will complete its mission, or the error will occur in 5,000ns. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Forking Multiple Instances of a Method\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 There will be a host of situations where you will want to fork off multiple instances of the same method call with different arguments. Doing this simple approach will not give the desired results:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 for(int num=0; num < 5; num++)\
   fork\
      do_stuff(num);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    join_none\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Nor will this:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 fork\
   for(int num=0; num < 5; num++)\
      do_stuff(num);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 join\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The problem with both of these examples is that while five tasks will be launched, they will all be launched with an argument of 4. This is due to the fact that the loop will add 4 tasks to the scheduler, and when they later launch the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 num
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable will have a final value of 4.\
\page To fix this, you need an 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 automatic
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  variable to accept the loop value:\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls153\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 for(int num=0; num < 5; num++) begin\
   automatic int _num = num;\
   fork\
      do_stuff(_num);\
   join_none\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Phase-Boundary Crossing Tasks\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Any task that starts in a run-time phase (other than the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ), will be killed at the end of that phase. Raising and holding an objection on that phase may not be desirable if you want that task to continue into a later phase.\
A way around that is to wait for a start event in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 run_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , launch your task, and then kill it upon receiving a finish event. In the following example, the task 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_stuff()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  launches at the beginning of the main phase and continues through to the end of the shutdown phase. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 do_stuff()
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task runs a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 forever
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  loop.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls154\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 event start_event, finish_event;\
\
////////////////////////////////////////////\
virtual task run_phase(uvm_phase phase);\
   @(start_event);\
   fork\
      do_stuff();\
      @(finish_event);\
   join_any\
   disable fork;\
endtask : run_phase\
\
////////////////////////////////////////////\
virtual task main_phase(uvm_phase phase);\
   -> start_event;\
endtask : main_phase\
\
////////////////////////////////////////////\
virtual task post_shutdown_phase(uvm_phase phase);\
   -> finish_event;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endtask : post_shutdown_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Randomizing a Dynamic Array of Objects\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 If you want to generate a randomly-sized array of classes, you declare them as a dynamic array and constrain its size:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 rand port_c ports[];\
constraint ports_cnstr \{\
   ports.size() inside \{[1:64]\};\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 However, you still need to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  the array and create each element before you can randomize them.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 ports = new[
\f4\b \kerning1\expnd-2\expndtw-8
??
\f3\b0 \kerning1\expnd-2\expndtw-8
];\
foreach(ports[x])\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    ports[x] = port_c::type_id::create($sformatf(\'93ports[%0d]\'94, x), this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 But how do you 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  an array of classes when you don\'92t know the size of the array beforehand?  And where do you put this code?\
The solution is that you 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 new
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  the maximum number of possible ports. After the size is randomized, the array will be re-sized and the extras will be garbage-collected.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls155\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 function new(string name=\'94my_class\'94);\
   super.new(name);\
   ports = new[64];\
   foreach(ports[x])\
      ports[x] = port_c::type_id::create($sformatf(\'93ports[%0d]\'94, x), this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endfunction : new\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 While this method may initially be wasteful of resources, it does permit higher-level objects the ability to add constraints onto the items in the array:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 constraint cfg_cnstr \{\
   cfg.ports.size() == 3;\
   cfg.ports[0].item == 0;\
   cfg.ports[1].item == 4;\
   cfg.ports[2].item == 7;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Dynamic Arrays of TLM Ports\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Creating a random number of TLM ports is actually pretty straightforward. A cfg class holds the number of ports that need to be created, a dynamic array is declared, and during the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 build_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  the array is newed and each of the ports is newed.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls156\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class agent_c extends uvm_agent;\
   `uvm_component_utils_begin(agent_c)\
      `uvm_field_object(cfg, UVM_REFERENCE)\
   `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   // field: cfg\
   // The agent configuration class\
   cfg_c cfg;\
\
   //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: item_ports\
   uvm_blocking_put_port #(item_c) item_ports[];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="agent", uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       item_ports = new[cfg.num_ports];\
      foreach(item_ports[p])\
         item_ports[p] = new($sformatf("item_ports[%0d]", p), this);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : agent_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 But how does one create a dynamic array of 
\i \expnd0\expndtw0\kerning0
n
\i0 \expnd0\expndtw0\kerning0
 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ?  Recall that if a component contains multiple 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , each must be declared with the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 `uvm_blocking_put_imp_decl
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  macro and each macro must have a matching 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 put
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task. But what if you might have 
\i \expnd0\expndtw0\kerning0
n
\i0 \expnd0\expndtw0\kerning0
=1,000 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 imps
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ?\
The solution involves instantiating 
\i \expnd0\expndtw0\kerning0
n
\i0 \expnd0\expndtw0\kerning0
 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 exports
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , connecting them to 
\i \expnd0\expndtw0\kerning0
n
\i0 \expnd0\expndtw0\kerning0
 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_tlm_fifo
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  instances, and then spawning 
\i \expnd0\expndtw0\kerning0
n
\i0 \expnd0\expndtw0\kerning0
 tasks that pull from these FIFOs.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls157\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class agent_c extends uvm_agent;\
   `uvm_component_utils_begin(agent_c)\
      `uvm_field_object(cfg, UVM_DEFAULT)\
   `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   // field: cfg\
   // The agent configuration class\
   cfg_c cfg;\
   \
   //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: item_exports\
   uvm_blocking_put_export #(item_c) item_exports[];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       \
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: item_fifos\
   // These are 'internal' to the agent and so not exposed to users\
   item_fifo_t req_fifo[];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="agent", uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // instantiate the exports and fifos\
      item_exports = new[cfg.num_imps];\
      item_fifos = new[cfg.num_imps];\
\
      foreach(item_exports[p]) begin\
         item_exports[p] = new($sformatf("item_exports[%0d]", p), this);\
         item_fifos[p] = new($sformatf("item_fifos[%0d]", p), this);\
      end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : build_phase\
\
   ////////////////////////////////////////////\
   // func: connect_phase\
   virtual function void connect_phase(uvm_phase phase);\
      super.connect_phase(phase);\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // connect each export to its assigned fifo\
      foreach(req_export[p])\
         req_export[p].connect(req_fifo[p].put_export);\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : connect_phase\
\
   ////////////////////////////////////////////\
   // func: run_phase\
   // Spawn separate tasks for each fifo\
   virtual task run_phase(uvm_phase phase);\
      foreach(item_fifos[p]) begin\
         automatic int _p = p;\
         fork\
            handle_item(_p);\
         join_none\
      end\
   endtask : run_phase\
\
   ////////////////////////////////////////////\
   // func: handle_item\
   // Continuously retrieve items from the assigned fifo\
   virtual task handle_item(int _port);\
      item_c item;\
      forever begin\
         item_fifos[_port].get(_item);\
         `cn_info((\'93I got an item!\'94))\
      end\
   endtask : handle_item\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : agent_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix C: Vertical Reuse\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The term 
\i \expnd0\expndtw0\kerning0
vertical reuse
\i0 \expnd0\expndtw0\kerning0
 refers to taking your block-level testbench and reusing its components at a subsystem or full-chip level. It requires that you architect your environment to be flexibly used with the other environments in the system. This appendix will describe the recommended architecture that can be used by most designs.\
Suppose there are two blocks in the system, alpha and beta. They communicate with one another over the a2b interface and the b2a interface. These can collectively be referred to as the AB interface. Each of these blocks will have its own separate testbench.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 25__#$!@%!#__pastedGraphic.pdf \width7700 \height1540
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 24:
\b0 \expnd0\expndtw0\kerning0
  Shared Interfaces\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
To facilitate re-use, the preferred approach is to extract the AB interface into its own separate vkit. Separate alpha and beta block-level testbenches might appear as follows, with the components of the AB vkit given in blue. The AB vkit consists of the interface(s), an a2b agent, and a b2a agent. Because it consists of multiple agents, it is convenient to create a configurable AB environment.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 26__#$!@%!#__pastedGraphic.pdf \width3960 \height2380
}}{{\NeXTGraphic 27__#$!@%!#__pastedGraphic.pdf \width3960 \height2380
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 25: 
\b0 \expnd0\expndtw0\kerning0
Multiple Uses of An Interface Vkit\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
The alpha testbench must drive on the b2a interface to stimulate alpha\'92s inputs, but needs only to monitor the a2b interface. Therefore, it puts the b2a agent in active mode and the a2b agent in passive mode. Conversely, the beta testbench sets the a2b agent in active mode and the b2a agent in passive mode. A complete AB environment would appear as shown below.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 28__#$!@%!#__pastedGraphic.pdf \width4460 \height6820
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 26:
\b0 \expnd0\expndtw0\kerning0
 The Complete AB Environment\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
Now suppose that the designers of the alpha and beta environments wished to put an alpha/beta subsystem testbench together. This becomes a simple matter of instantiating and connecting the components of the three vkits and configuring them to behave in a manner suitable for this testbench. \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 29__#$!@%!#__pastedGraphic.pdf \width7700 \height6120
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 27: 
\b0 \expnd0\expndtw0\kerning0
 An Interface Vkit in a Full-Chip Environment\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\i0\b\fs24 \cf5 \expnd0\expndtw0\kerning0
\strokec5 Shared Cfg Classes\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The alpha testbench has the alpha environment which contains all of the required components to test the alpha block, including those components such as the AB environment that exist in other vkits. These other vkits have their own cfg classes. It is highly desirable to give higher-level components access to the configurations of lower-level components. To do so, a hierarchy of cfg classes should mirror the architecture of the components they serve.\
In the case of the alpha testbench, an alpha cfg class would contain an instance of the AB cfg class. Likewise, the beta cfg class would also contain the AB cfg class.\
A subsystem environment would likely have its own cfg class (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sub_pkg::cfg_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ). It would have an instance of the alpha cfg class and a beta cfg class. But, it would also contain just a single instance of the AB cfg class which it would then push down into the alpha and beta cfg classes so that only one instance exists.\
In the combined subsystem 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  would be found a single instance of the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 sub_pkg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  cfg class.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural

\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 30__#$!@%!#__pastedGraphic.pdf \width9360 \height4520
}}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qc

\f0\i\b\fs20 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Figure 28:
\b0 \expnd0\expndtw0\kerning0
 CFG Classes in a Sub-System Environment\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\i0\fs24 \expnd0\expndtw0\kerning0
There are a great many advantages to this approach. First, higher-level cfg classes can impose constraints and settings on lower-level cfg classes. Second, by consolidating all of the sub-system\'92s configurations into a single hierarchical cfg class it can easily be re-used at a full-chip level. Third, by instantiating the cfg class in the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_test
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  and then pushing references to it to lower-level components, the tests can tweak all of the knobs in the system by adding constraints upon them.\
Example A2B and alpha cfg classes and a base test of the alpha\'92s block-level testbench are shown below. Here, the base test calls the alpha cfg class\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 create_cfg 
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 function to create the A2B cfg class. When the alpha cfg class is randomized, the AB cfg class will also be randomized.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls158\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 //****************************************************************************************\
package ab_pkg;\
   import uvm_pkg::*;\
\
   class cfg_c extends uvm_object;\
      `uvm_object_utils_begin(cfg_c)\
         `uvm_field_int(my_alpha_field, UVM_ALL_ON | UVM_HEX)\
         `uvm_field_int(my_beta_field, UVM_ALL_ON | UVM_HEX)\
         `uvm_field_int(my_mix_field, UVM_ALL_ON | UVM_HEX)\
      `uvm_object_utils_end\
   \
      rand bit[15:0] my_alpha_field;\
      rand bit[15:0] my_beta_field;\
      rand bit[31:0] my_mix_field;\
      \
      ////////////////////////////////////////////\
      function new(string name="cfg");\
         super.new(name);\
      endfunction : new\
   endclass : cfg_c\
endpackage : ab_pkg\
\
\
//****************************************************************************************\
package alpha_pkg;\
   import uvm_pkg::*;\
\
   class cfg_c extends uvm_object;\
      `uvm_object_utils_begin(cfg_c)\
         `uvm_field_int(my_field, UVM_ALL_ON | UVM_HEX)\
         `uvm_field_object(ab_cfg, UVM_ALL_ON)\
      `uvm_object_utils_end\
\
      // field: my_field\
      rand bit[15:0] my_field;\
\
      // field: ab_cfg\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       rand ab_pkg::cfg_c ab_cfg;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       constraint ab_cfg_cnstr \{\
         ab_cfg.my_alpha_field == my_field;\
         ab_cfg.my_mix_field[15:0] == my_field;\
      \}\
      \
      ////////////////////////////////////////////\
      function new(string name="cfg");\
         super.new(name);\
      endfunction : new\
\
      ////////////////////////////////////////////\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       function void create_cfg();\
         ab_cfg = ab_pkg::cfg_c::type_id::create("ab_cfg");\
      endfunction : create_cfg\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endclass : cfg_c\
endpackage : alpha_pkg\
\
//****************************************************************************************\
class alpha_base_test_c extends uvm_test;\
   `uvm_component_utils(alpha_base_test_c)\
\
   rand alpha_pkg::cfg_c cfg;\
   constraint alpha_cnstr \{\
      cfg.my_field == 'haaaa;\
   \}\
\
   ////////////////////////////////////////////\
   function new(string name="alpha_base_test", \
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
      // create cfg\
      cfg = alpha_pkg::cfg_c::type_id::create("alpha_cfg");\
      cfg.create_cfg();\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       // randomize all\
      randomize();\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
      `cn_info(("cfg =\\n%s", cfg.sprint()))\
   endfunction : build_phase\
   \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : alpha_base_test_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The subsystem\'92s base test resembles the figure above. Alpha\'92s 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 create_cfg
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  function is 
\b \expnd0\expndtw0\kerning0
not
\b0 \expnd0\expndtw0\kerning0
 called because it is the base test that creates it. So long as the two blocks do not have constraints that conflict with one another on the AB cfg class, the constraints from the alpha and beta cfg classes will correctly be applied to the AB cfg class.\
Here is the code for the sub-system\'92s base test that builds and randomizes all of these (the environments are not shown):\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls159\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 //****************************************************************************************\
class subsys_base_test_c extends uvm_test;\
   `uvm_component_utils_begin(subsys_base_test_c)\
   `uvm_component_utils_end\
\
   // field: alpha_cfg\
   rand alpha_pkg::cfg_c alpha_cfg;\
   constraint alpha_cnstr \{\
      alpha_cfg.my_field == 'haaaa;\
   \}\
\
   // field: beta_cfg\
   rand beta_pkg::cfg_c beta_cfg;\
   constraint beta_cnstr \{\
      beta_cfg.my_field == 'hbbbb;\
   \}\
\
   // field: ab_cfg   \
   rand ab_pkg::cfg_c ab_cfg;\
\
   ////////////////////////////////////////////\
   function new(string name="subsys_base_test", \
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
      // create cfg\
      alpha_cfg = alpha_pkg::cfg_c::type_id::create("alpha_cfg");\
      beta_cfg = beta_pkg::cfg_c::type_id::create("beta_cfg");\
      ab_cfg   = ab_pkg::cfg_c::type_id::create("ab_cfg");\
      
\f4\b \kerning1\expnd-2\expndtw-8
// don\'92t call alpha_cfg.create_cfg()!\

\f3\b0 \kerning1\expnd-2\expndtw-8
\
      // assign cfg\
      alpha_cfg.ab_cfg = ab_cfg;\
      beta_cfg.ab_cfg = ab_cfg;\
\
      // randomize all\
      randomize();\
\
      `cn_info(("alpha_cfg =\\n%s", alpha_cfg.sprint()))\
      `cn_info(("beta_cfg =\\n%s", beta_cfg.sprint()))\
   endfunction : build_phase\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : subsys_base_test_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Passing Meta-Data\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The previous section showed how two different testbenches can effectively work in isolation or be bridged by sharing a configurable vkit. But what if each testbench wished to share its meta-data with each other?  For example, how would predictor A tell predictor B that the packet that each of them just saw on the AB interface correlates with unique-ID 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uid:0047
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ?\
One solution is that the AB monitor pushes the transaction out not one analysis 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 port
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 , but two of them. The following diagram shows how this would work with the AB vkit.\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls160\ilvl0{\listtext	1.	}
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic 31__#$!@%!#__pastedGraphic.pdf \width9000 \height4120
}}
\f0 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 Packet 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uid:0047
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  enters the DUT and is placed in Predictor A\'92s scoreboard.\
{\listtext	2.	}Raw data flows out of DUT A and is observed by the a2b agent\'92s monitor.\
{\listtext	3.	}The a2b monitor collects the complete packet and sends it out its 
\i \expnd0\expndtw0\kerning0
upstream
\i0 \expnd0\expndtw0\kerning0
 port to predictor A:\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    upstream_port.write(pkt);  // pass to predictor A\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls161\ilvl0
\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 {\listtext	1.	}Predictor A correlates the packet received from the a2b monitor with packet 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uid:0047
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that it saw earlier. It then assigns a reference to this unique ID to the new packet that was found.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    virtual function void do_write(a2b_pkg::pkt_c _monitored_pkt);\
      a2b_pkg::pkt_c found_pkt;\
      found_pkt = scoreboard.find_first(item) with (item.received == 0);\
      found_pkt.received = 1;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       _monitored_pkt.uid = found_pkt.uid;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    endfunction : do_write\
\pard\tx20\tx380\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\fi-360\sl264\slmult1\sa240\pardirnatural\qj
\ls162\ilvl0
\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 {\listtext	1.	}The a2b monitor then passes 
\b \expnd0\expndtw0\kerning0
this same packet
\b0 \expnd0\expndtw0\kerning0
 to predictor B via its 
\i \expnd0\expndtw0\kerning0
downstream
\i0 \expnd0\expndtw0\kerning0
 analysis port.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    upstream_port.write(pkt);   // pass to predictor A\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    downstream_port.write(pkt); // pass to predictor B\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Because a handle to the packet that the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 a2b_agent
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  created is passed to 
\b \expnd0\expndtw0\kerning0
both
\b0 \expnd0\expndtw0\kerning0
 predictors, predictor B will see the uid that predictor A 
\i \expnd0\expndtw0\kerning0
assigned
\i0 \expnd0\expndtw0\kerning0
 to it. If DUT A is expected to split packet 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uid:0047
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  into multiple output packets, then predictor A can assign sub-ids to each of the resulting packets.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs36 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Appendix D: Design Patterns\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The following design patterns incorporate the concepts of vertical reuse found in Appendix C as well as the principles of reset testing as discussed in \'93{\field{\*\fldinst{HYPERLINK "http://cafp01.caveonetworks.com/mrwest/SNUG2013/ma4_hunter_paper.pdf"}}{\fldrslt \cf4 \expnd0\expndtw0\kerning0
\ul \ulc4 \strokec4 Reset Testing Made Simple with UVM Phases}}\'94.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Design Pattern for Agents\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The agent design pattern features a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 pre_reset_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that first stops all sequences running on the sequencer, and then resets the driver.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls163\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 // class: agent_c\
class agent_c extends uvm_agent;\
   `uvm_component_utils_begin(my_pkg::agent_c)\
      `uvm_field_enum(uvm_active_passive_enum, is_active, UVM_ALL_ON)\
   `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   // var: is_active\
   // When set to UVM_ACTIVE, the corresponding sqr and drv will be present.\
   uvm_active_passive_enum is_active = UVM_ACTIVE;\
\
   //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // var: item_port\
   // All monitored items go out here\
   uvm_analysis_port#(item_c) item_port;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // vars: drv, mon, sqr\
   // Driver, monitor, and sequencer\
   drv_c drv;\
   mon_c mon;\
   sqr_c sqr;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="agent",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
      mon = mon_c::type_id::create("mon", this);\
      \
      if(is_active) begin\
         drv = drv_c::type_id::create("drv", this);\
         sqr = sqr_c::type_id::create("sqr", this);\
      end\
\
      item_port = new("item_port", this);\
   endfunction : build_phase\
\
   ////////////////////////////////////////////\
   // func: connect_phase\
   virtual function void connect_phase(uvm_phase phase);\
      super.connect_phase(phase);\
      if(is_active) begin\
         drv.seq_item_port.connect(sqr.seq_item_export);\
         drv.downstream_port.connect(mon.upstream_imp);\
      end\
      \
      mon.item_port.connect(item_port);\
   endfunction : connect_phase\
\
   ////////////////////////////////////////////\
   // func: pre_reset_phase\
   virtual task pre_reset_phase(uvm_phase phase);\
      super.pre_reset_phase(phase);\
      if(is_active) begin\
         sqr.stop_sequences();\
         ->drv.reset_driver;\
      end\
   endtask: pre_reset_phase\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : agent_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Design Pattern for Drivers\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The driver below incorporates resettability, a downstream port for vertical reuse, and a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 shutdown_phase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  that will raise the objection whenever a sequence is being driven.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls164\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 // class: drv_c \
class drv_c extends uvm_driver#(item_c);\
   `uvm_component_utils_begin(my_pkg::drv_c)\
      `uvm_field_string(intf_name, UVM_DEFAULT)\
   `uvm_component_utils_end\
\
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   // var: intf_name\
   // Interface name\
   string    intf_name;\
\
   //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // var: downstream_port\
   // Push out expected beats to listeners\
   uvm_analysis_port#(item_c) downstream_port;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: vi\
   // Interface for driving sbus\
   virtual my_intf.drv_mp vi;\
\
   // var: start_driver, reset_driver\
   // Used for reset testing\
   event start_driver, reset_driver;   \
\
   // var: driving\
   // Set to 1 while driving\
   bit driving;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="drv",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   // Get the virtual interface and create the downstream_port\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
      `cn_get_intf(virtual my_intf.drv_mp, "my_pkg::intf", intf_name, vi)\
      downstream_port = new("downstream_port", this);\
   endfunction : build_phase\
\
   ////////////////////////////////////////////\
   // func: run_phase\
   // Launch the driver when out of reset\
   virtual task run_phase(uvm_phase phase);\
      forever begin\
         reset();\
         @(start_driver);\
\
         fork\
            driver();\
         join_none\
\
         @(reset_driver);\
         disable fork;\
      end\
   endtask : run_phase\
\
   ////////////////////////////////////////////\
   // func: post_reset_phase\
   virtual task post_reset_phase(uvm_phase phase);\
      ->start_driver;\
   endtask : post_reset_phase\
\
   ////////////////////////////////////////////\
   // func: shutdown_phase\
   // Ensure that the shutdown phase doesn't finish until we are finished driving\
   virtual task shutdown_phase(uvm_phase phase);\
      forever begin\
         if(driving) begin\
            phase.raise_objection(this, "currently driving");\
            @(driving);\
            phase.drop_objection(this, "inactive");\
         end\
         @(driving);\
      end\
   endtask : shutdown_phase\
\
   ////////////////////////////////////////////\
   // func: reset\
   // Reset the interface signals and any class fields\
   task reset();\
      vi.reset();\
      driving = 0;\
   endtask // tx_reset\
\
   ////////////////////////////////////////////\
   // func: driver\
   // Get requests, pack them, and drive them\
   virtual task driver();\
      byte unsigned cycles[];\
\
      forever begin\
         seq_item_port.try_next_item(req);\
         if(!req) begin\
            vi.reset();\
            seq_item_port.get_next_item(req);\
            @(vi.drv_cb);\
         end\
\
         `cn_dbg(100, ("Driving: %s", req.convert2string()))\
         downstream_port.write(req);\
         cycles.delete();\
         req.pack_bytes(cycles);\
         foreach(cycles[idx]) begin\
            driving = 1;\
            vi.drv_cb.valid <= 1'b1;\
            vi.drv_cb.data <= cycles[idx];\
            `cn_dbg(150, ("Cycle: %02X", cycles[idx]))\
            @(vi.drv_cb);\
         end\
         seq_item_port.item_done(req);\
         driving = 0;\
         vi.reset();\
         @(vi.drv_cb);\
      end\
   endtask : driver\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : drv_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Design Pattern for Monitors\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The monitor below incorporates elements that provide for a clean reset, upstream and downstream connectivity, global heartbeats, and an elegant shutdown phase.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls165\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 // class: mon_c\
class mon_c extends uvm_monitor;\
   `uvm_component_utils_begin(my_pkg::mon_c)\
      `uvm_field_string(intf_name, UVM_DEFAULT)\
   `uvm_component_utils_end\
   \
   //----------------------------------------------------------------------------------------\
   // Group: Configuration Fields\
\
   // var: intf_name\
   // Interface name\
   string intf_name;\
\
   //----------------------------------------------------------------------------------------\
   // Group: TLM Ports\
\
   // var: item_port\
   // All monitored items go out here\
   uvm_analysis_port#(item_c) item_port;\
\
   // var: upstream_analysis_imp\
   // Receives the next expected item\
   uvm_analysis_imp_upstream #(item_c, mon_c) upstream_imp;\
\
   // var: downstream_port\
   // Pushes out the next expected item to listeners\
   uvm_analysis_port #(item_c) downstream_port;\
\
   //----------------------------------------------------------------------------------------\
   // Group: Fields\
\
   // var: vi\
   // Virtual interface to monitor\
   virtual my_intf.mon_mp vi;\
\
   // var: exp_items\
   // The expected items from upstream\
   item_c exp_items[$];\
\
   //----------------------------------------------------------------------------------------\
   // Group: Methods\
   function new(string name="mon",\
                uvm_component parent=null);\
      super.new(name, parent);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: build_phase\
   virtual function void build_phase(uvm_phase phase);\
      super.build_phase(phase);\
\
      `cn_get_intf(virtual my_intf.mon_mp, "my_pkg::intf", intf_name, vi)\
      item_port = new("item_port", this);\
      upstream_imp = new("upstream_imp", this);\
      downstream_port = new("downstream_port", this);\
   endfunction : build_phase\
\
   ////////////////////////////////////////////\
   // func: end_of_elaboration_phase\
   virtual function void end_of_elaboration_phase(uvm_phase phase);\
      super.end_of_elaboration_phase(phase);\
      `global_add_to_heartbeat_mon();\
   endfunction : end_of_elaboration_phase\
\
   ////////////////////////////////////////////\
   // func: run_phase\
   // Launch the monitor and handle reset gracefully\
   virtual task run_phase(uvm_phase phase);\
      forever begin\
         @(posedge vi.rst_n);\
\
         fork\
            monitor();\
         join_none\
\
         @(negedge vi.rst_n);\
         disable fork;\
\
         exp_items.delete();\
      end\
   endtask : run_phase\
\
   ////////////////////////////////////////////\
   // func: shutdown_phase\
   // Ensure that shutdown phase doesn't end until we've seen all expected items\
   virtual task shutdown_phase(uvm_phase phase);\
      forever begin\
         if(exp_items.size()) begin\
            phase.raise_objection(this, $sformatf("Expecting %0d items.", exp_items.size()));\
            `cn_info(("Waiting for %0d items.", exp_items.size()))\
            wait(exp_items.size() == 0);\
            phase.drop_objection(this, "inactive");\
         end\
         wait(exp_items.size() > 0);\
      end\
   endtask : shutdown_phase\
\
   ////////////////////////////////////////////\
   // func: monitor\
   // Monitor the sbus interface and reconstruct packets\
   task monitor();\
      byte unsigned cycles[$];\
      \
      forever begin\
         @(posedge vi.mon_cb.valid);\
         `global_heartbeat("activity seen")\
\
         while(vi.mon_cb.valid) begin\
         cycles.push_back(vi.mon_cb.data);\
         @(vi.mon_cb);\
      end\
\
      item_rcvd(cycles);\
         cycles.delete();\
      end\
   endtask : monitor\
\
   ////////////////////////////////////////////\
   // func: item_rcvd\
   // Called when a complete item has been seen\
   virtual function void item_rcvd(byte unsigned _cycles[$]);\
      byte unsigned stream[];\
      item_c item = item_c::type_id::create("item");\
      item_c exp_item = exp_items.pop_front();\
\
      if(exp_item) \
         item.uid = exp_item.uid;\
\
      stream = new[_cycles.size()](_cycles);\
      item.data = new[_cycles.size()];\
      item.unpack_bytes(stream);\
\
      `cn_dbg(100, ("Monitored: %s", item.convert2string()))\
      item_port.write(item);\
   endfunction : item_rcvd\
\
   ////////////////////////////////////////////\
   // func: write_upstream\
   // The implementation for the upstream_imp, to gather the expected items\
   // (used only for UID mapping, but could be used for more)\
   virtual function write_upstream(item_c _item);\
      exp_items.push_back(_item);\
      downstream_port.write(_item);\
   endfunction : write_upstream\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa180\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : mon_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\sa240\pardirnatural

\f0\b\fs28 \cf2 \expnd0\expndtw0\kerning0
\strokec2 Design Pattern for Library Virtual Sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 Library sequences for virtual sequences are unfortunately not supported by UVM 1.1. The design pattern below provides an example of how you might structure one. It relies upon its own cfg class being present in its virtual sequencer to provide it with the number of sequences to run, as well as their random distribution.\
\pard\tx360\tx936\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li936\fi-936\pardirnatural
\ls166\ilvl0
\f4\b\fs12 \cf6 \expnd0\expndtw0\kerning0
\strokec6 {\listtext	1.	}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 class lib_vseq_c extends uvm_sequence;\
   `uvm_object_utils_begin(cmr_pkg::lib_vseq_c)\
   `uvm_object_utils_end\
   `uvm_declare_p_sequencer(vsqr_c)\
\
   //----------------------------------------------------------------------------------------\
   // Fields\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: outstanding\
   // An assoc. array of all the outstanding sequences\
   base_vseq_c outstanding[cn_pkg::uid_c];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
   // field: max_outstanding\
   // The most we should launch at once, to make sure we don't get too crazy\
   int unsigned max_outstanding;\
\
   // field: seq_cfg\
   // Reference to sequence config component\
   lib_seq_cfg_c lib_seq_cfg;\
\
   //----------------------------------------------------------------------------------------\
   // Methods\
   function new(string name="lib_vseq");\
      super.new(name);\
   endfunction : new\
\
   ////////////////////////////////////////////\
   // func: body\
   virtual task body();\
      lib_seq_cfg = p_sequencer.cfg.lib_seq_cfg;\
      max_outstanding = lib_seq_cfg.max_outstanding;\
      assert(max_outstanding) else\
         `cn_fatal(("lib_seq_cfg.max_outstanding cannot be zero!"))\
\
      `cn_seq_raise\
\
      `cn_info(("Launching %0d sequences.", lib_seq_cfg.cnt))\
\
      //......................\
      fork\
         launcher();\
         reporter();\
      join_any\
\
      disable fork;\
      \
      `cn_info(("Exerciser complete after %0d sequences.", lib_seq_cfg.cnt))\
      `cn_seq_drop\
   endtask : body\
\
   ////////////////////////////////////////////\
   // func: launcher\
   // Launch the sequences and wait for them all to finish\
   virtual task launcher();\
      int num_sent;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_object_wrapper wrap;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       string type_name;\
     \
      do begin\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          automatic base_vseq_c vseq;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 \
         // wait here if necessary\
         wait(outstanding.size() < max_outstanding);\
\
         // break if the number sent has reached the count\
         if(num_sent >= lib_seq_cfg.cnt)\
            break;\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          // decide which type to send\
         randcase\
            lib_seq_cfg.alpha_wt   : wrap = alpha_vseq_c::type_id::get();\
            lib_seq_cfg.beta_wt    : wrap = beta_vseq_c::type_id::get();\
            lib_seq_cfg.charlie_wt : wrap = charlie_vseq_c::type_id::get();\
         endcase\
         type_name = wrap.get_type_name();\
\
         $cast(vseq, create_item(wrap, m_sequencer, type_name));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          `cn_dbg(50, ("%s Launching %s", vseq.uid.convert2string(), type_name))\
         vseq.randomize();\
         outstanding[vseq.uid] = vseq;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          fork\
            begin\
               automatic string _type_name = type_name;\
               `uvm_send(vseq)\
               num_sent++;\
               outstanding.delete(vseq.uid);\
            end\
         join_none\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       end while(num_sent < lib_seq_cfg.cnt);\
\
      // wait for all to finish\
      wait(outstanding.size() == 0);\
\
   endtask : launcher\
\
   ////////////////////////////////////////////\
   // func: reporter\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // Report all of the outstanding vseqs whenever there is a heartbeat\
   virtual task reporter();\
      forever begin\
         // do this everytime the heartbeat monitor samples\
         @(global_pkg::env.heartbeat_mon.sampled);\
         `cn_info(("These sequences remain outstanding:"))\
         foreach(outstanding[uid])\
            `cn_dbg(200, ("%s", uid.convert2string()))\
      end\
   endtask : reporter\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f3\b0 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6 endclass : lib_vseq_c\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 This design pattern has a number of interesting features to note.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6    // field: outstanding\
   // An assoc. array of all the outstanding sequences\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6    base_vseq_c outstanding[cn_pkg::uid_c];\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 All of the virtual sequences that can be sent by this sequence must derive from a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  class to ensure that they each have their own unique ID (
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uid_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 ). The library sequence tracks each of the outstanding sequences that it launches by keeping them in this associative array. Their unique IDs are used by the 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 reporter
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  task to help users identify which of the launched sequences are still outstanding should the simulation deadlock.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6       uvm_object_wrapper wrap;\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The library sequence is simplified by treating all of the sequences that it may launch the same. The 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 uvm_object_wrapper
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  is a UVM class that is passed to 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 create_item
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  so that we can assign it to the base virtual sequence, 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 base_vseq_c
\f0\fs24 \expnd0\expndtw0\kerning0
\up0 .\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          // decide which type to send\
         randcase\
            lib_seq_cfg.alpha_wt   : wrap = alpha_vseq_c::type_id::get();\
            lib_seq_cfg.beta_wt    : wrap = beta_vseq_c::type_id::get();\
            lib_seq_cfg.charlie_wt : wrap = charlie_vseq_c::type_id::get();\
         endcase\
         type_name = wrap.get_type_name();\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6          $cast(vseq, create_item(wrap, m_sequencer, type_name));\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 The library sequence uses a 
\f3\fs22 \expnd0\expndtw0\kerning0
\up0 randcase
\f0\fs24 \expnd0\expndtw0\kerning0
\up0  statement and the weights supplied to it by its own cfg class to randomly select which type of sequence to launch.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\pardirnatural

\f4\b\fs16 \cf6 \kerning1\expnd-2\expndtw-8
\strokec6          fork\
            begin\
               automatic string _type_name = type_name;\
               `uvm_send(vseq)\
               num_sent++;\
               outstanding.delete(vseq.uid);\
            end\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\li360\sa240\pardirnatural
\cf6 \kerning1\expnd-2\expndtw-8
\strokec6          join_none\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl264\slmult1\sa240\pardirnatural\qj

\f0\b0\fs24 \cf0 \expnd0\expndtw0\kerning0
\strokec0 For every virtual sequence that this sequence launches, an individual thread is spawned that sends it and waits for its completion. When the sequence completes, it is deleted from the outstanding array. When all of the sequences have been launched and no more are outstanding, then the library sequence can finish.
\f2 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\sl312\slmult1\pardirnatural

\f7\fs12 \cf0 \expnd0\expndtw0\kerning0
\up0 \super \ulnone \outl0\strokewidth0 \strokec0 1
\fs18 \expnd0\expndtw0\kerning0
\nosupersub  All of the messaging macro definitions can be found in 
\f3 \expnd0\expndtw0\kerning0
verif/vkits/cn_msgs.sv
\f7 \expnd0\expndtw0\kerning0
.
\fs12 \expnd0\expndtw0\kerning0
\super 2
\fs18 \expnd0\expndtw0\kerning0
\nosupersub  Well, almost free. The environment will perform a database lookup before newing the object. While this is hardly free in terms of run-time, the ability to dynamically alter the types of objects being created without having to re-write numerous lines of code can be a tremendous savings.
\fs12 \expnd0\expndtw0\kerning0
\super 3
\fs18 \expnd0\expndtw0\kerning0
\nosupersub  More accurately, an imp is the specific functionality that the user must define for a port.
\fs12 \expnd0\expndtw0\kerning0
\super 4
\fs18 \expnd0\expndtw0\kerning0
\nosupersub  There may also be instances where the order of register writes are not seed-stable.
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\pard\tqc\tx4680\tqr\tx9360\pardeftab720\sl288\slmult1\pardirnatural

\f0\fs14 \cf5 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec5 	Version 1.0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 \
\pard\tqr\tx9360\pardeftab720\sl312\slmult1\sa180\pardirnatural

\f0\fs18 \cf0 \expnd0\expndtw0\kerning0
\up0 \nosupersub \ulnone \outl0\strokewidth0 \strokec0 The UVM Tutorial, version 1.0	190
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \up0 \nosupersub \ulnone \outl0\strokewidth0 {{\NeXTGraphic exportedGraphic.pdf \width7780 \height6240
}}{{\NeXTGraphic 1__#$!@%!#__exportedGraphic.pdf \width7780 \height6240
}}{{\NeXTGraphic 2__#$!@%!#__exportedGraphic.pdf \width10540 \height4600
}}{{\NeXTGraphic 3__#$!@%!#__exportedGraphic.pdf \width6360 \height3040
}}{{\NeXTGraphic 4__#$!@%!#__exportedGraphic.pdf \width9080 \height5360
}}}